const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index-xR07Ve0S.js","./index-fvoixXIL.js","./index-BHkwocXA.css","./index-CNut6PbO.js","./index-BCTBe50e.js","./use-custom-filters-CAGajgby.js","./index-CyD0Y6xA.css","./index-S082Ejhv.js"])))=>i.map(i=>d[i]);
import{R as $,j as s,r as f,a as et,g as Kn,c as qo,p as qa,b as Xa,d as He,l as _e,u as V,e as Ja,f as ke,_ as Za,t as Wn,h as jn,i as Zl,k as Jt,m as An,n as mp,o as hp,q as pp,s as Ql}from"./index-fvoixXIL.js";import{c as ze,u as ce,a as jr,b as Ct,d as $t,P as Q,e as Y,f as rt,g as nt,h as Lr,i as Xo,j as Qa,k as ei,R as ti,F as ni,D as Jo,l as gp,m as ed,V as xp,n as vp,o as ua,p as yp,q as td,r as nd,J as bp,s as rd,t as wp,v as Cp,w as zs,x as jp,M as Np,y as od,z as Sp,A as kp,B as Mp,C as ri,E as Ep,G as Dp,H as sd,I as ad,K as Rp,L as Tp,N as Op,O as Ip,Q as Pp,S as Eo,T as Ap,U as _p,W as dc,X as $p,Y as Lp,Z as Bp,_ as Fp,$ as Wp,a0 as zp,a1 as Hp,a2 as Yp,a3 as id,a4 as _,a5 as fa,a6 as z,a7 as we,a8 as Qt,a9 as hn,aa as pn,ab as Br,ac as Fr,ad as Wr,ae as xe,af as ve,ag as Ne,ah as ye,ai as at,aj as $n,ak as Xt,al as We,am as Nr,an as hr,ao as uc,ap as Up,aq as fc,ar as Ot,as as Vp,at as Gp,au as ot,av as mc,aw as ma,ax as hc,ay as Kp,az as pc,aA as qp,aB as Xp,aC as Jp,aD as cd,aE as Zp,aF as Qp,aG as eg,aH as gc,aI as xc,aJ as vc,aK as yc,aL as tg}from"./index-BCTBe50e.js";import{toast as Ve,Toaster as ng}from"./index-xR07Ve0S.js";function oi(e){const t=e+"CollectionProvider",[n,r]=ze(t),[o,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=x=>{const{scope:v,children:y}=x,b=$.useRef(null),w=$.useRef(new Map).current;return s.jsx(o,{scope:v,itemMap:w,collectionRef:b,children:y})};i.displayName=t;const c=e+"CollectionSlot",l=jr(c),d=$.forwardRef((x,v)=>{const{scope:y,children:b}=x,w=a(c,y),C=ce(v,w.collectionRef);return s.jsx(l,{ref:C,children:b})});d.displayName=c;const u=e+"CollectionItemSlot",m="data-radix-collection-item",h=jr(u),p=$.forwardRef((x,v)=>{const{scope:y,children:b,...w}=x,C=$.useRef(null),S=ce(v,C),N=a(u,y);return $.useEffect(()=>(N.itemMap.set(C,{ref:C,...w}),()=>void N.itemMap.delete(C))),s.jsx(h,{[m]:"",ref:S,children:b})});p.displayName=u;function g(x){const v=a(e+"CollectionConsumer",x);return $.useCallback(()=>{const b=v.collectionRef.current;if(!b)return[];const w=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(v.itemMap.values()).sort((N,j)=>w.indexOf(N.ref.current)-w.indexOf(j.ref.current))},[v.collectionRef,v.itemMap])}return[{Provider:i,Slot:d,ItemSlot:p},g,r]}var Zo="Collapsible",[rg,CD]=ze(Zo),[og,si]=rg(Zo),ld=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:o,disabled:a,onOpenChange:i,...c}=e,[l,d]=Ct({prop:r,defaultProp:o??!1,onChange:i,caller:Zo});return s.jsx(og,{scope:n,disabled:a,contentId:$t(),open:l,onOpenToggle:f.useCallback(()=>d(u=>!u),[d]),children:s.jsx(Q.div,{"data-state":ii(l),"data-disabled":a?"":void 0,...c,ref:t})})});ld.displayName=Zo;var dd="CollapsibleTrigger",ud=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,o=si(dd,n);return s.jsx(Q.button,{type:"button","aria-controls":o.contentId,"aria-expanded":o.open||!1,"data-state":ii(o.open),"data-disabled":o.disabled?"":void 0,disabled:o.disabled,...r,ref:t,onClick:Y(e.onClick,o.onOpenToggle)})});ud.displayName=dd;var ai="CollapsibleContent",Qo=f.forwardRef((e,t)=>{const{forceMount:n,...r}=e,o=si(ai,e.__scopeCollapsible);return s.jsx(rt,{present:n||o.open,children:({present:a})=>s.jsx(sg,{...r,ref:t,present:a})})});Qo.displayName=ai;var sg=f.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:o,...a}=e,i=si(ai,n),[c,l]=f.useState(r),d=f.useRef(null),u=ce(t,d),m=f.useRef(0),h=m.current,p=f.useRef(0),g=p.current,x=i.open||c,v=f.useRef(x),y=f.useRef(void 0);return f.useEffect(()=>{const b=requestAnimationFrame(()=>v.current=!1);return()=>cancelAnimationFrame(b)},[]),nt(()=>{const b=d.current;if(b){y.current=y.current||{transitionDuration:b.style.transitionDuration,animationName:b.style.animationName},b.style.transitionDuration="0s",b.style.animationName="none";const w=b.getBoundingClientRect();m.current=w.height,p.current=w.width,v.current||(b.style.transitionDuration=y.current.transitionDuration,b.style.animationName=y.current.animationName),l(r)}},[i.open,r]),s.jsx(Q.div,{"data-state":ii(i.open),"data-disabled":i.disabled?"":void 0,id:i.contentId,hidden:!x,...a,ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":g?`${g}px`:void 0,...e.style},children:x&&o})});function ii(e){return e?"open":"closed"}var es=ld,ts=ud,fd=Qo,ag=f.createContext(void 0);function zr(e){const t=f.useContext(ag);return e||t||"ltr"}function ns(e){const t=f.useRef({value:e,previous:e});return f.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function rs(e){const[t,n]=f.useState(void 0);return nt(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const a=o[0];let i,c;if("borderBoxSize"in a){const l=a.borderBoxSize,d=Array.isArray(l)?l[0]:l;i=d.inlineSize,c=d.blockSize}else i=e.offsetWidth,c=e.offsetHeight;n({width:i,height:c})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var os="Checkbox",[ig,jD]=ze(os),[cg,ci]=ig(os);function lg(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:o,disabled:a,form:i,name:c,onCheckedChange:l,required:d,value:u="on",internal_do_not_use_render:m}=e,[h,p]=Ct({prop:n,defaultProp:o??!1,onChange:l,caller:os}),[g,x]=f.useState(null),[v,y]=f.useState(null),b=f.useRef(!1),w=g?!!i||!!g.closest("form"):!0,C={checked:h,disabled:a,setChecked:p,control:g,setControl:x,name:c,form:i,value:u,hasConsumerStoppedPropagationRef:b,required:d,defaultChecked:Zt(o)?!1:o,isFormControl:w,bubbleInput:v,setBubbleInput:y};return s.jsx(cg,{scope:t,...C,children:dg(m)?m(C):r})}var md="CheckboxTrigger",hd=f.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},o)=>{const{control:a,value:i,disabled:c,checked:l,required:d,setControl:u,setChecked:m,hasConsumerStoppedPropagationRef:h,isFormControl:p,bubbleInput:g}=ci(md,e),x=ce(o,u),v=f.useRef(l);return f.useEffect(()=>{const y=a?.form;if(y){const b=()=>m(v.current);return y.addEventListener("reset",b),()=>y.removeEventListener("reset",b)}},[a,m]),s.jsx(Q.button,{type:"button",role:"checkbox","aria-checked":Zt(l)?"mixed":l,"aria-required":d,"data-state":yd(l),"data-disabled":c?"":void 0,disabled:c,value:i,...r,ref:x,onKeyDown:Y(t,y=>{y.key==="Enter"&&y.preventDefault()}),onClick:Y(n,y=>{m(b=>Zt(b)?!0:!b),g&&p&&(h.current=y.isPropagationStopped(),h.current||y.stopPropagation())})})});hd.displayName=md;var li=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:o,defaultChecked:a,required:i,disabled:c,value:l,onCheckedChange:d,form:u,...m}=e;return s.jsx(lg,{__scopeCheckbox:n,checked:o,defaultChecked:a,disabled:c,required:i,onCheckedChange:d,name:r,form:u,value:l,internal_do_not_use_render:({isFormControl:h})=>s.jsxs(s.Fragment,{children:[s.jsx(hd,{...m,ref:t,__scopeCheckbox:n}),h&&s.jsx(vd,{__scopeCheckbox:n})]})})});li.displayName=os;var pd="CheckboxIndicator",gd=f.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...o}=e,a=ci(pd,n);return s.jsx(rt,{present:r||Zt(a.checked)||a.checked===!0,children:s.jsx(Q.span,{"data-state":yd(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...e.style}})})});gd.displayName=pd;var xd="CheckboxBubbleInput",vd=f.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:o,checked:a,defaultChecked:i,required:c,disabled:l,name:d,value:u,form:m,bubbleInput:h,setBubbleInput:p}=ci(xd,e),g=ce(n,p),x=ns(a),v=rs(r);f.useEffect(()=>{const b=h;if(!b)return;const w=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(w,"checked").set,N=!o.current;if(x!==a&&S){const j=new Event("click",{bubbles:N});b.indeterminate=Zt(a),S.call(b,Zt(a)?!1:a),b.dispatchEvent(j)}},[h,x,a,o]);const y=f.useRef(Zt(a)?!1:a);return s.jsx(Q.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??y.current,required:c,disabled:l,name:d,value:u,form:m,...t,tabIndex:-1,ref:g,style:{...t.style,...v,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});vd.displayName=xd;function dg(e){return typeof e=="function"}function Zt(e){return e==="indeterminate"}function yd(e){return Zt(e)?"indeterminate":e?"checked":"unchecked"}const ug=["top","right","bottom","left"],en=Math.min,Ue=Math.max,Do=Math.round,lo=Math.floor,wt=e=>({x:e,y:e}),fg={left:"right",right:"left",bottom:"top",top:"bottom"},mg={start:"end",end:"start"};function ha(e,t,n){return Ue(e,en(t,n))}function Lt(e,t){return typeof e=="function"?e(t):e}function Bt(e){return e.split("-")[0]}function qn(e){return e.split("-")[1]}function di(e){return e==="x"?"y":"x"}function ui(e){return e==="y"?"height":"width"}const hg=new Set(["top","bottom"]);function yt(e){return hg.has(Bt(e))?"y":"x"}function fi(e){return di(yt(e))}function pg(e,t,n){n===void 0&&(n=!1);const r=qn(e),o=fi(e),a=ui(o);let i=o==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=Ro(i)),[i,Ro(i)]}function gg(e){const t=Ro(e);return[pa(e),t,pa(t)]}function pa(e){return e.replace(/start|end/g,t=>mg[t])}const bc=["left","right"],wc=["right","left"],xg=["top","bottom"],vg=["bottom","top"];function yg(e,t,n){switch(e){case"top":case"bottom":return n?t?wc:bc:t?bc:wc;case"left":case"right":return t?xg:vg;default:return[]}}function bg(e,t,n,r){const o=qn(e);let a=yg(Bt(e),n==="start",r);return o&&(a=a.map(i=>i+"-"+o),t&&(a=a.concat(a.map(pa)))),a}function Ro(e){return e.replace(/left|right|bottom|top/g,t=>fg[t])}function wg(e){return{top:0,right:0,bottom:0,left:0,...e}}function bd(e){return typeof e!="number"?wg(e):{top:e,right:e,bottom:e,left:e}}function To(e){const{x:t,y:n,width:r,height:o}=e;return{width:r,height:o,top:n,left:t,right:t+r,bottom:n+o,x:t,y:n}}function Cc(e,t,n){let{reference:r,floating:o}=e;const a=yt(t),i=fi(t),c=ui(i),l=Bt(t),d=a==="y",u=r.x+r.width/2-o.width/2,m=r.y+r.height/2-o.height/2,h=r[c]/2-o[c]/2;let p;switch(l){case"top":p={x:u,y:r.y-o.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:m};break;case"left":p={x:r.x-o.width,y:m};break;default:p={x:r.x,y:r.y}}switch(qn(t)){case"start":p[i]-=h*(n&&d?-1:1);break;case"end":p[i]+=h*(n&&d?-1:1);break}return p}const Cg=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:i}=n,c=a.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let d=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:m}=Cc(d,r,l),h=r,p={},g=0;for(let x=0;x<c.length;x++){const{name:v,fn:y}=c[x],{x:b,y:w,data:C,reset:S}=await y({x:u,y:m,initialPlacement:r,placement:h,strategy:o,middlewareData:p,rects:d,platform:i,elements:{reference:e,floating:t}});u=b??u,m=w??m,p={...p,[v]:{...p[v],...C}},S&&g<=50&&(g++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(d=S.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):S.rects),{x:u,y:m}=Cc(d,h,l)),x=-1)}return{x:u,y:m,placement:h,strategy:o,middlewareData:p}};async function Sr(e,t){var n;t===void 0&&(t={});const{x:r,y:o,platform:a,rects:i,elements:c,strategy:l}=e,{boundary:d="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:p=0}=Lt(t,e),g=bd(p),v=c[h?m==="floating"?"reference":"floating":m],y=To(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(v)))==null||n?v:v.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(c.floating)),boundary:d,rootBoundary:u,strategy:l})),b=m==="floating"?{x:r,y:o,width:i.floating.width,height:i.floating.height}:i.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c.floating)),C=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},S=To(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:w,strategy:l}):b);return{top:(y.top-S.top+g.top)/C.y,bottom:(S.bottom-y.bottom+g.bottom)/C.y,left:(y.left-S.left+g.left)/C.x,right:(S.right-y.right+g.right)/C.x}}const jg=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:o,rects:a,platform:i,elements:c,middlewareData:l}=t,{element:d,padding:u=0}=Lt(e,t)||{};if(d==null)return{};const m=bd(u),h={x:n,y:r},p=fi(o),g=ui(p),x=await i.getDimensions(d),v=p==="y",y=v?"top":"left",b=v?"bottom":"right",w=v?"clientHeight":"clientWidth",C=a.reference[g]+a.reference[p]-h[p]-a.floating[g],S=h[p]-a.reference[p],N=await(i.getOffsetParent==null?void 0:i.getOffsetParent(d));let j=N?N[w]:0;(!j||!await(i.isElement==null?void 0:i.isElement(N)))&&(j=c.floating[w]||a.floating[g]);const k=C/2-S/2,D=j/2-x[g]/2-1,R=en(m[y],D),O=en(m[b],D),L=R,W=j-x[g]-O,M=j/2-x[g]/2+k,E=ha(L,M,W),T=!l.arrow&&qn(o)!=null&&M!==E&&a.reference[g]/2-(M<L?R:O)-x[g]/2<0,A=T?M<L?M-L:M-W:0;return{[p]:h[p]+A,data:{[p]:E,centerOffset:M-E-A,...T&&{alignmentOffset:A}},reset:T}}}),Ng=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:o,middlewareData:a,rects:i,initialPlacement:c,platform:l,elements:d}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:x=!0,...v}=Lt(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const y=Bt(o),b=yt(c),w=Bt(c)===c,C=await(l.isRTL==null?void 0:l.isRTL(d.floating)),S=h||(w||!x?[Ro(c)]:gg(c)),N=g!=="none";!h&&N&&S.push(...bg(c,x,g,C));const j=[c,...S],k=await Sr(t,v),D=[];let R=((r=a.flip)==null?void 0:r.overflows)||[];if(u&&D.push(k[y]),m){const M=pg(o,i,C);D.push(k[M[0]],k[M[1]])}if(R=[...R,{placement:o,overflows:D}],!D.every(M=>M<=0)){var O,L;const M=(((O=a.flip)==null?void 0:O.index)||0)+1,E=j[M];if(E&&(!(m==="alignment"?b!==yt(E):!1)||R.every(I=>yt(I.placement)===b?I.overflows[0]>0:!0)))return{data:{index:M,overflows:R},reset:{placement:E}};let T=(L=R.filter(A=>A.overflows[0]<=0).sort((A,I)=>A.overflows[1]-I.overflows[1])[0])==null?void 0:L.placement;if(!T)switch(p){case"bestFit":{var W;const A=(W=R.filter(I=>{if(N){const P=yt(I.placement);return P===b||P==="y"}return!0}).map(I=>[I.placement,I.overflows.filter(P=>P>0).reduce((P,B)=>P+B,0)]).sort((I,P)=>I[1]-P[1])[0])==null?void 0:W[0];A&&(T=A);break}case"initialPlacement":T=c;break}if(o!==T)return{reset:{placement:T}}}return{}}}};function jc(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function Nc(e){return ug.some(t=>e[t]>=0)}const Sg=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...o}=Lt(e,t);switch(r){case"referenceHidden":{const a=await Sr(t,{...o,elementContext:"reference"}),i=jc(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Nc(i)}}}case"escaped":{const a=await Sr(t,{...o,altBoundary:!0}),i=jc(a,n.floating);return{data:{escapedOffsets:i,escaped:Nc(i)}}}default:return{}}}}},wd=new Set(["left","top"]);async function kg(e,t){const{placement:n,platform:r,elements:o}=e,a=await(r.isRTL==null?void 0:r.isRTL(o.floating)),i=Bt(n),c=qn(n),l=yt(n)==="y",d=wd.has(i)?-1:1,u=a&&l?-1:1,m=Lt(t,e);let{mainAxis:h,crossAxis:p,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof g=="number"&&(p=c==="end"?g*-1:g),l?{x:p*u,y:h*d}:{x:h*d,y:p*u}}const Mg=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:o,y:a,placement:i,middlewareData:c}=t,l=await kg(t,e);return i===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:o+l.x,y:a+l.y,data:{...l,placement:i}}}}},Eg=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:o}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:c={fn:v=>{let{x:y,y:b}=v;return{x:y,y:b}}},...l}=Lt(e,t),d={x:n,y:r},u=await Sr(t,l),m=yt(Bt(o)),h=di(m);let p=d[h],g=d[m];if(a){const v=h==="y"?"top":"left",y=h==="y"?"bottom":"right",b=p+u[v],w=p-u[y];p=ha(b,p,w)}if(i){const v=m==="y"?"top":"left",y=m==="y"?"bottom":"right",b=g+u[v],w=g-u[y];g=ha(b,g,w)}const x=c.fn({...t,[h]:p,[m]:g});return{...x,data:{x:x.x-n,y:x.y-r,enabled:{[h]:a,[m]:i}}}}}},Dg=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:o,rects:a,middlewareData:i}=t,{offset:c=0,mainAxis:l=!0,crossAxis:d=!0}=Lt(e,t),u={x:n,y:r},m=yt(o),h=di(m);let p=u[h],g=u[m];const x=Lt(c,t),v=typeof x=="number"?{mainAxis:x,crossAxis:0}:{mainAxis:0,crossAxis:0,...x};if(l){const w=h==="y"?"height":"width",C=a.reference[h]-a.floating[w]+v.mainAxis,S=a.reference[h]+a.reference[w]-v.mainAxis;p<C?p=C:p>S&&(p=S)}if(d){var y,b;const w=h==="y"?"width":"height",C=wd.has(Bt(o)),S=a.reference[m]-a.floating[w]+(C&&((y=i.offset)==null?void 0:y[m])||0)+(C?0:v.crossAxis),N=a.reference[m]+a.reference[w]+(C?0:((b=i.offset)==null?void 0:b[m])||0)-(C?v.crossAxis:0);g<S?g=S:g>N&&(g=N)}return{[h]:p,[m]:g}}}},Rg=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:o,rects:a,platform:i,elements:c}=t,{apply:l=()=>{},...d}=Lt(e,t),u=await Sr(t,d),m=Bt(o),h=qn(o),p=yt(o)==="y",{width:g,height:x}=a.floating;let v,y;m==="top"||m==="bottom"?(v=m,y=h===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(y=m,v=h==="end"?"top":"bottom");const b=x-u.top-u.bottom,w=g-u.left-u.right,C=en(x-u[v],b),S=en(g-u[y],w),N=!t.middlewareData.shift;let j=C,k=S;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=w),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(j=b),N&&!h){const R=Ue(u.left,0),O=Ue(u.right,0),L=Ue(u.top,0),W=Ue(u.bottom,0);p?k=g-2*(R!==0||O!==0?R+O:Ue(u.left,u.right)):j=x-2*(L!==0||W!==0?L+W:Ue(u.top,u.bottom))}await l({...t,availableWidth:k,availableHeight:j});const D=await i.getDimensions(c.floating);return g!==D.width||x!==D.height?{reset:{rects:!0}}:{}}}};function ss(){return typeof window<"u"}function Xn(e){return Cd(e)?(e.nodeName||"").toLowerCase():"#document"}function Ge(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function St(e){var t;return(t=(Cd(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Cd(e){return ss()?e instanceof Node||e instanceof Ge(e).Node:!1}function ct(e){return ss()?e instanceof Element||e instanceof Ge(e).Element:!1}function jt(e){return ss()?e instanceof HTMLElement||e instanceof Ge(e).HTMLElement:!1}function Sc(e){return!ss()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Ge(e).ShadowRoot}const Tg=new Set(["inline","contents"]);function Hr(e){const{overflow:t,overflowX:n,overflowY:r,display:o}=lt(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!Tg.has(o)}const Og=new Set(["table","td","th"]);function Ig(e){return Og.has(Xn(e))}const Pg=[":popover-open",":modal"];function as(e){return Pg.some(t=>{try{return e.matches(t)}catch{return!1}})}const Ag=["transform","translate","scale","rotate","perspective"],_g=["transform","translate","scale","rotate","perspective","filter"],$g=["paint","layout","strict","content"];function mi(e){const t=hi(),n=ct(e)?lt(e):e;return Ag.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||_g.some(r=>(n.willChange||"").includes(r))||$g.some(r=>(n.contain||"").includes(r))}function Lg(e){let t=tn(e);for(;jt(t)&&!zn(t);){if(mi(t))return t;if(as(t))return null;t=tn(t)}return null}function hi(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Bg=new Set(["html","body","#document"]);function zn(e){return Bg.has(Xn(e))}function lt(e){return Ge(e).getComputedStyle(e)}function is(e){return ct(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function tn(e){if(Xn(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Sc(e)&&e.host||St(e);return Sc(t)?t.host:t}function jd(e){const t=tn(e);return zn(t)?e.ownerDocument?e.ownerDocument.body:e.body:jt(t)&&Hr(t)?t:jd(t)}function kr(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const o=jd(e),a=o===((r=e.ownerDocument)==null?void 0:r.body),i=Ge(o);if(a){const c=ga(i);return t.concat(i,i.visualViewport||[],Hr(o)?o:[],c&&n?kr(c):[])}return t.concat(o,kr(o,[],n))}function ga(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Nd(e){const t=lt(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const o=jt(e),a=o?e.offsetWidth:n,i=o?e.offsetHeight:r,c=Do(n)!==a||Do(r)!==i;return c&&(n=a,r=i),{width:n,height:r,$:c}}function pi(e){return ct(e)?e:e.contextElement}function Ln(e){const t=pi(e);if(!jt(t))return wt(1);const n=t.getBoundingClientRect(),{width:r,height:o,$:a}=Nd(t);let i=(a?Do(n.width):n.width)/r,c=(a?Do(n.height):n.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const Fg=wt(0);function Sd(e){const t=Ge(e);return!hi()||!t.visualViewport?Fg:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Wg(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Ge(e)?!1:t}function xn(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect(),a=pi(e);let i=wt(1);t&&(r?ct(r)&&(i=Ln(r)):i=Ln(e));const c=Wg(a,n,r)?Sd(a):wt(0);let l=(o.left+c.x)/i.x,d=(o.top+c.y)/i.y,u=o.width/i.x,m=o.height/i.y;if(a){const h=Ge(a),p=r&&ct(r)?Ge(r):r;let g=h,x=ga(g);for(;x&&r&&p!==g;){const v=Ln(x),y=x.getBoundingClientRect(),b=lt(x),w=y.left+(x.clientLeft+parseFloat(b.paddingLeft))*v.x,C=y.top+(x.clientTop+parseFloat(b.paddingTop))*v.y;l*=v.x,d*=v.y,u*=v.x,m*=v.y,l+=w,d+=C,g=Ge(x),x=ga(g)}}return To({width:u,height:m,x:l,y:d})}function cs(e,t){const n=is(e).scrollLeft;return t?t.left+n:xn(St(e)).left+n}function kd(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-cs(e,n),o=n.top+t.scrollTop;return{x:r,y:o}}function zg(e){let{elements:t,rect:n,offsetParent:r,strategy:o}=e;const a=o==="fixed",i=St(r),c=t?as(t.floating):!1;if(r===i||c&&a)return n;let l={scrollLeft:0,scrollTop:0},d=wt(1);const u=wt(0),m=jt(r);if((m||!m&&!a)&&((Xn(r)!=="body"||Hr(i))&&(l=is(r)),jt(r))){const p=xn(r);d=Ln(r),u.x=p.x+r.clientLeft,u.y=p.y+r.clientTop}const h=i&&!m&&!a?kd(i,l):wt(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-l.scrollLeft*d.x+u.x+h.x,y:n.y*d.y-l.scrollTop*d.y+u.y+h.y}}function Hg(e){return Array.from(e.getClientRects())}function Yg(e){const t=St(e),n=is(e),r=e.ownerDocument.body,o=Ue(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Ue(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+cs(e);const c=-n.scrollTop;return lt(r).direction==="rtl"&&(i+=Ue(t.clientWidth,r.clientWidth)-o),{width:o,height:a,x:i,y:c}}const kc=25;function Ug(e,t){const n=Ge(e),r=St(e),o=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,c=0,l=0;if(o){a=o.width,i=o.height;const u=hi();(!u||u&&t==="fixed")&&(c=o.offsetLeft,l=o.offsetTop)}const d=cs(r);if(d<=0){const u=r.ownerDocument,m=u.body,h=getComputedStyle(m),p=u.compatMode==="CSS1Compat"&&parseFloat(h.marginLeft)+parseFloat(h.marginRight)||0,g=Math.abs(r.clientWidth-m.clientWidth-p);g<=kc&&(a-=g)}else d<=kc&&(a+=d);return{width:a,height:i,x:c,y:l}}const Vg=new Set(["absolute","fixed"]);function Gg(e,t){const n=xn(e,!0,t==="fixed"),r=n.top+e.clientTop,o=n.left+e.clientLeft,a=jt(e)?Ln(e):wt(1),i=e.clientWidth*a.x,c=e.clientHeight*a.y,l=o*a.x,d=r*a.y;return{width:i,height:c,x:l,y:d}}function Mc(e,t,n){let r;if(t==="viewport")r=Ug(e,n);else if(t==="document")r=Yg(St(e));else if(ct(t))r=Gg(t,n);else{const o=Sd(e);r={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return To(r)}function Md(e,t){const n=tn(e);return n===t||!ct(n)||zn(n)?!1:lt(n).position==="fixed"||Md(n,t)}function Kg(e,t){const n=t.get(e);if(n)return n;let r=kr(e,[],!1).filter(c=>ct(c)&&Xn(c)!=="body"),o=null;const a=lt(e).position==="fixed";let i=a?tn(e):e;for(;ct(i)&&!zn(i);){const c=lt(i),l=mi(i);!l&&c.position==="fixed"&&(o=null),(a?!l&&!o:!l&&c.position==="static"&&!!o&&Vg.has(o.position)||Hr(i)&&!l&&Md(e,i))?r=r.filter(u=>u!==i):o=c,i=tn(i)}return t.set(e,r),r}function qg(e){let{element:t,boundary:n,rootBoundary:r,strategy:o}=e;const i=[...n==="clippingAncestors"?as(t)?[]:Kg(t,this._c):[].concat(n),r],c=i[0],l=i.reduce((d,u)=>{const m=Mc(t,u,o);return d.top=Ue(m.top,d.top),d.right=en(m.right,d.right),d.bottom=en(m.bottom,d.bottom),d.left=Ue(m.left,d.left),d},Mc(t,c,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Xg(e){const{width:t,height:n}=Nd(e);return{width:t,height:n}}function Jg(e,t,n){const r=jt(t),o=St(t),a=n==="fixed",i=xn(e,!0,a,t);let c={scrollLeft:0,scrollTop:0};const l=wt(0);function d(){l.x=cs(o)}if(r||!r&&!a)if((Xn(t)!=="body"||Hr(o))&&(c=is(t)),r){const p=xn(t,!0,a,t);l.x=p.x+t.clientLeft,l.y=p.y+t.clientTop}else o&&d();a&&!r&&o&&d();const u=o&&!r&&!a?kd(o,c):wt(0),m=i.left+c.scrollLeft-l.x-u.x,h=i.top+c.scrollTop-l.y-u.y;return{x:m,y:h,width:i.width,height:i.height}}function Hs(e){return lt(e).position==="static"}function Ec(e,t){if(!jt(e)||lt(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return St(e)===n&&(n=n.ownerDocument.body),n}function Ed(e,t){const n=Ge(e);if(as(e))return n;if(!jt(e)){let o=tn(e);for(;o&&!zn(o);){if(ct(o)&&!Hs(o))return o;o=tn(o)}return n}let r=Ec(e,t);for(;r&&Ig(r)&&Hs(r);)r=Ec(r,t);return r&&zn(r)&&Hs(r)&&!mi(r)?n:r||Lg(e)||n}const Zg=async function(e){const t=this.getOffsetParent||Ed,n=this.getDimensions,r=await n(e.floating);return{reference:Jg(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Qg(e){return lt(e).direction==="rtl"}const ex={convertOffsetParentRelativeRectToViewportRelativeRect:zg,getDocumentElement:St,getClippingRect:qg,getOffsetParent:Ed,getElementRects:Zg,getClientRects:Hg,getDimensions:Xg,getScale:Ln,isElement:ct,isRTL:Qg};function Dd(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function tx(e,t){let n=null,r;const o=St(e);function a(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),a();const d=e.getBoundingClientRect(),{left:u,top:m,width:h,height:p}=d;if(c||t(),!h||!p)return;const g=lo(m),x=lo(o.clientWidth-(u+h)),v=lo(o.clientHeight-(m+p)),y=lo(u),w={rootMargin:-g+"px "+-x+"px "+-v+"px "+-y+"px",threshold:Ue(0,en(1,l))||1};let C=!0;function S(N){const j=N[0].intersectionRatio;if(j!==l){if(!C)return i();j?i(!1,j):r=setTimeout(()=>{i(!1,1e-7)},1e3)}j===1&&!Dd(d,e.getBoundingClientRect())&&i(),C=!1}try{n=new IntersectionObserver(S,{...w,root:o.ownerDocument})}catch{n=new IntersectionObserver(S,w)}n.observe(e)}return i(!0),a}function nx(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:o=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,d=pi(e),u=o||a?[...d?kr(d):[],...kr(t)]:[];u.forEach(y=>{o&&y.addEventListener("scroll",n,{passive:!0}),a&&y.addEventListener("resize",n)});const m=d&&c?tx(d,n):null;let h=-1,p=null;i&&(p=new ResizeObserver(y=>{let[b]=y;b&&b.target===d&&p&&(p.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=p)==null||w.observe(t)})),n()}),d&&!l&&p.observe(d),p.observe(t));let g,x=l?xn(e):null;l&&v();function v(){const y=xn(e);x&&!Dd(x,y)&&n(),x=y,g=requestAnimationFrame(v)}return n(),()=>{var y;u.forEach(b=>{o&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(y=p)==null||y.disconnect(),p=null,l&&cancelAnimationFrame(g)}}const rx=Mg,ox=Eg,sx=Ng,ax=Rg,ix=Sg,Dc=jg,cx=Dg,lx=(e,t,n)=>{const r=new Map,o={platform:ex,...n},a={...o.platform,_c:r};return Cg(e,t,{...o,platform:a})};var dx=typeof document<"u",ux=function(){},go=dx?f.useLayoutEffect:ux;function Oo(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Oo(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const a=o[r];if(!(a==="_owner"&&e.$$typeof)&&!Oo(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Rd(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Rc(e,t){const n=Rd(e);return Math.round(t*n)/n}function Ys(e){const t=f.useRef(e);return go(()=>{t.current=e}),t}function fx(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:a,floating:i}={},transform:c=!0,whileElementsMounted:l,open:d}=e,[u,m]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,p]=f.useState(r);Oo(h,r)||p(r);const[g,x]=f.useState(null),[v,y]=f.useState(null),b=f.useCallback(I=>{I!==N.current&&(N.current=I,x(I))},[]),w=f.useCallback(I=>{I!==j.current&&(j.current=I,y(I))},[]),C=a||g,S=i||v,N=f.useRef(null),j=f.useRef(null),k=f.useRef(u),D=l!=null,R=Ys(l),O=Ys(o),L=Ys(d),W=f.useCallback(()=>{if(!N.current||!j.current)return;const I={placement:t,strategy:n,middleware:h};O.current&&(I.platform=O.current),lx(N.current,j.current,I).then(P=>{const B={...P,isPositioned:L.current!==!1};M.current&&!Oo(k.current,B)&&(k.current=B,et.flushSync(()=>{m(B)}))})},[h,t,n,O,L]);go(()=>{d===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,m(I=>({...I,isPositioned:!1})))},[d]);const M=f.useRef(!1);go(()=>(M.current=!0,()=>{M.current=!1}),[]),go(()=>{if(C&&(N.current=C),S&&(j.current=S),C&&S){if(R.current)return R.current(C,S,W);W()}},[C,S,W,R,D]);const E=f.useMemo(()=>({reference:N,floating:j,setReference:b,setFloating:w}),[b,w]),T=f.useMemo(()=>({reference:C,floating:S}),[C,S]),A=f.useMemo(()=>{const I={position:n,left:0,top:0};if(!T.floating)return I;const P=Rc(T.floating,u.x),B=Rc(T.floating,u.y);return c?{...I,transform:"translate("+P+"px, "+B+"px)",...Rd(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:P,top:B}},[n,c,T.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:W,refs:E,elements:T,floatingStyles:A}),[u,W,E,T,A])}const mx=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?Dc({element:r.current,padding:o}).fn(n):{}:r?Dc({element:r,padding:o}).fn(n):{}}}},hx=(e,t)=>({...rx(e),options:[e,t]}),px=(e,t)=>({...ox(e),options:[e,t]}),gx=(e,t)=>({...cx(e),options:[e,t]}),xx=(e,t)=>({...sx(e),options:[e,t]}),vx=(e,t)=>({...ax(e),options:[e,t]}),yx=(e,t)=>({...ix(e),options:[e,t]}),bx=(e,t)=>({...mx(e),options:[e,t]});var wx="Arrow",Td=f.forwardRef((e,t)=>{const{children:n,width:r=10,height:o=5,...a}=e;return s.jsx(Q.svg,{...a,ref:t,width:r,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Td.displayName=wx;var Cx=Td,gi="Popper",[Od,rn]=ze(gi),[jx,Id]=Od(gi),Pd=e=>{const{__scopePopper:t,children:n}=e,[r,o]=f.useState(null);return s.jsx(jx,{scope:t,anchor:r,onAnchorChange:o,children:n})};Pd.displayName=gi;var Ad="PopperAnchor",_d=f.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...o}=e,a=Id(Ad,n),i=f.useRef(null),c=ce(t,i),l=f.useRef(null);return f.useEffect(()=>{const d=l.current;l.current=r?.current||i.current,d!==l.current&&a.onAnchorChange(l.current)}),r?null:s.jsx(Q.div,{...o,ref:c})});_d.displayName=Ad;var xi="PopperContent",[Nx,Sx]=Od(xi),$d=f.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:o=0,align:a="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:l=!0,collisionBoundary:d=[],collisionPadding:u=0,sticky:m="partial",hideWhenDetached:h=!1,updatePositionStrategy:p="optimized",onPlaced:g,...x}=e,v=Id(xi,n),[y,b]=f.useState(null),w=ce(t,F=>b(F)),[C,S]=f.useState(null),N=rs(C),j=N?.width??0,k=N?.height??0,D=r+(a!=="center"?"-"+a:""),R=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},O=Array.isArray(d)?d:[d],L=O.length>0,W={padding:R,boundary:O.filter(Mx),altBoundary:L},{refs:M,floatingStyles:E,placement:T,isPositioned:A,middlewareData:I}=fx({strategy:"fixed",placement:D,whileElementsMounted:(...F)=>nx(...F,{animationFrame:p==="always"}),elements:{reference:v.anchor},middleware:[hx({mainAxis:o+k,alignmentAxis:i}),l&&px({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?gx():void 0,...W}),l&&xx({...W}),vx({...W,apply:({elements:F,rects:Z,availableWidth:ae,availableHeight:H})=>{const{width:re,height:se}=Z.reference,pe=F.floating.style;pe.setProperty("--radix-popper-available-width",`${ae}px`),pe.setProperty("--radix-popper-available-height",`${H}px`),pe.setProperty("--radix-popper-anchor-width",`${re}px`),pe.setProperty("--radix-popper-anchor-height",`${se}px`)}}),C&&bx({element:C,padding:c}),Ex({arrowWidth:j,arrowHeight:k}),h&&yx({strategy:"referenceHidden",...W})]}),[P,B]=Fd(T),K=Lr(g);nt(()=>{A&&K?.()},[A,K]);const G=I.arrow?.x,ee=I.arrow?.y,te=I.arrow?.centerOffset!==0,[le,ie]=f.useState();return nt(()=>{y&&ie(window.getComputedStyle(y).zIndex)},[y]),s.jsx("div",{ref:M.setFloating,"data-radix-popper-content-wrapper":"",style:{...E,transform:A?E.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:le,"--radix-popper-transform-origin":[I.transformOrigin?.x,I.transformOrigin?.y].join(" "),...I.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(Nx,{scope:n,placedSide:P,onArrowChange:S,arrowX:G,arrowY:ee,shouldHideArrow:te,children:s.jsx(Q.div,{"data-side":P,"data-align":B,...x,ref:w,style:{...x.style,animation:A?void 0:"none"}})})})});$d.displayName=xi;var Ld="PopperArrow",kx={top:"bottom",right:"left",bottom:"top",left:"right"},Bd=f.forwardRef(function(t,n){const{__scopePopper:r,...o}=t,a=Sx(Ld,r),i=kx[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(Cx,{...o,ref:n,style:{...o.style,display:"block"}})})});Bd.displayName=Ld;function Mx(e){return e!==null}var Ex=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:o}=t,i=o.arrow?.centerOffset!==0,c=i?0:e.arrowWidth,l=i?0:e.arrowHeight,[d,u]=Fd(n),m={start:"0%",center:"50%",end:"100%"}[u],h=(o.arrow?.x??0)+c/2,p=(o.arrow?.y??0)+l/2;let g="",x="";return d==="bottom"?(g=i?m:`${h}px`,x=`${-l}px`):d==="top"?(g=i?m:`${h}px`,x=`${r.floating.height+l}px`):d==="right"?(g=`${-l}px`,x=i?m:`${p}px`):d==="left"&&(g=`${r.floating.width+l}px`,x=i?m:`${p}px`),{data:{x:g,y:x}}}});function Fd(e){const[t,n="center"]=e.split("-");return[t,n]}var vi=Pd,Yr=_d,ls=$d,ds=Bd,Us="rovingFocusGroup.onEntryFocus",Dx={bubbles:!1,cancelable:!0},Ur="RovingFocusGroup",[xa,Wd,Rx]=oi(Ur),[Tx,Jn]=ze(Ur,[Rx]),[Ox,Ix]=Tx(Ur),zd=f.forwardRef((e,t)=>s.jsx(xa.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(xa.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Px,{...e,ref:t})})}));zd.displayName=Ur;var Px=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:o=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:l,onEntryFocus:d,preventScrollOnEntryFocus:u=!1,...m}=e,h=f.useRef(null),p=ce(t,h),g=zr(a),[x,v]=Ct({prop:i,defaultProp:c??null,onChange:l,caller:Ur}),[y,b]=f.useState(!1),w=Lr(d),C=Wd(n),S=f.useRef(!1),[N,j]=f.useState(0);return f.useEffect(()=>{const k=h.current;if(k)return k.addEventListener(Us,w),()=>k.removeEventListener(Us,w)},[w]),s.jsx(Ox,{scope:n,orientation:r,dir:g,loop:o,currentTabStopId:x,onItemFocus:f.useCallback(k=>v(k),[v]),onItemShiftTab:f.useCallback(()=>b(!0),[]),onFocusableItemAdd:f.useCallback(()=>j(k=>k+1),[]),onFocusableItemRemove:f.useCallback(()=>j(k=>k-1),[]),children:s.jsx(Q.div,{tabIndex:y||N===0?-1:0,"data-orientation":r,...m,ref:p,style:{outline:"none",...e.style},onMouseDown:Y(e.onMouseDown,()=>{S.current=!0}),onFocus:Y(e.onFocus,k=>{const D=!S.current;if(k.target===k.currentTarget&&D&&!y){const R=new CustomEvent(Us,Dx);if(k.currentTarget.dispatchEvent(R),!R.defaultPrevented){const O=C().filter(T=>T.focusable),L=O.find(T=>T.active),W=O.find(T=>T.id===x),E=[L,W,...O].filter(Boolean).map(T=>T.ref.current);Ud(E,u)}}S.current=!1}),onBlur:Y(e.onBlur,()=>b(!1))})})}),Hd="RovingFocusGroupItem",Yd=f.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:o=!1,tabStopId:a,children:i,...c}=e,l=$t(),d=a||l,u=Ix(Hd,n),m=u.currentTabStopId===d,h=Wd(n),{onFocusableItemAdd:p,onFocusableItemRemove:g,currentTabStopId:x}=u;return f.useEffect(()=>{if(r)return p(),()=>g()},[r,p,g]),s.jsx(xa.ItemSlot,{scope:n,id:d,focusable:r,active:o,children:s.jsx(Q.span,{tabIndex:m?0:-1,"data-orientation":u.orientation,...c,ref:t,onMouseDown:Y(e.onMouseDown,v=>{r?u.onItemFocus(d):v.preventDefault()}),onFocus:Y(e.onFocus,()=>u.onItemFocus(d)),onKeyDown:Y(e.onKeyDown,v=>{if(v.key==="Tab"&&v.shiftKey){u.onItemShiftTab();return}if(v.target!==v.currentTarget)return;const y=$x(v,u.orientation,u.dir);if(y!==void 0){if(v.metaKey||v.ctrlKey||v.altKey||v.shiftKey)return;v.preventDefault();let w=h().filter(C=>C.focusable).map(C=>C.ref.current);if(y==="last")w.reverse();else if(y==="prev"||y==="next"){y==="prev"&&w.reverse();const C=w.indexOf(v.currentTarget);w=u.loop?Lx(w,C+1):w.slice(C+1)}setTimeout(()=>Ud(w))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:x!=null}):i})})});Yd.displayName=Hd;var Ax={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function _x(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $x(e,t,n){const r=_x(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Ax[r]}function Ud(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function Lx(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var yi=zd,bi=Yd,va=["Enter"," "],Bx=["ArrowDown","PageUp","Home"],Vd=["ArrowUp","PageDown","End"],Fx=[...Bx,...Vd],Wx={ltr:[...va,"ArrowRight"],rtl:[...va,"ArrowLeft"]},zx={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Vr="Menu",[Mr,Hx,Yx]=oi(Vr),[Nn,Gd]=ze(Vr,[Yx,rn,Jn]),us=rn(),Kd=Jn(),[Ux,Sn]=Nn(Vr),[Vx,Gr]=Nn(Vr),qd=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:o,onOpenChange:a,modal:i=!0}=e,c=us(t),[l,d]=f.useState(null),u=f.useRef(!1),m=Lr(a),h=zr(o);return f.useEffect(()=>{const p=()=>{u.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>u.current=!1;return document.addEventListener("keydown",p,{capture:!0}),()=>{document.removeEventListener("keydown",p,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),s.jsx(vi,{...c,children:s.jsx(Ux,{scope:t,open:n,onOpenChange:m,content:l,onContentChange:d,children:s.jsx(Vx,{scope:t,onClose:f.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:u,dir:h,modal:i,children:r})})})};qd.displayName=Vr;var Gx="MenuAnchor",wi=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=us(n);return s.jsx(Yr,{...o,...r,ref:t})});wi.displayName=Gx;var Ci="MenuPortal",[Kx,Xd]=Nn(Ci,{forceMount:void 0}),Jd=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:o}=e,a=Sn(Ci,t);return s.jsx(Kx,{scope:t,forceMount:n,children:s.jsx(rt,{present:n||a.open,children:s.jsx(Xo,{asChild:!0,container:o,children:r})})})};Jd.displayName=Ci;var tt="MenuContent",[qx,ji]=Nn(tt),Zd=f.forwardRef((e,t)=>{const n=Xd(tt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Sn(tt,e.__scopeMenu),i=Gr(tt,e.__scopeMenu);return s.jsx(Mr.Provider,{scope:e.__scopeMenu,children:s.jsx(rt,{present:r||a.open,children:s.jsx(Mr.Slot,{scope:e.__scopeMenu,children:i.modal?s.jsx(Xx,{...o,ref:t}):s.jsx(Jx,{...o,ref:t})})})})}),Xx=f.forwardRef((e,t)=>{const n=Sn(tt,e.__scopeMenu),r=f.useRef(null),o=ce(t,r);return f.useEffect(()=>{const a=r.current;if(a)return Qa(a)},[]),s.jsx(Ni,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:Y(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),Jx=f.forwardRef((e,t)=>{const n=Sn(tt,e.__scopeMenu);return s.jsx(Ni,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Zx=jr("MenuContent.ScrollLock"),Ni=f.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:o,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:c,onEntryFocus:l,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,disableOutsideScroll:g,...x}=e,v=Sn(tt,n),y=Gr(tt,n),b=us(n),w=Kd(n),C=Hx(n),[S,N]=f.useState(null),j=f.useRef(null),k=ce(t,j,v.onContentChange),D=f.useRef(0),R=f.useRef(""),O=f.useRef(0),L=f.useRef(null),W=f.useRef("right"),M=f.useRef(0),E=g?ti:f.Fragment,T=g?{as:Zx,allowPinchZoom:!0}:void 0,A=P=>{const B=R.current+P,K=C().filter(F=>!F.disabled),G=document.activeElement,ee=K.find(F=>F.ref.current===G)?.textValue,te=K.map(F=>F.textValue),le=dv(te,B,ee),ie=K.find(F=>F.textValue===le)?.ref.current;(function F(Z){R.current=Z,window.clearTimeout(D.current),Z!==""&&(D.current=window.setTimeout(()=>F(""),1e3))})(B),ie&&setTimeout(()=>ie.focus())};f.useEffect(()=>()=>window.clearTimeout(D.current),[]),ei();const I=f.useCallback(P=>W.current===L.current?.side&&fv(P,L.current?.area),[]);return s.jsx(qx,{scope:n,searchRef:R,onItemEnter:f.useCallback(P=>{I(P)&&P.preventDefault()},[I]),onItemLeave:f.useCallback(P=>{I(P)||(j.current?.focus(),N(null))},[I]),onTriggerLeave:f.useCallback(P=>{I(P)&&P.preventDefault()},[I]),pointerGraceTimerRef:O,onPointerGraceIntentChange:f.useCallback(P=>{L.current=P},[]),children:s.jsx(E,{...T,children:s.jsx(ni,{asChild:!0,trapped:o,onMountAutoFocus:Y(a,P=>{P.preventDefault(),j.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:s.jsx(Jo,{asChild:!0,disableOutsidePointerEvents:c,onEscapeKeyDown:d,onPointerDownOutside:u,onFocusOutside:m,onInteractOutside:h,onDismiss:p,children:s.jsx(yi,{asChild:!0,...w,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:S,onCurrentTabStopIdChange:N,onEntryFocus:Y(l,P=>{y.isUsingKeyboardRef.current||P.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(ls,{role:"menu","aria-orientation":"vertical","data-state":hu(v.open),"data-radix-menu-content":"",dir:y.dir,...b,...x,ref:k,style:{outline:"none",...x.style},onKeyDown:Y(x.onKeyDown,P=>{const K=P.target.closest("[data-radix-menu-content]")===P.currentTarget,G=P.ctrlKey||P.altKey||P.metaKey,ee=P.key.length===1;K&&(P.key==="Tab"&&P.preventDefault(),!G&&ee&&A(P.key));const te=j.current;if(P.target!==te||!Fx.includes(P.key))return;P.preventDefault();const ie=C().filter(F=>!F.disabled).map(F=>F.ref.current);Vd.includes(P.key)&&ie.reverse(),cv(ie)}),onBlur:Y(e.onBlur,P=>{P.currentTarget.contains(P.target)||(window.clearTimeout(D.current),R.current="")}),onPointerMove:Y(e.onPointerMove,Er(P=>{const B=P.target,K=M.current!==P.clientX;if(P.currentTarget.contains(B)&&K){const G=P.clientX>M.current?"right":"left";W.current=G,M.current=P.clientX}}))})})})})})})});Zd.displayName=tt;var Qx="MenuGroup",Si=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Q.div,{role:"group",...r,ref:t})});Si.displayName=Qx;var ev="MenuLabel",Qd=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Q.div,{...r,ref:t})});Qd.displayName=ev;var Io="MenuItem",Tc="menu.itemSelect",fs=f.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...o}=e,a=f.useRef(null),i=Gr(Io,e.__scopeMenu),c=ji(Io,e.__scopeMenu),l=ce(t,a),d=f.useRef(!1),u=()=>{const m=a.current;if(!n&&m){const h=new CustomEvent(Tc,{bubbles:!0,cancelable:!0});m.addEventListener(Tc,p=>r?.(p),{once:!0}),gp(m,h),h.defaultPrevented?d.current=!1:i.onClose()}};return s.jsx(eu,{...o,ref:l,disabled:n,onClick:Y(e.onClick,u),onPointerDown:m=>{e.onPointerDown?.(m),d.current=!0},onPointerUp:Y(e.onPointerUp,m=>{d.current||m.currentTarget?.click()}),onKeyDown:Y(e.onKeyDown,m=>{const h=c.searchRef.current!=="";n||h&&m.key===" "||va.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});fs.displayName=Io;var eu=f.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:o,...a}=e,i=ji(Io,n),c=Kd(n),l=f.useRef(null),d=ce(t,l),[u,m]=f.useState(!1),[h,p]=f.useState("");return f.useEffect(()=>{const g=l.current;g&&p((g.textContent??"").trim())},[a.children]),s.jsx(Mr.ItemSlot,{scope:n,disabled:r,textValue:o??h,children:s.jsx(bi,{asChild:!0,...c,focusable:!r,children:s.jsx(Q.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:d,onPointerMove:Y(e.onPointerMove,Er(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Y(e.onPointerLeave,Er(g=>i.onItemLeave(g))),onFocus:Y(e.onFocus,()=>m(!0)),onBlur:Y(e.onBlur,()=>m(!1))})})})}),tv="MenuCheckboxItem",tu=f.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...o}=e;return s.jsx(au,{scope:e.__scopeMenu,checked:n,children:s.jsx(fs,{role:"menuitemcheckbox","aria-checked":Po(n)?"mixed":n,...o,ref:t,"data-state":Mi(n),onSelect:Y(o.onSelect,()=>r?.(Po(n)?!0:!n),{checkForDefaultPrevented:!1})})})});tu.displayName=tv;var nu="MenuRadioGroup",[nv,rv]=Nn(nu,{value:void 0,onValueChange:()=>{}}),ru=f.forwardRef((e,t)=>{const{value:n,onValueChange:r,...o}=e,a=Lr(r);return s.jsx(nv,{scope:e.__scopeMenu,value:n,onValueChange:a,children:s.jsx(Si,{...o,ref:t})})});ru.displayName=nu;var ou="MenuRadioItem",su=f.forwardRef((e,t)=>{const{value:n,...r}=e,o=rv(ou,e.__scopeMenu),a=n===o.value;return s.jsx(au,{scope:e.__scopeMenu,checked:a,children:s.jsx(fs,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":Mi(a),onSelect:Y(r.onSelect,()=>o.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});su.displayName=ou;var ki="MenuItemIndicator",[au,ov]=Nn(ki,{checked:!1}),iu=f.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...o}=e,a=ov(ki,n);return s.jsx(rt,{present:r||Po(a.checked)||a.checked===!0,children:s.jsx(Q.span,{...o,ref:t,"data-state":Mi(a.checked)})})});iu.displayName=ki;var sv="MenuSeparator",cu=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return s.jsx(Q.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});cu.displayName=sv;var av="MenuArrow",lu=f.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,o=us(n);return s.jsx(ds,{...o,...r,ref:t})});lu.displayName=av;var iv="MenuSub",[ND,du]=Nn(iv),pr="MenuSubTrigger",uu=f.forwardRef((e,t)=>{const n=Sn(pr,e.__scopeMenu),r=Gr(pr,e.__scopeMenu),o=du(pr,e.__scopeMenu),a=ji(pr,e.__scopeMenu),i=f.useRef(null),{pointerGraceTimerRef:c,onPointerGraceIntentChange:l}=a,d={__scopeMenu:e.__scopeMenu},u=f.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return f.useEffect(()=>u,[u]),f.useEffect(()=>{const m=c.current;return()=>{window.clearTimeout(m),l(null)}},[c,l]),s.jsx(wi,{asChild:!0,...d,children:s.jsx(eu,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":o.contentId,"data-state":hu(n.open),...e,ref:ed(t,o.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:Y(e.onPointerMove,Er(m=>{a.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),u()},100))})),onPointerLeave:Y(e.onPointerLeave,Er(m=>{u();const h=n.content?.getBoundingClientRect();if(h){const p=n.content?.dataset.side,g=p==="right",x=g?-5:5,v=h[g?"left":"right"],y=h[g?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+x,y:m.clientY},{x:v,y:h.top},{x:y,y:h.top},{x:y,y:h.bottom},{x:v,y:h.bottom}],side:p}),window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:Y(e.onKeyDown,m=>{const h=a.searchRef.current!=="";e.disabled||h&&m.key===" "||Wx[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});uu.displayName=pr;var fu="MenuSubContent",mu=f.forwardRef((e,t)=>{const n=Xd(tt,e.__scopeMenu),{forceMount:r=n.forceMount,...o}=e,a=Sn(tt,e.__scopeMenu),i=Gr(tt,e.__scopeMenu),c=du(fu,e.__scopeMenu),l=f.useRef(null),d=ce(t,l);return s.jsx(Mr.Provider,{scope:e.__scopeMenu,children:s.jsx(rt,{present:r||a.open,children:s.jsx(Mr.Slot,{scope:e.__scopeMenu,children:s.jsx(Ni,{id:c.contentId,"aria-labelledby":c.triggerId,...o,ref:d,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{i.isUsingKeyboardRef.current&&l.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:Y(e.onFocusOutside,u=>{u.target!==c.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:Y(e.onEscapeKeyDown,u=>{i.onClose(),u.preventDefault()}),onKeyDown:Y(e.onKeyDown,u=>{const m=u.currentTarget.contains(u.target),h=zx[i.dir].includes(u.key);m&&h&&(a.onOpenChange(!1),c.trigger?.focus(),u.preventDefault())})})})})})});mu.displayName=fu;function hu(e){return e?"open":"closed"}function Po(e){return e==="indeterminate"}function Mi(e){return Po(e)?"indeterminate":e?"checked":"unchecked"}function cv(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function lv(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function dv(e,t,n){const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=lv(e,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==n));const l=i.find(d=>d.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function uv(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const c=t[a],l=t[i],d=c.x,u=c.y,m=l.x,h=l.y;u>r!=h>r&&n<(m-d)*(r-u)/(h-u)+d&&(o=!o)}return o}function fv(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return uv(n,t)}function Er(e){return t=>t.pointerType==="mouse"?e(t):void 0}var mv=qd,hv=wi,pv=Jd,gv=Zd,xv=Si,vv=Qd,yv=fs,bv=tu,wv=ru,Cv=su,jv=iu,Nv=cu,Sv=lu,kv=uu,Mv=mu,ms="DropdownMenu",[Ev,SD]=ze(ms,[Gd]),$e=Gd(),[Dv,pu]=Ev(ms),gu=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:o,defaultOpen:a,onOpenChange:i,modal:c=!0}=e,l=$e(t),d=f.useRef(null),[u,m]=Ct({prop:o,defaultProp:a??!1,onChange:i,caller:ms});return s.jsx(Dv,{scope:t,triggerId:$t(),triggerRef:d,contentId:$t(),open:u,onOpenChange:m,onOpenToggle:f.useCallback(()=>m(h=>!h),[m]),modal:c,children:s.jsx(mv,{...l,open:u,onOpenChange:m,dir:r,modal:c,children:n})})};gu.displayName=ms;var xu="DropdownMenuTrigger",vu=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...o}=e,a=pu(xu,n),i=$e(n);return s.jsx(hv,{asChild:!0,...i,children:s.jsx(Q.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...o,ref:ed(t,a.triggerRef),onPointerDown:Y(e.onPointerDown,c=>{!r&&c.button===0&&c.ctrlKey===!1&&(a.onOpenToggle(),a.open||c.preventDefault())}),onKeyDown:Y(e.onKeyDown,c=>{r||(["Enter"," "].includes(c.key)&&a.onOpenToggle(),c.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(c.key)&&c.preventDefault())})})})});vu.displayName=xu;var Rv="DropdownMenuPortal",yu=e=>{const{__scopeDropdownMenu:t,...n}=e,r=$e(t);return s.jsx(pv,{...r,...n})};yu.displayName=Rv;var bu="DropdownMenuContent",wu=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=pu(bu,n),a=$e(n),i=f.useRef(!1);return s.jsx(gv,{id:o.contentId,"aria-labelledby":o.triggerId,...a,...r,ref:t,onCloseAutoFocus:Y(e.onCloseAutoFocus,c=>{i.current||o.triggerRef.current?.focus(),i.current=!1,c.preventDefault()}),onInteractOutside:Y(e.onInteractOutside,c=>{const l=c.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,u=l.button===2||d;(!o.modal||u)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});wu.displayName=bu;var Tv="DropdownMenuGroup",Ov=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(xv,{...o,...r,ref:t})});Ov.displayName=Tv;var Iv="DropdownMenuLabel",Cu=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(vv,{...o,...r,ref:t})});Cu.displayName=Iv;var Pv="DropdownMenuItem",ju=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(yv,{...o,...r,ref:t})});ju.displayName=Pv;var Av="DropdownMenuCheckboxItem",Nu=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(bv,{...o,...r,ref:t})});Nu.displayName=Av;var _v="DropdownMenuRadioGroup",$v=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(wv,{...o,...r,ref:t})});$v.displayName=_v;var Lv="DropdownMenuRadioItem",Su=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(Cv,{...o,...r,ref:t})});Su.displayName=Lv;var Bv="DropdownMenuItemIndicator",ku=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(jv,{...o,...r,ref:t})});ku.displayName=Bv;var Fv="DropdownMenuSeparator",Mu=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(Nv,{...o,...r,ref:t})});Mu.displayName=Fv;var Wv="DropdownMenuArrow",zv=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(Sv,{...o,...r,ref:t})});zv.displayName=Wv;var Hv="DropdownMenuSubTrigger",Eu=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(kv,{...o,...r,ref:t})});Eu.displayName=Hv;var Yv="DropdownMenuSubContent",Du=f.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,o=$e(n);return s.jsx(Mv,{...o,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Du.displayName=Yv;var Uv=gu,Vv=vu,Ru=yu,Tu=wu,Ou=Cu,Iu=ju,Pu=Nu,Au=Su,_u=ku,$u=Mu,Lu=Eu,Bu=Du;function Oc(e,[t,n]){return Math.min(n,Math.max(t,e))}var hs="Popover",[Fu,kD]=ze(hs,[rn]),Kr=rn(),[Gv,on]=Fu(hs),Wu=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:o,onOpenChange:a,modal:i=!1}=e,c=Kr(t),l=f.useRef(null),[d,u]=f.useState(!1),[m,h]=Ct({prop:r,defaultProp:o??!1,onChange:a,caller:hs});return s.jsx(vi,{...c,children:s.jsx(Gv,{scope:t,contentId:$t(),triggerRef:l,open:m,onOpenChange:h,onOpenToggle:f.useCallback(()=>h(p=>!p),[h]),hasCustomAnchor:d,onCustomAnchorAdd:f.useCallback(()=>u(!0),[]),onCustomAnchorRemove:f.useCallback(()=>u(!1),[]),modal:i,children:n})})};Wu.displayName=hs;var zu="PopoverAnchor",Kv=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=on(zu,n),a=Kr(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:c}=o;return f.useEffect(()=>(i(),()=>c()),[i,c]),s.jsx(Yr,{...a,...r,ref:t})});Kv.displayName=zu;var Hu="PopoverTrigger",Yu=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=on(Hu,n),a=Kr(n),i=ce(t,o.triggerRef),c=s.jsx(Q.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Xu(o.open),...r,ref:i,onClick:Y(e.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:s.jsx(Yr,{asChild:!0,...a,children:c})});Yu.displayName=Hu;var Ei="PopoverPortal",[qv,Xv]=Fu(Ei,{forceMount:void 0}),Uu=e=>{const{__scopePopover:t,forceMount:n,children:r,container:o}=e,a=on(Ei,t);return s.jsx(qv,{scope:t,forceMount:n,children:s.jsx(rt,{present:n||a.open,children:s.jsx(Xo,{asChild:!0,container:o,children:r})})})};Uu.displayName=Ei;var Hn="PopoverContent",Vu=f.forwardRef((e,t)=>{const n=Xv(Hn,e.__scopePopover),{forceMount:r=n.forceMount,...o}=e,a=on(Hn,e.__scopePopover);return s.jsx(rt,{present:r||a.open,children:a.modal?s.jsx(Zv,{...o,ref:t}):s.jsx(Qv,{...o,ref:t})})});Vu.displayName=Hn;var Jv=jr("PopoverContent.RemoveScroll"),Zv=f.forwardRef((e,t)=>{const n=on(Hn,e.__scopePopover),r=f.useRef(null),o=ce(t,r),a=f.useRef(!1);return f.useEffect(()=>{const i=r.current;if(i)return Qa(i)},[]),s.jsx(ti,{as:Jv,allowPinchZoom:!0,children:s.jsx(Gu,{...e,ref:o,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Y(e.onCloseAutoFocus,i=>{i.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:Y(e.onPointerDownOutside,i=>{const c=i.detail.originalEvent,l=c.button===0&&c.ctrlKey===!0,d=c.button===2||l;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:Y(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),Qv=f.forwardRef((e,t)=>{const n=on(Hn,e.__scopePopover),r=f.useRef(!1),o=f.useRef(!1);return s.jsx(Gu,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),Gu=f.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onInteractOutside:u,...m}=e,h=on(Hn,n),p=Kr(n);return ei(),s.jsx(ni,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:s.jsx(Jo,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:u,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:d,onDismiss:()=>h.onOpenChange(!1),children:s.jsx(ls,{"data-state":Xu(h.open),role:"dialog",id:h.contentId,...p,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Ku="PopoverClose",ey=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=on(Ku,n);return s.jsx(Q.button,{type:"button",...r,ref:t,onClick:Y(e.onClick,()=>o.onOpenChange(!1))})});ey.displayName=Ku;var ty="PopoverArrow",qu=f.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,o=Kr(n);return s.jsx(ds,{...o,...r,ref:t})});qu.displayName=ty;function Xu(e){return e?"open":"closed"}var ny=Wu,ry=Yu,oy=Uu,Ju=Vu,Di="Radio",[sy,Zu]=ze(Di),[ay,iy]=sy(Di),Qu=f.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:o=!1,required:a,disabled:i,value:c="on",onCheck:l,form:d,...u}=e,[m,h]=f.useState(null),p=ce(t,v=>h(v)),g=f.useRef(!1),x=m?d||!!m.closest("form"):!0;return s.jsxs(ay,{scope:n,checked:o,disabled:i,children:[s.jsx(Q.button,{type:"button",role:"radio","aria-checked":o,"data-state":rf(o),"data-disabled":i?"":void 0,disabled:i,value:c,...u,ref:p,onClick:Y(e.onClick,v=>{o||l?.(),x&&(g.current=v.isPropagationStopped(),g.current||v.stopPropagation())})}),x&&s.jsx(nf,{control:m,bubbles:!g.current,name:r,value:c,checked:o,required:a,disabled:i,form:d,style:{transform:"translateX(-100%)"}})]})});Qu.displayName=Di;var ef="RadioIndicator",tf=f.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...o}=e,a=iy(ef,n);return s.jsx(rt,{present:r||a.checked,children:s.jsx(Q.span,{"data-state":rf(a.checked),"data-disabled":a.disabled?"":void 0,...o,ref:t})})});tf.displayName=ef;var cy="RadioBubbleInput",nf=f.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...o},a)=>{const i=f.useRef(null),c=ce(i,a),l=ns(n),d=rs(t);return f.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(g)}},[l,n,r]),s.jsx(Q.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:c,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nf.displayName=cy;function rf(e){return e?"checked":"unchecked"}var ly=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ps="RadioGroup",[dy,MD]=ze(ps,[Jn,Zu]),of=Jn(),sf=Zu(),[uy,fy]=dy(ps),af=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:o,value:a,required:i=!1,disabled:c=!1,orientation:l,dir:d,loop:u=!0,onValueChange:m,...h}=e,p=of(n),g=zr(d),[x,v]=Ct({prop:a,defaultProp:o??null,onChange:m,caller:ps});return s.jsx(uy,{scope:n,name:r,required:i,disabled:c,value:x,onValueChange:v,children:s.jsx(yi,{asChild:!0,...p,orientation:l,dir:g,loop:u,children:s.jsx(Q.div,{role:"radiogroup","aria-required":i,"aria-orientation":l,"data-disabled":c?"":void 0,dir:g,...h,ref:t})})})});af.displayName=ps;var cf="RadioGroupItem",lf=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...o}=e,a=fy(cf,n),i=a.disabled||r,c=of(n),l=sf(n),d=f.useRef(null),u=ce(t,d),m=a.value===o.value,h=f.useRef(!1);return f.useEffect(()=>{const p=x=>{ly.includes(x.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",g)}},[]),s.jsx(bi,{asChild:!0,...c,focusable:!i,active:m,children:s.jsx(Qu,{disabled:i,required:a.required,checked:m,...l,...o,name:a.name,ref:u,onCheck:()=>a.onValueChange(o.value),onKeyDown:Y(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:Y(o.onFocus,()=>{h.current&&d.current?.click()})})})});lf.displayName=cf;var my="RadioGroupIndicator",df=f.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,o=sf(n);return s.jsx(tf,{...o,...r,ref:t})});df.displayName=my;var Ri=af,Ti=lf,uf=df,hy=[" ","Enter","ArrowUp","ArrowDown"],py=[" ","Enter"],vn="Select",[gs,xs,gy]=oi(vn),[Zn,ED]=ze(vn,[gy,rn]),vs=rn(),[xy,sn]=Zn(vn),[vy,yy]=Zn(vn),ff=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:o,onOpenChange:a,value:i,defaultValue:c,onValueChange:l,dir:d,name:u,autoComplete:m,disabled:h,required:p,form:g}=e,x=vs(t),[v,y]=f.useState(null),[b,w]=f.useState(null),[C,S]=f.useState(!1),N=zr(d),[j,k]=Ct({prop:r,defaultProp:o??!1,onChange:a,caller:vn}),[D,R]=Ct({prop:i,defaultProp:c,onChange:l,caller:vn}),O=f.useRef(null),L=v?g||!!v.closest("form"):!0,[W,M]=f.useState(new Set),E=Array.from(W).map(T=>T.props.value).join(";");return s.jsx(vi,{...x,children:s.jsxs(xy,{required:p,scope:t,trigger:v,onTriggerChange:y,valueNode:b,onValueNodeChange:w,valueNodeHasChildren:C,onValueNodeHasChildrenChange:S,contentId:$t(),value:D,onValueChange:R,open:j,onOpenChange:k,dir:N,triggerPointerDownPosRef:O,disabled:h,children:[s.jsx(gs.Provider,{scope:t,children:s.jsx(vy,{scope:e.__scopeSelect,onNativeOptionAdd:f.useCallback(T=>{M(A=>new Set(A).add(T))},[]),onNativeOptionRemove:f.useCallback(T=>{M(A=>{const I=new Set(A);return I.delete(T),I})},[]),children:n})}),L?s.jsxs(Tf,{"aria-hidden":!0,required:p,tabIndex:-1,name:u,autoComplete:m,value:D,onChange:T=>R(T.target.value),disabled:h,form:g,children:[D===void 0?s.jsx("option",{value:""}):null,Array.from(W)]},E):null]})})};ff.displayName=vn;var mf="SelectTrigger",hf=f.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...o}=e,a=vs(n),i=sn(mf,n),c=i.disabled||r,l=ce(t,i.onTriggerChange),d=xs(n),u=f.useRef("touch"),[m,h,p]=If(x=>{const v=d().filter(w=>!w.disabled),y=v.find(w=>w.value===i.value),b=Pf(v,x,y);b!==void 0&&i.onValueChange(b.value)}),g=x=>{c||(i.onOpenChange(!0),p()),x&&(i.triggerPointerDownPosRef.current={x:Math.round(x.pageX),y:Math.round(x.pageY)})};return s.jsx(Yr,{asChild:!0,...a,children:s.jsx(Q.button,{type:"button",role:"combobox","aria-controls":i.contentId,"aria-expanded":i.open,"aria-required":i.required,"aria-autocomplete":"none",dir:i.dir,"data-state":i.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Of(i.value)?"":void 0,...o,ref:l,onClick:Y(o.onClick,x=>{x.currentTarget.focus(),u.current!=="mouse"&&g(x)}),onPointerDown:Y(o.onPointerDown,x=>{u.current=x.pointerType;const v=x.target;v.hasPointerCapture(x.pointerId)&&v.releasePointerCapture(x.pointerId),x.button===0&&x.ctrlKey===!1&&x.pointerType==="mouse"&&(g(x),x.preventDefault())}),onKeyDown:Y(o.onKeyDown,x=>{const v=m.current!=="";!(x.ctrlKey||x.altKey||x.metaKey)&&x.key.length===1&&h(x.key),!(v&&x.key===" ")&&hy.includes(x.key)&&(g(),x.preventDefault())})})})});hf.displayName=mf;var pf="SelectValue",gf=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,children:a,placeholder:i="",...c}=e,l=sn(pf,n),{onValueNodeHasChildrenChange:d}=l,u=a!==void 0,m=ce(t,l.onValueNodeChange);return nt(()=>{d(u)},[d,u]),s.jsx(Q.span,{...c,ref:m,style:{pointerEvents:"none"},children:Of(l.value)?s.jsx(s.Fragment,{children:i}):a})});gf.displayName=pf;var by="SelectIcon",xf=f.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...o}=e;return s.jsx(Q.span,{"aria-hidden":!0,...o,ref:t,children:r||""})});xf.displayName=by;var wy="SelectPortal",Oi=e=>s.jsx(Xo,{asChild:!0,...e});Oi.displayName=wy;var yn="SelectContent",Ii=f.forwardRef((e,t)=>{const n=sn(yn,e.__scopeSelect),[r,o]=f.useState();if(nt(()=>{o(new DocumentFragment)},[]),!n.open){const a=r;return a?et.createPortal(s.jsx(vf,{scope:e.__scopeSelect,children:s.jsx(gs.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(yf,{...e,ref:t})});Ii.displayName=yn;var st=10,[vf,an]=Zn(yn),Cy="SelectContentImpl",jy=jr("SelectContent.RemoveScroll"),yf=f.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:i,side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:v,...y}=e,b=sn(yn,n),[w,C]=f.useState(null),[S,N]=f.useState(null),j=ce(t,F=>C(F)),[k,D]=f.useState(null),[R,O]=f.useState(null),L=xs(n),[W,M]=f.useState(!1),E=f.useRef(!1);f.useEffect(()=>{if(w)return Qa(w)},[w]),ei();const T=f.useCallback(F=>{const[Z,...ae]=L().map(se=>se.ref.current),[H]=ae.slice(-1),re=document.activeElement;for(const se of F)if(se===re||(se?.scrollIntoView({block:"nearest"}),se===Z&&S&&(S.scrollTop=0),se===H&&S&&(S.scrollTop=S.scrollHeight),se?.focus(),document.activeElement!==re))return},[L,S]),A=f.useCallback(()=>T([k,w]),[T,k,w]);f.useEffect(()=>{W&&A()},[W,A]);const{onOpenChange:I,triggerPointerDownPosRef:P}=b;f.useEffect(()=>{if(w){let F={x:0,y:0};const Z=H=>{F={x:Math.abs(Math.round(H.pageX)-(P.current?.x??0)),y:Math.abs(Math.round(H.pageY)-(P.current?.y??0))}},ae=H=>{F.x<=10&&F.y<=10?H.preventDefault():w.contains(H.target)||I(!1),document.removeEventListener("pointermove",Z),P.current=null};return P.current!==null&&(document.addEventListener("pointermove",Z),document.addEventListener("pointerup",ae,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",ae,{capture:!0})}}},[w,I,P]),f.useEffect(()=>{const F=()=>I(!1);return window.addEventListener("blur",F),window.addEventListener("resize",F),()=>{window.removeEventListener("blur",F),window.removeEventListener("resize",F)}},[I]);const[B,K]=If(F=>{const Z=L().filter(re=>!re.disabled),ae=Z.find(re=>re.ref.current===document.activeElement),H=Pf(Z,F,ae);H&&setTimeout(()=>H.ref.current.focus())}),G=f.useCallback((F,Z,ae)=>{const H=!E.current&&!ae;(b.value!==void 0&&b.value===Z||H)&&(D(F),H&&(E.current=!0))},[b.value]),ee=f.useCallback(()=>w?.focus(),[w]),te=f.useCallback((F,Z,ae)=>{const H=!E.current&&!ae;(b.value!==void 0&&b.value===Z||H)&&O(F)},[b.value]),le=r==="popper"?ya:bf,ie=le===ya?{side:c,sideOffset:l,align:d,alignOffset:u,arrowPadding:m,collisionBoundary:h,collisionPadding:p,sticky:g,hideWhenDetached:x,avoidCollisions:v}:{};return s.jsx(vf,{scope:n,content:w,viewport:S,onViewportChange:N,itemRefCallback:G,selectedItem:k,onItemLeave:ee,itemTextRefCallback:te,focusSelectedItem:A,selectedItemText:R,position:r,isPositioned:W,searchRef:B,children:s.jsx(ti,{as:jy,allowPinchZoom:!0,children:s.jsx(ni,{asChild:!0,trapped:b.open,onMountAutoFocus:F=>{F.preventDefault()},onUnmountAutoFocus:Y(o,F=>{b.trigger?.focus({preventScroll:!0}),F.preventDefault()}),children:s.jsx(Jo,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:F=>F.preventDefault(),onDismiss:()=>b.onOpenChange(!1),children:s.jsx(le,{role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:F=>F.preventDefault(),...y,...ie,onPlaced:()=>M(!0),ref:j,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:Y(y.onKeyDown,F=>{const Z=F.ctrlKey||F.altKey||F.metaKey;if(F.key==="Tab"&&F.preventDefault(),!Z&&F.key.length===1&&K(F.key),["ArrowUp","ArrowDown","Home","End"].includes(F.key)){let H=L().filter(re=>!re.disabled).map(re=>re.ref.current);if(["ArrowUp","End"].includes(F.key)&&(H=H.slice().reverse()),["ArrowUp","ArrowDown"].includes(F.key)){const re=F.target,se=H.indexOf(re);H=H.slice(se+1)}setTimeout(()=>T(H)),F.preventDefault()}})})})})})})});yf.displayName=Cy;var Ny="SelectItemAlignedPosition",bf=f.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...o}=e,a=sn(yn,n),i=an(yn,n),[c,l]=f.useState(null),[d,u]=f.useState(null),m=ce(t,j=>u(j)),h=xs(n),p=f.useRef(!1),g=f.useRef(!0),{viewport:x,selectedItem:v,selectedItemText:y,focusSelectedItem:b}=i,w=f.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&d&&x&&v&&y){const j=a.trigger.getBoundingClientRect(),k=d.getBoundingClientRect(),D=a.valueNode.getBoundingClientRect(),R=y.getBoundingClientRect();if(a.dir!=="rtl"){const re=R.left-k.left,se=D.left-re,pe=j.left-se,Se=j.width+pe,qe=Math.max(Se,k.width),Xe=window.innerWidth-st,Ht=Oc(se,[st,Math.max(st,Xe-qe)]);c.style.minWidth=Se+"px",c.style.left=Ht+"px"}else{const re=k.right-R.right,se=window.innerWidth-D.right-re,pe=window.innerWidth-j.right-se,Se=j.width+pe,qe=Math.max(Se,k.width),Xe=window.innerWidth-st,Ht=Oc(se,[st,Math.max(st,Xe-qe)]);c.style.minWidth=Se+"px",c.style.right=Ht+"px"}const O=h(),L=window.innerHeight-st*2,W=x.scrollHeight,M=window.getComputedStyle(d),E=parseInt(M.borderTopWidth,10),T=parseInt(M.paddingTop,10),A=parseInt(M.borderBottomWidth,10),I=parseInt(M.paddingBottom,10),P=E+T+W+I+A,B=Math.min(v.offsetHeight*5,P),K=window.getComputedStyle(x),G=parseInt(K.paddingTop,10),ee=parseInt(K.paddingBottom,10),te=j.top+j.height/2-st,le=L-te,ie=v.offsetHeight/2,F=v.offsetTop+ie,Z=E+T+F,ae=P-Z;if(Z<=te){const re=O.length>0&&v===O[O.length-1].ref.current;c.style.bottom="0px";const se=d.clientHeight-x.offsetTop-x.offsetHeight,pe=Math.max(le,ie+(re?ee:0)+se+A),Se=Z+pe;c.style.height=Se+"px"}else{const re=O.length>0&&v===O[0].ref.current;c.style.top="0px";const pe=Math.max(te,E+x.offsetTop+(re?G:0)+ie)+ae;c.style.height=pe+"px",x.scrollTop=Z-te+x.offsetTop}c.style.margin=`${st}px 0`,c.style.minHeight=B+"px",c.style.maxHeight=L+"px",r?.(),requestAnimationFrame(()=>p.current=!0)}},[h,a.trigger,a.valueNode,c,d,x,v,y,a.dir,r]);nt(()=>w(),[w]);const[C,S]=f.useState();nt(()=>{d&&S(window.getComputedStyle(d).zIndex)},[d]);const N=f.useCallback(j=>{j&&g.current===!0&&(w(),b?.(),g.current=!1)},[w,b]);return s.jsx(ky,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:p,onScrollButtonChange:N,children:s.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(Q.div,{...o,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});bf.displayName=Ny;var Sy="SelectPopperPosition",ya=f.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:o=st,...a}=e,i=vs(n);return s.jsx(ls,{...i,...a,ref:t,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});ya.displayName=Sy;var[ky,Pi]=Zn(yn,{}),ba="SelectViewport",Ai=f.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...o}=e,a=an(ba,n),i=Pi(ba,n),c=ce(t,a.onViewportChange),l=f.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),s.jsx(gs.Slot,{scope:n,children:s.jsx(Q.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Y(o.onScroll,d=>{const u=d.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:h}=i;if(h?.current&&m){const p=Math.abs(l.current-u.scrollTop);if(p>0){const g=window.innerHeight-st*2,x=parseFloat(m.style.minHeight),v=parseFloat(m.style.height),y=Math.max(x,v);if(y<g){const b=y+p,w=Math.min(g,b),C=b-w;m.style.height=w+"px",m.style.bottom==="0px"&&(u.scrollTop=C>0?C:0,m.style.justifyContent="flex-end")}}}l.current=u.scrollTop})})})]})});Ai.displayName=ba;var wf="SelectGroup",[My,Ey]=Zn(wf),Dy=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=$t();return s.jsx(My,{scope:n,id:o,children:s.jsx(Q.div,{role:"group","aria-labelledby":o,...r,ref:t})})});Dy.displayName=wf;var Cf="SelectLabel",Ry=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=Ey(Cf,n);return s.jsx(Q.div,{id:o.id,...r,ref:t})});Ry.displayName=Cf;var Ao="SelectItem",[Ty,jf]=Zn(Ao),Nf=f.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:o=!1,textValue:a,...i}=e,c=sn(Ao,n),l=an(Ao,n),d=c.value===r,[u,m]=f.useState(a??""),[h,p]=f.useState(!1),g=ce(t,b=>l.itemRefCallback?.(b,r,o)),x=$t(),v=f.useRef("touch"),y=()=>{o||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Ty,{scope:n,value:r,disabled:o,textId:x,isSelected:d,onItemTextChange:f.useCallback(b=>{m(w=>w||(b?.textContent??"").trim())},[]),children:s.jsx(gs.ItemSlot,{scope:n,value:r,disabled:o,textValue:u,children:s.jsx(Q.div,{role:"option","aria-labelledby":x,"data-highlighted":h?"":void 0,"aria-selected":d&&h,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...i,ref:g,onFocus:Y(i.onFocus,()=>p(!0)),onBlur:Y(i.onBlur,()=>p(!1)),onClick:Y(i.onClick,()=>{v.current!=="mouse"&&y()}),onPointerUp:Y(i.onPointerUp,()=>{v.current==="mouse"&&y()}),onPointerDown:Y(i.onPointerDown,b=>{v.current=b.pointerType}),onPointerMove:Y(i.onPointerMove,b=>{v.current=b.pointerType,o?l.onItemLeave?.():v.current==="mouse"&&b.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Y(i.onPointerLeave,b=>{b.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:Y(i.onKeyDown,b=>{l.searchRef?.current!==""&&b.key===" "||(py.includes(b.key)&&y(),b.key===" "&&b.preventDefault())})})})})});Nf.displayName=Ao;var gr="SelectItemText",Sf=f.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:o,...a}=e,i=sn(gr,n),c=an(gr,n),l=jf(gr,n),d=yy(gr,n),[u,m]=f.useState(null),h=ce(t,y=>m(y),l.onItemTextChange,y=>c.itemTextRefCallback?.(y,l.value,l.disabled)),p=u?.textContent,g=f.useMemo(()=>s.jsx("option",{value:l.value,disabled:l.disabled,children:p},l.value),[l.disabled,l.value,p]),{onNativeOptionAdd:x,onNativeOptionRemove:v}=d;return nt(()=>(x(g),()=>v(g)),[x,v,g]),s.jsxs(s.Fragment,{children:[s.jsx(Q.span,{id:l.textId,...a,ref:h}),l.isSelected&&i.valueNode&&!i.valueNodeHasChildren?et.createPortal(a.children,i.valueNode):null]})});Sf.displayName=gr;var kf="SelectItemIndicator",Mf=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return jf(kf,n).isSelected?s.jsx(Q.span,{"aria-hidden":!0,...r,ref:t}):null});Mf.displayName=kf;var wa="SelectScrollUpButton",Ef=f.forwardRef((e,t)=>{const n=an(wa,e.__scopeSelect),r=Pi(wa,e.__scopeSelect),[o,a]=f.useState(!1),i=ce(t,r.onScrollButtonChange);return nt(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollTop>0;a(d)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),o?s.jsx(Rf,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop-l.offsetHeight)}}):null});Ef.displayName=wa;var Ca="SelectScrollDownButton",Df=f.forwardRef((e,t)=>{const n=an(Ca,e.__scopeSelect),r=Pi(Ca,e.__scopeSelect),[o,a]=f.useState(!1),i=ce(t,r.onScrollButtonChange);return nt(()=>{if(n.viewport&&n.isPositioned){let c=function(){const d=l.scrollHeight-l.clientHeight,u=Math.ceil(l.scrollTop)<d;a(u)};const l=n.viewport;return c(),l.addEventListener("scroll",c),()=>l.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),o?s.jsx(Rf,{...e,ref:i,onAutoScroll:()=>{const{viewport:c,selectedItem:l}=n;c&&l&&(c.scrollTop=c.scrollTop+l.offsetHeight)}}):null});Df.displayName=Ca;var Rf=f.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...o}=e,a=an("SelectScrollButton",n),i=f.useRef(null),c=xs(n),l=f.useCallback(()=>{i.current!==null&&(window.clearInterval(i.current),i.current=null)},[]);return f.useEffect(()=>()=>l(),[l]),nt(()=>{c().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),s.jsx(Q.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:Y(o.onPointerDown,()=>{i.current===null&&(i.current=window.setInterval(r,50))}),onPointerMove:Y(o.onPointerMove,()=>{a.onItemLeave?.(),i.current===null&&(i.current=window.setInterval(r,50))}),onPointerLeave:Y(o.onPointerLeave,()=>{l()})})}),Oy="SelectSeparator",Iy=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return s.jsx(Q.div,{"aria-hidden":!0,...r,ref:t})});Iy.displayName=Oy;var ja="SelectArrow",Py=f.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,o=vs(n),a=sn(ja,n),i=an(ja,n);return a.open&&i.position==="popper"?s.jsx(ds,{...o,...r,ref:t}):null});Py.displayName=ja;var Ay="SelectBubbleInput",Tf=f.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const o=f.useRef(null),a=ce(r,o),i=ns(t);return f.useEffect(()=>{const c=o.current;if(!c)return;const l=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(i!==t&&u){const m=new Event("change",{bubbles:!0});u.call(c,t),c.dispatchEvent(m)}},[i,t]),s.jsx(Q.select,{...n,style:{...xp,...n.style},ref:a,defaultValue:t})});Tf.displayName=Ay;function Of(e){return e===""||e===void 0}function If(e){const t=Lr(e),n=f.useRef(""),r=f.useRef(0),o=f.useCallback(i=>{const c=n.current+i;t(c),(function l(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>l(""),1e3))})(c)},[t]),a=f.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return f.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,o,a]}function Pf(e,t,n){const o=t.length>1&&Array.from(t).every(d=>d===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=_y(e,Math.max(a,0));o.length===1&&(i=i.filter(d=>d!==n));const l=i.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return l!==n?l:void 0}function _y(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var $y=ff,Ly=hf,By=gf,Fy=xf,Wy=Oi,zy=Ii,Hy=Ai,Yy=Nf,Uy=Sf,Vy=Mf,Gy=Ef,Ky=Df,ys="Switch",[qy,DD]=ze(ys),[Xy,Jy]=qy(ys),Af=f.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:o,defaultChecked:a,required:i,disabled:c,value:l="on",onCheckedChange:d,form:u,...m}=e,[h,p]=f.useState(null),g=ce(t,w=>p(w)),x=f.useRef(!1),v=h?u||!!h.closest("form"):!0,[y,b]=Ct({prop:o,defaultProp:a??!1,onChange:d,caller:ys});return s.jsxs(Xy,{scope:n,checked:y,disabled:c,children:[s.jsx(Q.button,{type:"button",role:"switch","aria-checked":y,"aria-required":i,"data-state":Bf(y),"data-disabled":c?"":void 0,disabled:c,value:l,...m,ref:g,onClick:Y(e.onClick,w=>{b(C=>!C),v&&(x.current=w.isPropagationStopped(),x.current||w.stopPropagation())})}),v&&s.jsx(Lf,{control:h,bubbles:!x.current,name:r,value:l,checked:y,required:i,disabled:c,form:u,style:{transform:"translateX(-100%)"}})]})});Af.displayName=ys;var _f="SwitchThumb",$f=f.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,o=Jy(_f,n);return s.jsx(Q.span,{"data-state":Bf(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:t})});$f.displayName=_f;var Zy="SwitchBubbleInput",Lf=f.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...o},a)=>{const i=f.useRef(null),c=ce(i,a),l=ns(n),d=rs(t);return f.useEffect(()=>{const u=i.current;if(!u)return;const m=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(m,"checked").set;if(l!==n&&p){const g=new Event("click",{bubbles:r});p.call(u,n),u.dispatchEvent(g)}},[l,n,r]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...o,tabIndex:-1,ref:c,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Lf.displayName=Zy;function Bf(e){return e?"checked":"unchecked"}var _i=Af,Ff=$f,bs="Tabs",[Qy,RD]=ze(bs,[Jn]),Wf=Jn(),[eb,$i]=Qy(bs),zf=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:o,defaultValue:a,orientation:i="horizontal",dir:c,activationMode:l="automatic",...d}=e,u=zr(c),[m,h]=Ct({prop:r,onChange:o,defaultProp:a??"",caller:bs});return s.jsx(eb,{scope:n,baseId:$t(),value:m,onValueChange:h,orientation:i,dir:u,activationMode:l,children:s.jsx(Q.div,{dir:u,"data-orientation":i,...d,ref:t})})});zf.displayName=bs;var Hf="TabsList",Yf=f.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...o}=e,a=$i(Hf,n),i=Wf(n);return s.jsx(yi,{asChild:!0,...i,orientation:a.orientation,dir:a.dir,loop:r,children:s.jsx(Q.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:t})})});Yf.displayName=Hf;var Uf="TabsTrigger",Vf=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:o=!1,...a}=e,i=$i(Uf,n),c=Wf(n),l=qf(i.baseId,r),d=Xf(i.baseId,r),u=r===i.value;return s.jsx(bi,{asChild:!0,...c,focusable:!o,active:u,children:s.jsx(Q.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":d,"data-state":u?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:l,...a,ref:t,onMouseDown:Y(e.onMouseDown,m=>{!o&&m.button===0&&m.ctrlKey===!1?i.onValueChange(r):m.preventDefault()}),onKeyDown:Y(e.onKeyDown,m=>{[" ","Enter"].includes(m.key)&&i.onValueChange(r)}),onFocus:Y(e.onFocus,()=>{const m=i.activationMode!=="manual";!u&&!o&&m&&i.onValueChange(r)})})})});Vf.displayName=Uf;var Gf="TabsContent",Kf=f.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:o,children:a,...i}=e,c=$i(Gf,n),l=qf(c.baseId,r),d=Xf(c.baseId,r),u=r===c.value,m=f.useRef(u);return f.useEffect(()=>{const h=requestAnimationFrame(()=>m.current=!1);return()=>cancelAnimationFrame(h)},[]),s.jsx(rt,{present:o||u,children:({present:h})=>s.jsx(Q.div,{"data-state":u?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:d,tabIndex:0,...i,ref:t,style:{...e.style,animationDuration:m.current?"0s":void 0},children:h&&a})})});Kf.displayName=Gf;function qf(e,t){return`${e}-trigger-${t}`}function Xf(e,t){return`${e}-content-${t}`}var tb=zf,Jf=Yf,Zf=Vf,Qf=Kf,[ws,TD]=ze("Tooltip",[rn]),Li=rn(),em="TooltipProvider",nb=700,Ic="tooltip.open",[rb,tm]=ws(em),nm=e=>{const{__scopeTooltip:t,delayDuration:n=nb,skipDelayDuration:r=300,disableHoverableContent:o=!1,children:a}=e,i=f.useRef(!0),c=f.useRef(!1),l=f.useRef(0);return f.useEffect(()=>{const d=l.current;return()=>window.clearTimeout(d)},[]),s.jsx(rb,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:f.useCallback(()=>{window.clearTimeout(l.current),i.current=!1},[]),onClose:f.useCallback(()=>{window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:f.useCallback(d=>{c.current=d},[]),disableHoverableContent:o,children:a})};nm.displayName=em;var rm="Tooltip",[OD,qr]=ws(rm),Na="TooltipTrigger",ob=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=qr(Na,n),a=tm(Na,n),i=Li(n),c=f.useRef(null),l=ce(t,c,o.onTriggerChange),d=f.useRef(!1),u=f.useRef(!1),m=f.useCallback(()=>d.current=!1,[]);return f.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),s.jsx(Yr,{asChild:!0,...i,children:s.jsx(Q.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...r,ref:l,onPointerMove:Y(e.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!a.isPointerInTransitRef.current&&(o.onTriggerEnter(),u.current=!0)}),onPointerLeave:Y(e.onPointerLeave,()=>{o.onTriggerLeave(),u.current=!1}),onPointerDown:Y(e.onPointerDown,()=>{o.open&&o.onClose(),d.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:Y(e.onFocus,()=>{d.current||o.onOpen()}),onBlur:Y(e.onBlur,o.onClose),onClick:Y(e.onClick,o.onClose)})})});ob.displayName=Na;var Bi="TooltipPortal",[sb,ab]=ws(Bi,{forceMount:void 0}),om=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:o}=e,a=qr(Bi,t);return s.jsx(sb,{scope:t,forceMount:n,children:s.jsx(rt,{present:n||a.open,children:s.jsx(Xo,{asChild:!0,container:o,children:r})})})};om.displayName=Bi;var Yn="TooltipContent",sm=f.forwardRef((e,t)=>{const n=ab(Yn,e.__scopeTooltip),{forceMount:r=n.forceMount,side:o="top",...a}=e,i=qr(Yn,e.__scopeTooltip);return s.jsx(rt,{present:r||i.open,children:i.disableHoverableContent?s.jsx(am,{side:o,...a,ref:t}):s.jsx(ib,{side:o,...a,ref:t})})}),ib=f.forwardRef((e,t)=>{const n=qr(Yn,e.__scopeTooltip),r=tm(Yn,e.__scopeTooltip),o=f.useRef(null),a=ce(t,o),[i,c]=f.useState(null),{trigger:l,onClose:d}=n,u=o.current,{onPointerInTransitChange:m}=r,h=f.useCallback(()=>{c(null),m(!1)},[m]),p=f.useCallback((g,x)=>{const v=g.currentTarget,y={x:g.clientX,y:g.clientY},b=fb(y,v.getBoundingClientRect()),w=mb(y,b),C=hb(x.getBoundingClientRect()),S=gb([...w,...C]);c(S),m(!0)},[m]);return f.useEffect(()=>()=>h(),[h]),f.useEffect(()=>{if(l&&u){const g=v=>p(v,u),x=v=>p(v,l);return l.addEventListener("pointerleave",g),u.addEventListener("pointerleave",x),()=>{l.removeEventListener("pointerleave",g),u.removeEventListener("pointerleave",x)}}},[l,u,p,h]),f.useEffect(()=>{if(i){const g=x=>{const v=x.target,y={x:x.clientX,y:x.clientY},b=l?.contains(v)||u?.contains(v),w=!pb(y,i);b?h():w&&(h(),d())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[l,u,i,d,h]),s.jsx(am,{...e,ref:a})}),[cb,lb]=ws(rm,{isInside:!1}),db=vp("TooltipContent"),am=f.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":o,onEscapeKeyDown:a,onPointerDownOutside:i,...c}=e,l=qr(Yn,n),d=Li(n),{onClose:u}=l;return f.useEffect(()=>(document.addEventListener(Ic,u),()=>document.removeEventListener(Ic,u)),[u]),f.useEffect(()=>{if(l.trigger){const m=h=>{h.target?.contains(l.trigger)&&u()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[l.trigger,u]),s.jsx(Jo,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:u,children:s.jsxs(ls,{"data-state":l.stateAttribute,...d,...c,ref:t,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(db,{children:r}),s.jsx(cb,{scope:n,isInside:!0,children:s.jsx(ua,{id:l.contentId,role:"tooltip",children:o||r})})]})})});sm.displayName=Yn;var im="TooltipArrow",ub=f.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,o=Li(n);return lb(im,n).isInside?null:s.jsx(ds,{...o,...r,ref:t})});ub.displayName=im;function fb(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),o=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,o,a)){case a:return"left";case o:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function mb(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function hb(e){const{top:t,right:n,bottom:r,left:o}=e;return[{x:o,y:t},{x:n,y:t},{x:n,y:r},{x:o,y:r}]}function pb(e,t){const{x:n,y:r}=e;let o=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const c=t[a],l=t[i],d=c.x,u=c.y,m=l.x,h=l.y;u>r!=h>r&&n<(m-d)*(r-u)/(h-u)+d&&(o=!o)}return o}function gb(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),xb(t)}function xb(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const o=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))t.pop();else break}t.push(o)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const o=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(o.y-i.y)>=(a.y-i.y)*(o.x-i.x))n.pop();else break}n.push(o)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var vb=nm,yb=om,cm=sm;function bb(...e){const t=!Array.isArray(e[0]),n=t?0:-1,r=e[0+n],o=e[1+n],a=e[2+n],i=e[3+n],c=yp(o,a,i);return t?c(r):c}function wb(e,t,n){const r=e.get();let o=null,a=r,i;const c=typeof r=="string"?r.replace(/[\d.-]/g,""):void 0,l=()=>{o&&(o.stop(),o=null)},d=()=>{l(),o=new bp({keyframes:[Ac(e.get()),Ac(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...n,onUpdate:i})};if(e.attach((u,m)=>{a=u,i=h=>m(Pc(h,c)),td.postRender(d)},l),nd(t)){const u=t.on("change",h=>e.set(Pc(h,c))),m=e.on("destroy",u);return()=>{u(),m()}}return l}function Pc(e,t){return t?e+t:e}function Ac(e){return typeof e=="number"?e:parseFloat(e)}function lm(e,t){const n=rd(t()),r=()=>n.set(t());return r(),wp(()=>{const o=()=>td.preRender(r,!1,!0),a=e.map(i=>i.on("change",o));return()=>{a.forEach(i=>i()),Cp(r)}}),n}function Cb(e){zs.current=[],e();const t=lm(zs.current,e);return zs.current=void 0,t}function jb(e,t,n,r){if(typeof e=="function")return Cb(e);const o=bb(t,n,r);return Array.isArray(e)?_c(e,o):_c([e],([a])=>o(a))}function _c(e,t){const n=jp(()=>[]);return lm(e,()=>{n.length=0;const r=e.length;for(let o=0;o<r;o++)n[o]=e[o].get();return t(n)})}function Nb(e,t={}){const{isStatic:n}=f.useContext(Np),r=()=>nd(e)?e.get():e;if(n)return jb(r);const o=rd(r());return f.useInsertionEffect(()=>wb(o,e,t),[o,JSON.stringify(t)]),o}function Sb(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function kb(e,t,n,r){var o=!n;n||(n={});for(var a=-1,i=t.length;++a<i;){var c=t[a],l=void 0;l===void 0&&(l=e[c]),o?od(n,c,l):Sp(n,c,l)}return n}function Mb(e){return kp(function(t,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,i=o>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(o--,a):void 0,i&&Mp(n[0],n[1],i)&&(a=o<3?void 0:a,o=1),t=Object(t);++r<o;){var c=n[r];c&&e(t,c,r,a)}return t})}function Eb(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Db=Object.prototype,Rb=Db.hasOwnProperty;function Tb(e){if(!ri(e))return Eb(e);var t=Ep(e),n=[];for(var r in e)r=="constructor"&&(t||!Rb.call(e,r))||n.push(r);return n}function dm(e){return sd(e)?Dp(e,!0):Tb(e)}var Ob="[object Object]",Ib=Function.prototype,Pb=Object.prototype,um=Ib.toString,Ab=Pb.hasOwnProperty,_b=um.call(Object);function $b(e){if(!ad(e)||Rp(e)!=Ob)return!1;var t=Tp(e);if(t===null)return!0;var n=Ab.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&um.call(n)==_b}function Sa(e,t,n){(n!==void 0&&!Op(e[t],n)||n===void 0&&!(t in e))&&od(e,t,n)}function Lb(e){return ad(e)&&sd(e)}function ka(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function Bb(e){return kb(e,dm(e))}function Fb(e,t,n,r,o,a,i){var c=ka(e,n),l=ka(t,n),d=i.get(l);if(d){Sa(e,n,d);return}var u=a?a(c,l,n+"",e,t,i):void 0,m=u===void 0;if(m){var h=Eo(l),p=!h&&Ip(l),g=!h&&!p&&Pp(l);u=l,h||p||g?Eo(c)?u=c:Lb(c)?u=Sb(c):p?(m=!1,u=Ap(l,!0)):g?(m=!1,u=_p(l,!0)):u=[]:$b(l)||dc(l)?(u=c,dc(c)?u=Bb(c):(!ri(c)||$p(c))&&(u=Lp(l))):m=!1}m&&(i.set(l,u),o(u,l,r,a,i),i.delete(l)),Sa(e,n,u)}function fm(e,t,n,r,o){e!==t&&Bp(t,function(a,i){if(o||(o=new Fp),ri(a))Fb(e,t,i,n,fm,r,o);else{var c=r?r(ka(e,i),a,i+"",e,t,o):void 0;c===void 0&&(c=a),Sa(e,i,c)}},dm)}function Wb(e,t){return Wp(e,t)}var Ma=Mb(function(e,t,n){fm(e,t,n)});function zb(e,t,n,r){return e==null?[]:(Eo(t)||(t=t==null?[]:[t]),n=n,Eo(n)||(n=n==null?[]:[n]),zp(e,t,n))}function Ea(e){return Hp(Yp,e)}/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hb(e={}){let{initialEntries:t=["/"],initialIndex:n,v5Compat:r=!1}=e,o;o=t.map((p,g)=>u(p,typeof p=="string"?null:p.state,g===0?"default":void 0));let a=l(n??o.length-1),i="POP",c=null;function l(p){return Math.min(Math.max(p,0),o.length-1)}function d(){return o[a]}function u(p,g=null,x){let v=Ub(o?d().pathname:"/",p,g,x);return dt(v.pathname.charAt(0)==="/",`relative pathnames are not supported in memory history: ${JSON.stringify(p)}`),v}function m(p){return typeof p=="string"?p:_o(p)}return{get index(){return a},get action(){return i},get location(){return d()},createHref:m,createURL(p){return new URL(m(p),"http://localhost")},encodeLocation(p){let g=typeof p=="string"?kn(p):p;return{pathname:g.pathname||"",search:g.search||"",hash:g.hash||""}},push(p,g){i="PUSH";let x=u(p,g);a+=1,o.splice(a,o.length,x),r&&c&&c({action:i,location:x,delta:1})},replace(p,g){i="REPLACE";let x=u(p,g);o[a]=x,r&&c&&c({action:i,location:x,delta:0})},go(p){i="POP";let g=l(a+p),x=o[g];a=g,c&&c({action:i,location:x,delta:p})},listen(p){return c=p,()=>{c=null}}}}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Yb(){return Math.random().toString(36).substring(2,10)}function Ub(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?kn(t):t,state:n,key:t&&t.key||r||Yb()}}function _o({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function kn(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function mm(e,t,n="/"){return Vb(e,t,n,!1)}function Vb(e,t,n,r){let o=typeof t=="string"?kn(t):t,a=Ft(o.pathname||"/",n);if(a==null)return null;let i=hm(e);Gb(i);let c=null;for(let l=0;c==null&&l<i.length;++l){let d=ow(a);c=nw(i[l],d,r)}return c}function hm(e,t=[],n=[],r="",o=!1){let a=(i,c,l=o,d)=>{let u={relativePath:d===void 0?i.path||"":d,caseSensitive:i.caseSensitive===!0,childrenIndex:c,route:i};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(r)&&l)return;je(u.relativePath.startsWith(r),`Absolute route path "${u.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(r.length)}let m=_t([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(je(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),hm(i.children,t,h,m,l)),!(i.path==null&&!i.index)&&t.push({path:m,score:ew(m,i.index),routesMeta:h})};return e.forEach((i,c)=>{if(i.path===""||!i.path?.includes("?"))a(i,c);else for(let l of pm(i.path))a(i,c,!0,l)}),t}function pm(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=pm(r.join("/")),c=[];return c.push(...i.map(l=>l===""?a:[a,l].join("/"))),o&&c.push(...i),c.map(l=>e.startsWith("/")&&l===""?"/":l)}function Gb(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tw(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Kb=/^:[\w-]+$/,qb=3,Xb=2,Jb=1,Zb=10,Qb=-2,$c=e=>e==="*";function ew(e,t){let n=e.split("/"),r=n.length;return n.some($c)&&(r+=Qb),t&&(r+=Xb),n.filter(o=>!$c(o)).reduce((o,a)=>o+(Kb.test(a)?qb:a===""?Jb:Zb),r)}function tw(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function nw(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let c=0;c<r.length;++c){let l=r[c],d=c===r.length-1,u=a==="/"?t:t.slice(a.length)||"/",m=$o({path:l.relativePath,caseSensitive:l.caseSensitive,end:d},u),h=l.route;if(!m&&d&&n&&!r[r.length-1].route.index&&(m=$o({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!m)return null;Object.assign(o,m.params),i.push({params:o,pathname:_t([a,m.pathname]),pathnameBase:cw(_t([a,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(a=_t([a,m.pathnameBase]))}return i}function $o(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=rw(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),c=o.slice(1);return{params:r.reduce((d,{paramName:u,isOptional:m},h)=>{if(u==="*"){let g=c[h]||"";i=a.slice(0,a.length-g.length).replace(/(.)\/+$/,"$1")}const p=c[h];return m&&!p?d[u]=void 0:d[u]=(p||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:i,pattern:e}}function rw(e,t=!1,n=!0){dt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,c,l)=>(r.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function ow(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return dt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Ft(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function sw(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?kn(e):e;return{pathname:n?n.startsWith("/")?n:aw(n,t):t,search:lw(r),hash:dw(o)}}function aw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Vs(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iw(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function gm(e){let t=iw(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function xm(e,t,n,r=!1){let o;typeof e=="string"?o=kn(e):(o={...e},je(!o.pathname||!o.pathname.includes("?"),Vs("?","pathname","search",o)),je(!o.pathname||!o.pathname.includes("#"),Vs("#","pathname","hash",o)),je(!o.search||!o.search.includes("#"),Vs("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,c;if(i==null)c=n;else{let m=t.length-1;if(!r&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),m-=1;o.pathname=h.join("/")}c=m>=0?t[m]:"/"}let l=sw(o,c),d=i&&i!=="/"&&i.endsWith("/"),u=(a||i===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(d||u)&&(l.pathname+="/"),l}var _t=e=>e.join("/").replace(/\/\/+/g,"/"),cw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),lw=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,dw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var vm=["POST","PUT","PATCH","DELETE"];new Set(vm);var fw=["GET",...vm];new Set(fw);var Qn=f.createContext(null);Qn.displayName="DataRouter";var Cs=f.createContext(null);Cs.displayName="DataRouterState";f.createContext(!1);var ym=f.createContext({isTransitioning:!1});ym.displayName="ViewTransition";var mw=f.createContext(new Map);mw.displayName="Fetchers";var hw=f.createContext(null);hw.displayName="Await";var kt=f.createContext(null);kt.displayName="Navigation";var Xr=f.createContext(null);Xr.displayName="Location";var mt=f.createContext({outlet:null,matches:[],isDataRoute:!1});mt.displayName="Route";var Fi=f.createContext(null);Fi.displayName="RouteError";function pw(e,{relative:t}={}){je(Jr(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=f.useContext(kt),{hash:o,pathname:a,search:i}=Zr(e,{relative:t}),c=a;return n!=="/"&&(c=a==="/"?n:_t([n,a])),r.createHref({pathname:c,search:i,hash:o})}function Jr(){return f.useContext(Xr)!=null}function cn(){return je(Jr(),"useLocation() may be used only in the context of a <Router> component."),f.useContext(Xr).location}var bm="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function wm(e){f.useContext(kt).static||f.useLayoutEffect(e)}function Cm(){let{isDataRoute:e}=f.useContext(mt);return e?Rw():gw()}function gw(){je(Jr(),"useNavigate() may be used only in the context of a <Router> component.");let e=f.useContext(Qn),{basename:t,navigator:n}=f.useContext(kt),{matches:r}=f.useContext(mt),{pathname:o}=cn(),a=JSON.stringify(gm(r)),i=f.useRef(!1);return wm(()=>{i.current=!0}),f.useCallback((l,d={})=>{if(dt(i.current,bm),!i.current)return;if(typeof l=="number"){n.go(l);return}let u=xm(l,JSON.parse(a),o,d.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:_t([t,u.pathname])),(d.replace?n.replace:n.push)(u,d.state,d)},[t,n,a,o,e])}var xw=f.createContext(null);function vw(e){let t=f.useContext(mt).outlet;return t&&f.createElement(xw.Provider,{value:e},t)}function ID(){let{matches:e}=f.useContext(mt),t=e[e.length-1];return t?t.params:{}}function Zr(e,{relative:t}={}){let{matches:n}=f.useContext(mt),{pathname:r}=cn(),o=JSON.stringify(gm(n));return f.useMemo(()=>xm(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function yw(e,t){return jm(e,t)}function jm(e,t,n,r,o){je(Jr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=f.useContext(kt),{matches:i}=f.useContext(mt),c=i[i.length-1],l=c?c.params:{},d=c?c.pathname:"/",u=c?c.pathnameBase:"/",m=c&&c.route;{let b=m&&m.path||"";Nm(d,!m||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let h=cn(),p;if(t){let b=typeof t=="string"?kn(t):t;je(u==="/"||b.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=h;let g=p.pathname||"/",x=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let v=mm(e,{pathname:x});dt(m||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),dt(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let y=Nw(v&&v.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:_t([u,a.encodeLocation?a.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:_t([u,a.encodeLocation?a.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r,o);return t&&y?f.createElement(Xr.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},y):y}function bw(){let e=Dw(),t=uw(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=f.createElement(f.Fragment,null,f.createElement("p",null," Hey developer "),f.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",f.createElement("code",{style:a},"ErrorBoundary")," or"," ",f.createElement("code",{style:a},"errorElement")," prop on your route.")),f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:o},n):null,i)}var ww=f.createElement(bw,null),Cw=class extends f.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?f.createElement(mt.Provider,{value:this.props.routeContext},f.createElement(Fi.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function jw({routeContext:e,match:t,children:n}){let r=f.useContext(Qn);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),f.createElement(mt.Provider,{value:e},n)}function Nw(e,t=[],n=null,r=null,o=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,i=n?.errors;if(i!=null){let d=a.findIndex(u=>u.route.id&&i?.[u.route.id]!==void 0);je(d>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),a=a.slice(0,Math.min(a.length,d+1))}let c=!1,l=-1;if(n)for(let d=0;d<a.length;d++){let u=a[d];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(l=d),u.route.id){let{loaderData:m,errors:h}=n,p=u.route.loader&&!m.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||p){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((d,u,m)=>{let h,p=!1,g=null,x=null;n&&(h=i&&u.route.id?i[u.route.id]:void 0,g=u.route.errorElement||ww,c&&(l<0&&m===0?(Nm("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,x=null):l===m&&(p=!0,x=u.route.hydrateFallbackElement||null)));let v=t.concat(a.slice(0,m+1)),y=()=>{let b;return h?b=g:p?b=x:u.route.Component?b=f.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=d,f.createElement(jw,{match:u,routeContext:{outlet:d,matches:v,isDataRoute:n!=null},children:b})};return n&&(u.route.ErrorBoundary||u.route.errorElement||m===0)?f.createElement(Cw,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:y(),routeContext:{outlet:null,matches:v,isDataRoute:!0},unstable_onError:r}):y()},null)}function Wi(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sw(e){let t=f.useContext(Qn);return je(t,Wi(e)),t}function kw(e){let t=f.useContext(Cs);return je(t,Wi(e)),t}function Mw(e){let t=f.useContext(mt);return je(t,Wi(e)),t}function zi(e){let t=Mw(e),n=t.matches[t.matches.length-1];return je(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Ew(){return zi("useRouteId")}function Dw(){let e=f.useContext(Fi),t=kw("useRouteError"),n=zi("useRouteError");return e!==void 0?e:t.errors?.[n]}function Rw(){let{router:e}=Sw("useNavigate"),t=zi("useNavigate"),n=f.useRef(!1);return wm(()=>{n.current=!0}),f.useCallback(async(o,a={})=>{dt(n.current,bm),n.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...a}))},[e,t])}var Lc={};function Nm(e,t,n){!t&&!Lc[e]&&(Lc[e]=!0,dt(!1,n))}f.memo(Tw);function Tw({routes:e,future:t,state:n,unstable_onError:r}){return jm(e,void 0,n,r,t)}function Ow({basename:e,children:t,initialEntries:n,initialIndex:r}){let o=f.useRef();o.current==null&&(o.current=Hb({initialEntries:n,initialIndex:r,v5Compat:!0}));let a=o.current,[i,c]=f.useState({action:a.action,location:a.location}),l=f.useCallback(d=>{f.startTransition(()=>c(d))},[c]);return f.useLayoutEffect(()=>a.listen(l),[a,l]),f.createElement(Pw,{basename:e,children:t,location:i.location,navigationType:i.action,navigator:a})}function Iw(e){return vw(e.context)}function xr(e){je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Pw({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){je(!Jr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),c=f.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=kn(n));let{pathname:l="/",search:d="",hash:u="",state:m=null,key:h="default"}=n,p=f.useMemo(()=>{let g=Ft(l,i);return g==null?null:{location:{pathname:g,search:d,hash:u,state:m,key:h},navigationType:r}},[i,l,d,u,m,h,r]);return dt(p!=null,`<Router basename="${i}"> is not able to match the URL "${l}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:f.createElement(kt.Provider,{value:c},f.createElement(Xr.Provider,{children:t,value:p}))}function Aw({children:e,location:t}){return yw(Da(e),t)}function Da(e,t=[]){let n=[];return f.Children.forEach(e,(r,o)=>{if(!f.isValidElement(r))return;let a=[...t,o];if(r.type===f.Fragment){n.push.apply(n,Da(r.props.children,a));return}je(r.type===xr,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),je(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Da(r.props.children,a)),n.push(i)}),n}var xo="get",vo="application/x-www-form-urlencoded";function js(e){return e!=null&&typeof e.tagName=="string"}function _w(e){return js(e)&&e.tagName.toLowerCase()==="button"}function $w(e){return js(e)&&e.tagName.toLowerCase()==="form"}function Lw(e){return js(e)&&e.tagName.toLowerCase()==="input"}function Bw(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Fw(e,t){return e.button===0&&(!t||t==="_self")&&!Bw(e)}var uo=null;function Ww(){if(uo===null)try{new FormData(document.createElement("form"),0),uo=!1}catch{uo=!0}return uo}var zw=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gs(e){return e!=null&&!zw.has(e)?(dt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vo}"`),null):e}function Hw(e,t){let n,r,o,a,i;if($w(e)){let c=e.getAttribute("action");r=c?Ft(c,t):null,n=e.getAttribute("method")||xo,o=Gs(e.getAttribute("enctype"))||vo,a=new FormData(e)}else if(_w(e)||Lw(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||c.getAttribute("action");if(r=l?Ft(l,t):null,n=e.getAttribute("formmethod")||c.getAttribute("method")||xo,o=Gs(e.getAttribute("formenctype"))||Gs(c.getAttribute("enctype"))||vo,a=new FormData(c,e),!Ww()){let{name:d,type:u,value:m}=e;if(u==="image"){let h=d?`${d}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else d&&a.append(d,m)}}else{if(js(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=xo,r=null,o=vo,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Hi(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Yw(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Ft(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Uw(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Vw(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Gw(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await Uw(a,n);return i.links?i.links():[]}return[]}));return Jw(r.flat(1).filter(Vw).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Bc(e,t,n,r,o,a){let i=(l,d)=>n[d]?l.route.id!==n[d].route.id:!0,c=(l,d)=>n[d].pathname!==l.pathname||n[d].route.path?.endsWith("*")&&n[d].params["*"]!==l.params["*"];return a==="assets"?t.filter((l,d)=>i(l,d)||c(l,d)):a==="data"?t.filter((l,d)=>{let u=r.routes[l.route.id];if(!u||!u.hasLoader)return!1;if(i(l,d)||c(l,d))return!0;if(l.route.shouldRevalidate){let m=l.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function Kw(e,t,{includeHydrateFallback:n}={}){return qw(e.map(r=>{let o=t.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function qw(e){return[...new Set(e)]}function Xw(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function Jw(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(Xw(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function Sm(){let e=f.useContext(Qn);return Hi(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Zw(){let e=f.useContext(Cs);return Hi(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Yi=f.createContext(void 0);Yi.displayName="FrameworkContext";function km(){let e=f.useContext(Yi);return Hi(e,"You must render this element inside a <HydratedRouter> element"),e}function Qw(e,t){let n=f.useContext(Yi),[r,o]=f.useState(!1),[a,i]=f.useState(!1),{onFocus:c,onBlur:l,onMouseEnter:d,onMouseLeave:u,onTouchStart:m}=t,h=f.useRef(null);f.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let x=y=>{y.forEach(b=>{i(b.isIntersecting)})},v=new IntersectionObserver(x,{threshold:.5});return h.current&&v.observe(h.current),()=>{v.disconnect()}}},[e]),f.useEffect(()=>{if(r){let x=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(x)}}},[r]);let p=()=>{o(!0)},g=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,h,{}]:[a,h,{onFocus:ur(c,p),onBlur:ur(l,g),onMouseEnter:ur(d,p),onMouseLeave:ur(u,g),onTouchStart:ur(m,p)}]:[!1,h,{}]}function ur(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function e0({page:e,...t}){let{router:n}=Sm(),r=f.useMemo(()=>mm(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?f.createElement(n0,{page:e,matches:r,...t}):null}function t0(e){let{manifest:t,routeModules:n}=km(),[r,o]=f.useState([]);return f.useEffect(()=>{let a=!1;return Gw(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function n0({page:e,matches:t,...n}){let r=cn(),{manifest:o,routeModules:a}=km(),{basename:i}=Sm(),{loaderData:c,matches:l}=Zw(),d=f.useMemo(()=>Bc(e,t,l,o,r,"data"),[e,t,l,o,r]),u=f.useMemo(()=>Bc(e,t,l,o,r,"assets"),[e,t,l,o,r]),m=f.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let g=new Set,x=!1;if(t.forEach(y=>{let b=o.routes[y.route.id];!b||!b.hasLoader||(!d.some(w=>w.route.id===y.route.id)&&y.route.id in c&&a[y.route.id]?.shouldRevalidate||b.hasClientLoader?x=!0:g.add(y.route.id))}),g.size===0)return[];let v=Yw(e,i,"data");return x&&g.size>0&&v.searchParams.set("_routes",t.filter(y=>g.has(y.route.id)).map(y=>y.route.id).join(",")),[v.pathname+v.search]},[i,c,r,o,d,t,e,a]),h=f.useMemo(()=>Kw(u,o),[u,o]),p=t0(u);return f.createElement(f.Fragment,null,m.map(g=>f.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...n})),h.map(g=>f.createElement("link",{key:g,rel:"modulepreload",href:g,...n})),p.map(({key:g,link:x})=>f.createElement("link",{key:g,nonce:n.nonce,...x})))}function r0(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Mm=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Mm&&(window.__reactRouterVersion="7.8.2")}catch{}var Em=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dm=f.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:o,reloadDocument:a,replace:i,state:c,target:l,to:d,preventScrollReset:u,viewTransition:m,...h},p){let{basename:g}=f.useContext(kt),x=typeof d=="string"&&Em.test(d),v,y=!1;if(typeof d=="string"&&x&&(v=d,Mm))try{let D=new URL(window.location.href),R=d.startsWith("//")?new URL(D.protocol+d):new URL(d),O=Ft(R.pathname,g);R.origin===D.origin&&O!=null?d=O+R.search+R.hash:y=!0}catch{dt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=pw(d,{relative:o}),[w,C,S]=Qw(r,h),N=i0(d,{replace:i,state:c,target:l,preventScrollReset:u,relative:o,viewTransition:m});function j(D){t&&t(D),D.defaultPrevented||N(D)}let k=f.createElement("a",{...h,...S,href:v||b,onClick:y||a?t:j,ref:r0(p,C),target:l,"data-discover":!x&&n==="render"?"true":void 0});return w&&!x?f.createElement(f.Fragment,null,k,f.createElement(e0,{page:b})):k});Dm.displayName="Link";var o0=f.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:o=!1,style:a,to:i,viewTransition:c,children:l,...d},u){let m=Zr(i,{relative:d.relative}),h=cn(),p=f.useContext(Cs),{navigator:g,basename:x}=f.useContext(kt),v=p!=null&&f0(m)&&c===!0,y=g.encodeLocation?g.encodeLocation(m).pathname:m.pathname,b=h.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(b=b.toLowerCase(),w=w?w.toLowerCase():null,y=y.toLowerCase()),w&&x&&(w=Ft(w,x)||w);const C=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let S=b===y||!o&&b.startsWith(y)&&b.charAt(C)==="/",N=w!=null&&(w===y||!o&&w.startsWith(y)&&w.charAt(y.length)==="/"),j={isActive:S,isPending:N,isTransitioning:v},k=S?t:void 0,D;typeof r=="function"?D=r(j):D=[r,S?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let R=typeof a=="function"?a(j):a;return f.createElement(Dm,{...d,"aria-current":k,className:D,ref:u,style:R,to:i,viewTransition:c},typeof l=="function"?l(j):l)});o0.displayName="NavLink";var s0=f.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=xo,action:c,onSubmit:l,relative:d,preventScrollReset:u,viewTransition:m,...h},p)=>{let g=d0(),x=u0(c,{relative:d}),v=i.toLowerCase()==="get"?"get":"post",y=typeof c=="string"&&Em.test(c),b=w=>{if(l&&l(w),w.defaultPrevented)return;w.preventDefault();let C=w.nativeEvent.submitter,S=C?.getAttribute("formmethod")||i;g(C||w.currentTarget,{fetcherKey:t,method:S,navigate:n,replace:o,state:a,relative:d,preventScrollReset:u,viewTransition:m})};return f.createElement("form",{ref:p,method:v,action:x,onSubmit:r?l:b,...h,"data-discover":!y&&e==="render"?"true":void 0})});s0.displayName="Form";function a0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rm(e){let t=f.useContext(Qn);return je(t,a0(e)),t}function i0(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let c=Cm(),l=cn(),d=Zr(e,{relative:a});return f.useCallback(u=>{if(Fw(u,t)){u.preventDefault();let m=n!==void 0?n:_o(l)===_o(d);c(e,{replace:m,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[l,c,d,n,r,t,e,o,a,i])}var c0=0,l0=()=>`__${String(++c0)}__`;function d0(){let{router:e}=Rm("useSubmit"),{basename:t}=f.useContext(kt),n=Ew();return f.useCallback(async(r,o={})=>{let{action:a,method:i,encType:c,formData:l,body:d}=Hw(r,t);if(o.navigate===!1){let u=o.fetcherKey||l0();await e.fetch(u,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:d,formMethod:o.method||i,formEncType:o.encType||c,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:l,body:d,formMethod:o.method||i,formEncType:o.encType||c,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function u0(e,{relative:t}={}){let{basename:n}=f.useContext(kt),r=f.useContext(mt);je(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...Zr(e||".",{relative:t})},i=cn();if(e==null){a.search=i.search;let c=new URLSearchParams(a.search),l=c.getAll("index");if(l.some(u=>u==="")){c.delete("index"),l.filter(m=>m).forEach(m=>c.append("index",m));let u=c.toString();a.search=u?`?${u}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:_t([n,a.pathname])),_o(a)}function f0(e,{relative:t}={}){let n=f.useContext(ym);je(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Rm("useViewTransitionState"),o=Zr(e,{relative:t});if(!n.isTransitioning)return!1;let a=Ft(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=Ft(n.nextLocation.pathname,r)||n.nextLocation.pathname;return $o(o.pathname,i)!=null||$o(o.pathname,a)!=null}var yo={exports:{}},m0=yo.exports,Fc;function h0(){return Fc||(Fc=1,(function(e,t){(function(n,r){e.exports=r()})(m0,(function(){var n=1e3,r=6e4,o=36e5,a="millisecond",i="second",c="minute",l="hour",d="day",u="week",m="month",h="quarter",p="year",g="date",x="Invalid Date",v=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,b={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(M){var E=["th","st","nd","rd"],T=M%100;return"["+M+(E[(T-20)%10]||E[T]||E[0])+"]"}},w=function(M,E,T){var A=String(M);return!A||A.length>=E?M:""+Array(E+1-A.length).join(T)+M},C={s:w,z:function(M){var E=-M.utcOffset(),T=Math.abs(E),A=Math.floor(T/60),I=T%60;return(E<=0?"+":"-")+w(A,2,"0")+":"+w(I,2,"0")},m:function M(E,T){if(E.date()<T.date())return-M(T,E);var A=12*(T.year()-E.year())+(T.month()-E.month()),I=E.clone().add(A,m),P=T-I<0,B=E.clone().add(A+(P?-1:1),m);return+(-(A+(T-I)/(P?I-B:B-I))||0)},a:function(M){return M<0?Math.ceil(M)||0:Math.floor(M)},p:function(M){return{M:m,y:p,w:u,d,D:g,h:l,m:c,s:i,ms:a,Q:h}[M]||String(M||"").toLowerCase().replace(/s$/,"")},u:function(M){return M===void 0}},S="en",N={};N[S]=b;var j="$isDayjsObject",k=function(M){return M instanceof L||!(!M||!M[j])},D=function M(E,T,A){var I;if(!E)return S;if(typeof E=="string"){var P=E.toLowerCase();N[P]&&(I=P),T&&(N[P]=T,I=P);var B=E.split("-");if(!I&&B.length>1)return M(B[0])}else{var K=E.name;N[K]=E,I=K}return!A&&I&&(S=I),I||!A&&S},R=function(M,E){if(k(M))return M.clone();var T=typeof E=="object"?E:{};return T.date=M,T.args=arguments,new L(T)},O=C;O.l=D,O.i=k,O.w=function(M,E){return R(M,{locale:E.$L,utc:E.$u,x:E.$x,$offset:E.$offset})};var L=(function(){function M(T){this.$L=D(T.locale,null,!0),this.parse(T),this.$x=this.$x||T.x||{},this[j]=!0}var E=M.prototype;return E.parse=function(T){this.$d=(function(A){var I=A.date,P=A.utc;if(I===null)return new Date(NaN);if(O.u(I))return new Date;if(I instanceof Date)return new Date(I);if(typeof I=="string"&&!/Z$/i.test(I)){var B=I.match(v);if(B){var K=B[2]-1||0,G=(B[7]||"0").substring(0,3);return P?new Date(Date.UTC(B[1],K,B[3]||1,B[4]||0,B[5]||0,B[6]||0,G)):new Date(B[1],K,B[3]||1,B[4]||0,B[5]||0,B[6]||0,G)}}return new Date(I)})(T),this.init()},E.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},E.$utils=function(){return O},E.isValid=function(){return this.$d.toString()!==x},E.isSame=function(T,A){var I=R(T);return this.startOf(A)<=I&&I<=this.endOf(A)},E.isAfter=function(T,A){return R(T)<this.startOf(A)},E.isBefore=function(T,A){return this.endOf(A)<R(T)},E.$g=function(T,A,I){return O.u(T)?this[A]:this.set(I,T)},E.unix=function(){return Math.floor(this.valueOf()/1e3)},E.valueOf=function(){return this.$d.getTime()},E.startOf=function(T,A){var I=this,P=!!O.u(A)||A,B=O.p(T),K=function(ae,H){var re=O.w(I.$u?Date.UTC(I.$y,H,ae):new Date(I.$y,H,ae),I);return P?re:re.endOf(d)},G=function(ae,H){return O.w(I.toDate()[ae].apply(I.toDate("s"),(P?[0,0,0,0]:[23,59,59,999]).slice(H)),I)},ee=this.$W,te=this.$M,le=this.$D,ie="set"+(this.$u?"UTC":"");switch(B){case p:return P?K(1,0):K(31,11);case m:return P?K(1,te):K(0,te+1);case u:var F=this.$locale().weekStart||0,Z=(ee<F?ee+7:ee)-F;return K(P?le-Z:le+(6-Z),te);case d:case g:return G(ie+"Hours",0);case l:return G(ie+"Minutes",1);case c:return G(ie+"Seconds",2);case i:return G(ie+"Milliseconds",3);default:return this.clone()}},E.endOf=function(T){return this.startOf(T,!1)},E.$set=function(T,A){var I,P=O.p(T),B="set"+(this.$u?"UTC":""),K=(I={},I[d]=B+"Date",I[g]=B+"Date",I[m]=B+"Month",I[p]=B+"FullYear",I[l]=B+"Hours",I[c]=B+"Minutes",I[i]=B+"Seconds",I[a]=B+"Milliseconds",I)[P],G=P===d?this.$D+(A-this.$W):A;if(P===m||P===p){var ee=this.clone().set(g,1);ee.$d[K](G),ee.init(),this.$d=ee.set(g,Math.min(this.$D,ee.daysInMonth())).$d}else K&&this.$d[K](G);return this.init(),this},E.set=function(T,A){return this.clone().$set(T,A)},E.get=function(T){return this[O.p(T)]()},E.add=function(T,A){var I,P=this;T=Number(T);var B=O.p(A),K=function(te){var le=R(P);return O.w(le.date(le.date()+Math.round(te*T)),P)};if(B===m)return this.set(m,this.$M+T);if(B===p)return this.set(p,this.$y+T);if(B===d)return K(1);if(B===u)return K(7);var G=(I={},I[c]=r,I[l]=o,I[i]=n,I)[B]||1,ee=this.$d.getTime()+T*G;return O.w(ee,this)},E.subtract=function(T,A){return this.add(-1*T,A)},E.format=function(T){var A=this,I=this.$locale();if(!this.isValid())return I.invalidDate||x;var P=T||"YYYY-MM-DDTHH:mm:ssZ",B=O.z(this),K=this.$H,G=this.$m,ee=this.$M,te=I.weekdays,le=I.months,ie=I.meridiem,F=function(H,re,se,pe){return H&&(H[re]||H(A,P))||se[re].slice(0,pe)},Z=function(H){return O.s(K%12||12,H,"0")},ae=ie||function(H,re,se){var pe=H<12?"AM":"PM";return se?pe.toLowerCase():pe};return P.replace(y,(function(H,re){return re||(function(se){switch(se){case"YY":return String(A.$y).slice(-2);case"YYYY":return O.s(A.$y,4,"0");case"M":return ee+1;case"MM":return O.s(ee+1,2,"0");case"MMM":return F(I.monthsShort,ee,le,3);case"MMMM":return F(le,ee);case"D":return A.$D;case"DD":return O.s(A.$D,2,"0");case"d":return String(A.$W);case"dd":return F(I.weekdaysMin,A.$W,te,2);case"ddd":return F(I.weekdaysShort,A.$W,te,3);case"dddd":return te[A.$W];case"H":return String(K);case"HH":return O.s(K,2,"0");case"h":return Z(1);case"hh":return Z(2);case"a":return ae(K,G,!0);case"A":return ae(K,G,!1);case"m":return String(G);case"mm":return O.s(G,2,"0");case"s":return String(A.$s);case"ss":return O.s(A.$s,2,"0");case"SSS":return O.s(A.$ms,3,"0");case"Z":return B}return null})(H)||B.replace(":","")}))},E.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},E.diff=function(T,A,I){var P,B=this,K=O.p(A),G=R(T),ee=(G.utcOffset()-this.utcOffset())*r,te=this-G,le=function(){return O.m(B,G)};switch(K){case p:P=le()/12;break;case m:P=le();break;case h:P=le()/3;break;case u:P=(te-ee)/6048e5;break;case d:P=(te-ee)/864e5;break;case l:P=te/o;break;case c:P=te/r;break;case i:P=te/n;break;default:P=te}return I?P:O.a(P)},E.daysInMonth=function(){return this.endOf(m).$D},E.$locale=function(){return N[this.$L]},E.locale=function(T,A){if(!T)return this.$L;var I=this.clone(),P=D(T,A,!0);return P&&(I.$L=P),I},E.clone=function(){return O.w(this.$d,this)},E.toDate=function(){return new Date(this.valueOf())},E.toJSON=function(){return this.isValid()?this.toISOString():null},E.toISOString=function(){return this.$d.toISOString()},E.toString=function(){return this.$d.toUTCString()},M})(),W=L.prototype;return R.prototype=W,[["$ms",a],["$s",i],["$m",c],["$H",l],["$W",d],["$M",m],["$y",p],["$D",g]].forEach((function(M){W[M[1]]=function(E){return this.$g(E,M[0],M[1])}})),R.extend=function(M,E){return M.$i||(M(E,L,R),M.$i=!0),R},R.locale=D,R.isDayjs=k,R.unix=function(M){return R(1e3*M)},R.en=N[S],R.Ls=N,R.p={},R}))})(yo)),yo.exports}var p0=h0();const J=Kn(p0),g0=e=>f.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",...e},f.createElement("mask",{id:"SVGydzMjbIj"},f.createElement("g",{fill:"none",stroke:"#fff",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2},f.createElement("path",{strokeDasharray:64,strokeDashoffset:64,d:"M7 19h11c2.21 0 4 -1.79 4 -4c0 -2.21 -1.79 -4 -4 -4h-1v-1c0 -2.76 -2.24 -5 -5 -5c-2.42 0 -4.44 1.72 -4.9 4h-0.1c-2.76 0 -5 2.24 -5 5c0 2.76 2.24 5 5 5Z"},f.createElement("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.6s",values:"64;0"}),f.createElement("set",{fill:"freeze",attributeName:"opacity",begin:"0.7s",to:0})),f.createElement("g",{fill:"#fff",stroke:"none",opacity:0},f.createElement("circle",{cx:12,cy:10,r:6},f.createElement("animate",{attributeName:"cx",begin:"0.7s",dur:"30s",repeatCount:"indefinite",values:"12;11;12;13;12"})),f.createElement("rect",{width:9,height:8,x:8,y:12}),f.createElement("rect",{width:15,height:12,x:1,y:8,rx:6},f.createElement("animate",{attributeName:"x",begin:"0.7s",dur:"21s",repeatCount:"indefinite",values:"1;0;1;2;1"})),f.createElement("rect",{width:13,height:10,x:10,y:10,rx:5},f.createElement("animate",{attributeName:"x",begin:"0.7s",dur:"17s",repeatCount:"indefinite",values:"10;9;10;11;10"})),f.createElement("set",{fill:"freeze",attributeName:"opacity",begin:"0.7s",to:1})),f.createElement("g",{fill:"#000",fillOpacity:0,stroke:"none"},f.createElement("circle",{cx:12,cy:10,r:4},f.createElement("animate",{attributeName:"cx",begin:"0.7s",dur:"30s",repeatCount:"indefinite",values:"12;11;12;13;12"})),f.createElement("rect",{width:9,height:6,x:8,y:12}),f.createElement("rect",{width:11,height:8,x:3,y:10,rx:4},f.createElement("animate",{attributeName:"x",begin:"0.7s",dur:"21s",repeatCount:"indefinite",values:"3;2;3;4;3"})),f.createElement("rect",{width:9,height:6,x:12,y:12,rx:3},f.createElement("animate",{attributeName:"x",begin:"0.7s",dur:"17s",repeatCount:"indefinite",values:"12;11;12;13;12"})),f.createElement("set",{fill:"freeze",attributeName:"fill-opacity",begin:"0.7s",to:1})),f.createElement("g",{stroke:"none"},f.createElement("path",{fill:"#fff",d:"M6 11h12v0h-12z"},f.createElement("animate",{fill:"freeze",attributeName:"d",begin:"0.7s",dur:"0.22s",values:"M6 11h12v0h-12z;M6 11h12v11h-12z"})),f.createElement("path",{fill:"#000",d:"M8 13h8v0h-8z"},f.createElement("animate",{fill:"freeze",attributeName:"d",begin:"0.74s",dur:"0.14s",values:"M8 13h8v0h-8z;M8 13h8v7h-8z"})),f.createElement("path",{fill:"#fff",fillOpacity:0,d:"M9 12h6v1H9zM9 14h6v1H9zM9 16h6v1H9zM9 18h6v1H9z"},f.createElement("animate",{fill:"freeze",attributeName:"fill-opacity",begin:"0.8s",dur:"0.1s",values:"0;1"}),f.createElement("animateMotion",{begin:"0.9s",calcMode:"linear",dur:"1.5s",path:"M0 0v2",repeatCount:"indefinite"}))))),f.createElement("rect",{width:24,height:24,fill:"currentColor",mask:"url(#SVGydzMjbIj)"}));function x0(e,t){return Number(Number(e).toFixed(t))}const Ra=(e,t=0,n=20)=>new Intl.NumberFormat("en-US",{minimumFractionDigits:t,maximumFractionDigits:n}).format(e),v0=({value:e,...t})=>{const n=f.useRef(e),r=(e.toString().split(".")[1]||"").length,o=Nb(n.current,{stiffness:100,damping:20}),[a,i]=f.useState(e.toFixed(r));return f.useEffect(()=>{o.set(e);const c=o.on("change",l=>{const d=Number.isInteger(e);i(d?Ra(Math.round(l)).toString():Ra(x0(l,r)))});return()=>c()},[o,e,r]),f.useEffect(()=>{n.current=e}),s.jsx(id.span,{...t,children:a})},Ce=qo()(qa(e=>{const r=async()=>{await Promise.resolve(),e(He(o=>{o.loading=!0}));try{const{StorageAPI:o}=await _e(),i=await o.fetchAllBooks();return e(He(c=>{c.books=i})),i}finally{e(He(o=>{o.loading=!1}))}};return r(),{loading:!1,visible:!1,books:[],currentBookId:void 0,updateBookList:r,addBook:async o=>{const{StorageAPI:a}=await _e();await a.createBook(o),await r()},deleteBook:async o=>{await r()},switchToBook:async o=>{e(He(a=>{a.currentBookId=o,a.visible=!1,Promise.resolve().then(()=>{location.reload()})}))}}},{name:"book-store",storage:Xa(()=>localStorage),version:0,partialize(e){return{books:e.books,currentBookId:e.currentBookId}}}));function fo({className:e,...t}){return s.jsx("div",{className:_("animate-pulse rounded-md bg-primary/10",e),...t})}function yr({children:e,className:t}){return s.jsxs("div",{className:_("flex items-center gap-2",t),children:[s.jsx("i",{className:"icon-[mdi--loading] animate-spin"}),e]})}const Wc=()=>s.jsxs("div",{className:"w-full p-4 flex flex-col gap-2",children:[s.jsx(fo,{className:"h-8 w-full"}),s.jsx(fo,{className:"w-full h-[200px] rounded"}),s.jsx(fo,{className:"h-8 w-full"}),s.jsx(fo,{className:"h-8 w-full"})]});/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y0=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),b0=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),zc=e=>{const t=b0(e);return t.charAt(0).toUpperCase()+t.slice(1)},Tm=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),w0=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var C0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j0=f.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...c},l)=>f.createElement("svg",{ref:l,...C0,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Tm("lucide",o),...!a&&!w0(c)&&{"aria-hidden":"true"},...c},[...i.map(([d,u])=>f.createElement(d,u)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=(e,t)=>{const n=f.forwardRef(({className:r,...o},a)=>f.createElement(j0,{ref:a,iconNode:t,className:Tm(`lucide-${y0(zc(e))}`,`lucide-${e}`,r),...o}));return n.displayName=zc(e),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N0=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Hc=Mt("calendar",N0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S0=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Dr=Mt("check",S0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k0=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Ns=Mt("chevron-down",k0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M0=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],E0=Mt("chevron-left",M0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D0=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Ui=Mt("chevron-right",D0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R0=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],T0=Mt("chevron-up",R0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O0=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Om=Mt("circle",O0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=[["path",{d:"M5 12h14",key:"1ays0h"}]],P0=Mt("minus",I0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A0=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],_0=Mt("plus",A0);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $0=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],L0=Mt("x",$0),Ss=f.forwardRef(({className:e,...t},n)=>s.jsx(li,{ref:n,className:_("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsxs(gd,{className:_("flex items-center justify-center text-current"),children:[t.checked==="indeterminate"&&s.jsx(P0,{className:"h-4 w-4"}),t.checked===!0&&s.jsx(Dr,{className:"h-4 w-4"})]})}));Ss.displayName=li.displayName;function Im(){console.log("bookfo");const e=V(),t=Ja(),{books:n,currentBookId:r,loading:o}=Ce(),[a,i]=f.useState(!1),[c,l]=f.useState(void 0);if(f.useEffect(()=>{_e().then(h=>{l(h)})},[]),!t)return null;const d=h=>{Ce.getState().switchToBook(h)},u=async h=>{const{StorageAPI:p}=await _e();p.initBook?.(h.id)},m=async h=>{const{StorageAPI:p}=await _e();try{await p.deleteBook(h.id),Ce.getState().switchToBook(void 0)}catch(g){console.log(g)}};return s.jsx("div",{className:"w-fit h-full flex justify-center items-center pointer-events-auto",children:s.jsxs("div",{className:"bg-background w-[350px] h-[480px] max-h-[55vh] py-4 flex flex-col justify-center items-center rounded",children:[n.length>0?s.jsxs("div",{className:"flex-1 flex flex-col w-full gap-2 h-full overflow-hidden",children:[s.jsxs("div",{className:"flex gap-2 px-4",children:[e("select-a-book"),o&&s.jsx(yr,{})]}),s.jsx("div",{className:"flex flex-1 flex-col gap-2 px-4 overflow-y-auto",children:n.map(h=>s.jsxs(fa,{className:"flex-shrink-0 cursor-pointer hover:bg-accent/50 overflow-hidden flex items-center gap-3 rounded-lg border p-3 has-[[aria-checked=true]]:border-blue-600 has-[[aria-checked=true]]:bg-blue-50 dark:has-[[aria-checked=true]]:border-blue-900 dark:has-[[aria-checked=true]]:bg-blue-950",children:[s.jsx(Ss,{checked:h.id===r,onCheckedChange:p=>{p&&d(h.id)},className:"inline-flex items-center data-[state=checked]:border-blue-600 data-[state=checked]:bg-blue-600 data-[state=checked]:text-white dark:data-[state=checked]:border-blue-700 dark:data-[state=checked]:bg-blue-700"}),s.jsxs("div",{className:"flex-1 flex justify-between gap-1.5 font-normal overflow-hidden",children:[s.jsxs("div",{className:"flex-1 text-sm leading-none font-medium flex flex-col gap-1 overflow-hidden",children:[s.jsx("p",{children:h.name}),s.jsx("span",{className:"text-xs opacity-60 truncate",children:h.id})]}),s.jsxs("div",{className:"flex gap-1 items-center",children:[c?.StorageAPI.inviteForBook&&s.jsx(z,{size:"sm",onClick:()=>u(h),children:e("invite")}),r!==h.id&&s.jsx(z,{size:"sm",variant:"destructive",onClick:()=>m(h),children:e("delete")})]})]})]},h.id))})]}):o?s.jsx("div",{className:"flex-1",children:s.jsx(yr,{children:e("loading-books")})}):s.jsx("div",{className:"flex-1",children:e("no-books-go-create-one")}),s.jsxs(z,{disabled:a,onClick:async()=>{const h=prompt(e("please-input-book-name"));if(!h)return;i(!0);const{StorageAPI:p}=await _e();try{const g=await p.createBook(h);await Ce.getState().updateBookList()}finally{i(!1)}},children:[a&&s.jsx(yr,{}),e("create-new-book")]})]})})}function B0({edit:e}){return s.jsx("div",{children:s.jsx(Im,{})})}const[F0,Vi]=we(B0,{dialogTitle:"Books",dialogModalClose:!0,contentClassName:"max-h-[55vh] w-fit max-w-[500px]"}),Gi=[{name:"Food",id:"food",type:"expense",icon:"icon-[mdi--food]",color:"#5470c6"},{name:"breakfast",id:"breakfast",type:"expense",icon:"icon-[mdi--bread-slice]",color:"#5470c6",parent:"food"},{name:"launch",id:"launch",type:"expense",icon:"icon-[mdi--meat]",color:"#5470c6",parent:"food"},{name:"dinner",id:"dinner",type:"expense",icon:"icon-[mdi--food-turkey]",color:"#5470c6",parent:"food"},{name:"snack",id:"snack",type:"expense",icon:"icon-[mdi--treat]",color:"#5470c6",parent:"food"},{name:"treat",id:"treat",type:"expense",icon:"icon-[mdi--food-ramen]",color:"#5470c6",parent:"food"},{name:"Transport",id:"transport",type:"expense",icon:"icon-[mdi--transportation]",color:"#91cc75"},{name:"taxi",id:"taxi",type:"expense",icon:"icon-[mdi--taxi]",color:"#91cc75",parent:"transport"},{name:"subway",id:"subway",type:"expense",icon:"icon-[mdi--subway]",color:"#91cc75",parent:"transport"},{name:"bus",id:"bus",type:"expense",icon:"icon-[mdi--bus]",color:"#91cc75",parent:"transport"},{name:"parking",id:"parking",type:"expense",icon:"icon-[mdi--parking]",color:"#91cc75",parent:"transport"},{name:"gas-up",id:"gas-up",type:"expense",icon:"icon-[mdi--gas-station]",color:"#91cc75",parent:"transport"},{name:"airplane",id:"airplane",type:"expense",icon:"icon-[mdi--airplane]",color:"#91cc75",parent:"transport"},{name:"Shopping",id:"shopping",type:"expense",icon:"icon-[mdi--shopping-cart]",color:"#fac858"},{name:"household",id:"household",type:"expense",icon:"icon-[mdi--house-add]",color:"#fac858",parent:"shopping"},{name:"electronics",id:"electronics",type:"expense",icon:"icon-[mdi--tablet-cellphone]",color:"#fac858",parent:"shopping"},{name:"credits",id:"credits",type:"expense",icon:"icon-[mdi--bitcoin]",color:"#fac858",parent:"shopping"},{name:"baby-and-mom",id:"baby-mom",type:"expense",icon:"icon-[mdi--baby-face]",color:"#fac858",parent:"shopping"},{name:"accessories",id:"accessories",type:"expense",icon:"icon-[mdi--watch]",color:"#fac858",parent:"shopping"},{name:"clothing",id:"clothing",type:"expense",icon:"icon-[mdi--tshirt-crew]",color:"#fac858",parent:"shopping"},{name:"pets",id:"pets",type:"expense",icon:"icon-[mdi--pets]",color:"#fac858",parent:"shopping"},{name:"office",id:"office",type:"expense",icon:"icon-[mdi--briefcase]",color:"#fac858",parent:"shopping"},{name:"renovation",id:"renovation",type:"expense",icon:"icon-[mdi--house-flood]",color:"#fac858",parent:"shopping"},{name:"Housing",id:"housing",type:"expense",icon:"icon-[mdi--house-city]",color:"#ee6666"},{name:"phone",id:"phone",type:"expense",icon:"icon-[mdi--phone]",color:"#ee6666",parent:"housing"},{name:"electricity",id:"electricity",type:"expense",icon:"icon-[mdi--battery-charging-10]",color:"#ee6666",parent:"housing"},{name:"water",id:"water",type:"expense",icon:"icon-[mdi--water]",color:"#ee6666",parent:"housing"},{name:"mgmt-fee",id:"mgmt-fee",type:"expense",icon:"icon-[mdi--gardening]",color:"#ee6666",parent:"housing"},{name:"rent",id:"rent",type:"expense",icon:"icon-[mdi--hoop-house]",color:"#ee6666",parent:"housing"},{name:"mortgage",id:"mortgage",type:"expense",icon:"icon-[mdi--house-floor-l]",color:"#ee6666",parent:"housing"},{name:"cleaning",id:"cleaning",type:"expense",icon:"icon-[mdi--vacuum-cleaner]",color:"#ee6666",parent:"housing"},{name:"Entertainment",id:"entertainment",type:"expense",icon:"icon-[mdi--google-gamepad]",color:"#73c0de"},{name:"travel",id:"travel",type:"expense",icon:"icon-[mdi--bag-suitcase]",color:"#73c0de",parent:"entertainment"},{name:"movies",id:"movies",type:"expense",icon:"icon-[mdi--local-movies]",color:"#73c0de",parent:"entertainment"},{name:"fitness",id:"fitness",type:"expense",icon:"icon-[mdi--fitness-center]",color:"#73c0de",parent:"entertainment"},{name:"wellness",id:"wellness",type:"expense",icon:"icon-[mdi--emoticon]",color:"#73c0de",parent:"entertainment"},{name:"drinks",id:"drinks",type:"expense",icon:"icon-[mdi--local-bar]",color:"#73c0de",parent:"entertainment"},{name:"shows",id:"shows",type:"expense",icon:"icon-[mdi--microphone-variant]",color:"#73c0de",parent:"entertainment"},{name:"Medical",id:"medical",type:"expense",icon:"icon-[mdi--hospital-box]",color:"#3ba272"},{name:"clinic",id:"clinic",type:"expense",icon:"icon-[mdi--stethoscope]",color:"#3ba272",parent:"medical"},{name:"pharmacy",id:"pharmacy",type:"expense",icon:"icon-[mdi--pill-multiple]",color:"#3ba272",parent:"medical"},{name:"supplements",id:"supplements",type:"expense",icon:"icon-[mdi--account-heart]",color:"#3ba272",parent:"medical"},{name:"Education",id:"education",type:"expense",icon:"icon-[mdi--academic-cap]",color:"#9a60b4"},{name:"tuition",id:"tuition",type:"expense",icon:"icon-[mdi--account-school]",color:"#9a60b4",parent:"education"},{name:"books",id:"books",type:"expense",icon:"icon-[mdi--book-open-blank-variant]",color:"#9a60b4",parent:"education"},{name:"courses",id:"courses",type:"expense",icon:"icon-[mdi--book-account]",color:"#9a60b4",parent:"education"},{name:"social",id:"relationship",type:"expense",icon:"icon-[mdi--party-balloon]",color:"#ea7ccc"},{name:"family",id:"family",type:"expense",icon:"icon-[mdi--elderly]",color:"#ea7ccc",parent:"relationship"},{name:"gifts",id:"gifts",type:"expense",icon:"icon-[mdi--gift]",color:"#ea7ccc",parent:"relationship"},{name:"loan",id:"loan",type:"expense",icon:"icon-[mdi--hand-back-right]",color:"#ea7ccc",parent:"relationship"},{name:"hongbao",id:"hongbao",type:"expense",icon:"icon-[mdi--redeem]",color:"#ea7ccc",parent:"relationship"},{name:"Other",id:"other-expenses",type:"expense",icon:"icon-[mdi--bookmark-multiple]",color:"#4d3c77"},{name:"fees-and-charges",id:"fees-charges",type:"expense",icon:"icon-[mdi--cash-minus]",color:"#40f8ff",parent:"other-expenses"},{name:"charity",id:"charity",type:"expense",icon:"icon-[mdi--charity]",color:"#40f8ff",parent:"other-expenses"},{name:"reconciliation",id:"balance-account",type:"expense",icon:"icon-[mdi--credit-card-sync-outline]",color:"#40f8ff",parent:"other-expenses"}],Pm=[{name:"Wage",id:"wage",type:"income",icon:"icon-[mdi--credit-card-outline]",color:"#5470c6"},{name:"Part Time",id:"part-time",type:"income",icon:"icon-[mdi--google-cardboard]",color:"#91cc75",parent:"wage"},{name:"social",id:"relationship-income",type:"income",icon:"icon-[mdi--party-balloon]",color:"#ea7ccc"},{name:"Lean",id:"lean",type:"income",icon:"icon-[mdi--hand-extended]",color:"#fac858",parent:"relationship-income"},{name:"gifts",id:"gifts-income",type:"income",icon:"icon-[mdi--gift]",color:"#ea7ccc",parent:"relationship-income"},{name:"hongbao",id:"hongbao-income",type:"income",icon:"icon-[mdi--redeem]",color:"#ea7ccc",parent:"relationship-income"},{name:"Other",id:"other-income",type:"income",icon:"icon-[mdi--bookmark-multiple]",color:"#9a60b4"},{name:"Refund",id:"refund",type:"income",icon:"icon-[mdi--credit-card-refund]",color:"#ee6666",parent:"other-income"},{name:"Drawback",id:"drawback",type:"income",icon:"icon-[mdi--recurring-payment]",color:"#73c0de",parent:"other-income"},{name:"reconciliation",id:"balance-account-income",type:"income",icon:"icon-[mdi--credit-card-sync-outline]",color:"#40f8ff",parent:"other-income"}],Ze=[...Gi,...Pm];var bo={exports:{}},W0=bo.exports,Yc;function z0(){return Yc||(Yc=1,(function(e,t){(function(n,r){e.exports=r()})(W0,(function(){return function(n,r){r.prototype.isSameOrAfter=function(o,a){return this.isSame(o,a)||this.isAfter(o,a)}}}))})(bo)),bo.exports}var H0=z0();const Y0=Kn(H0);var wo={exports:{}},U0=wo.exports,Uc;function V0(){return Uc||(Uc=1,(function(e,t){(function(n,r){e.exports=r()})(U0,(function(){return function(n,r){r.prototype.isSameOrBefore=function(o,a){return this.isSame(o,a)||this.isBefore(o,a)}}}))})(wo)),wo.exports}var G0=V0();const Am=Kn(G0),Qe=e=>e/1e4,fn=e=>Number((e*1e4).toFixed(0)),Ta="CNY",Co=[{id:"CNY",labelKey:"c-rmb",symbol:"",icon:""},{id:"USD",labelKey:"c-usd",symbol:"$",icon:""},{id:"EUR",labelKey:"c-eur",symbol:"",icon:""},{id:"JPY",labelKey:"c-jpy",symbol:"",icon:""},{id:"GBP",labelKey:"c-gbp",symbol:"",icon:""},{id:"AUD",labelKey:"c-aud",symbol:"$",icon:""},{id:"CAD",labelKey:"c-cad",symbol:"$",icon:""},{id:"CHF",labelKey:"c-chf",symbol:"Fr",icon:""},{id:"HKD",labelKey:"c-hkd",symbol:"$",icon:""},{id:"NZD",labelKey:"c-nzd",symbol:"$",icon:""},{id:"SGD",labelKey:"c-sgd",symbol:"$",icon:""},{id:"KRW",labelKey:"c-krw",symbol:"",icon:""},{id:"INR",labelKey:"c-inr",symbol:"",icon:""},{id:"BRL",labelKey:"c-brl",symbol:"R$",icon:""},{id:"MXN",labelKey:"c-mxn",symbol:"$",icon:""},{id:"ZAR",labelKey:"c-zar",symbol:"R",icon:""},{id:"SEK",labelKey:"c-sek",symbol:"kr",icon:""},{id:"NOK",labelKey:"c-nok",symbol:"kr",icon:""},{id:"DKK",labelKey:"c-dkk",symbol:"kr",icon:""},{id:"TRY",labelKey:"c-try",symbol:"",icon:""},{id:"BGN",labelKey:"c-bgn",symbol:"",icon:""},{id:"CZK",labelKey:"c-czk",symbol:"K",icon:""},{id:"HUF",labelKey:"c-huf",symbol:"Ft",icon:""},{id:"PLN",labelKey:"c-pln",symbol:"z",icon:""},{id:"RON",labelKey:"c-ron",symbol:"lei",icon:""},{id:"ISK",labelKey:"c-isk",symbol:"kr",icon:""},{id:"IDR",labelKey:"c-idr",symbol:"Rp",icon:""},{id:"ILS",labelKey:"c-ils",symbol:"",icon:""},{id:"MYR",labelKey:"c-myr",symbol:"RM",icon:""},{id:"PHP",labelKey:"c-php",symbol:"",icon:""},{id:"THB",labelKey:"c-thb",symbol:"",icon:""}];J.extend(Am);J.extend(Y0);const Lo=e=>e.reduce((t,n)=>{if(!n.parent)return t.push({...n,children:[]}),t;const r=t.find(o=>o.id===n.parent);return r&&r.children.push(n),t},[]),K0=(e,t,n)=>{const r=n.find(o=>o.id===t);return!r||!r.parent?e===t:e===r.parent},q0=(e,t)=>e===void 0?e:{...e,name:e.customName?e.name:t(e.name)},Oa=e=>e?.some(t=>t.name.length>2)?"grid-cols-[repeat(auto-fill,minmax(120px,1fr))]":"grid-cols-[repeat(auto-fill,minmax(80px,1fr))]";function X0(e,t,n,r){if(n===void 0||t===n)return t;if(r===void 0)return n;const o=t!==r,a=n!==r;return o&&!a?t:n}function J0(e,t,n=Ze){const r=new Map(t.map(l=>[l.id,l])),o=new Map(n.map(l=>[l.id,l])),a=new Set,i=e.map(l=>{a.add(l.id);const d=r.get(l.id);if(!d)return l;const u=o.get(l.id),m={...l};return Object.keys(d).forEach(h=>{const p=l[h],g=d[h],x=u?u[h]:void 0;m[h]=X0(h,p,g,x)}),m}),c=t.filter(l=>!a.has(l.id));return[...i,...c]}const Z0=Za(()=>import("./index-xR07Ve0S.js"),__vite__mapDeps([0,1,2]),import.meta.url),Ks=200,ne=qo()((e,t)=>{const n=()=>{const c=Ce.getState().currentBookId;if(c===void 0)throw new Error("currentBookId not found");return c},r=async c=>{const{StorageAPI:l,StorageDeferredAPI:d}=await _e(),u=n(),[m]=await Promise.all([(c&&c>=t().bills.length?d.truncate(u,c):d.filter(u,{})).then(h=>(e(He(p=>{p.bills=h})),h)),d.getInfo(u).then(h=>{e(He(p=>{p.infos={...p.infos,...h}}))})]);return ke.getState().getCollaborators(u).then(h=>{e(He(p=>{const g=ke.getState().id,v=p.infos?.meta.personal?.[g]?.names;p.infos={...p.infos,creators:(h??[]).map(y=>({...y,originalName:y.name,name:v?.[y.id]??y.name}))}}))}).catch(h=>[]),m},o=async()=>{const{StorageAPI:c}=await _e();await Promise.resolve(),e(He(l=>{l.loading=!0}));try{const l=Ce.getState().currentBookId;if(!l)return;await r(Ks),await c.initBook(l),await r(Ks),c.toSync()}catch(l){if(l?.status===404){const{toast:d}=await Z0;d.error(Wn("Repo not found, maybe it was deleted, please select another book"),{position:"top-center",action:{label:Wn("Go"),onClick:()=>{Vi()}}})}}finally{e(He(l=>{l.loading=!1}))}};o(),_e().then(({StorageAPI:c})=>{c.onChange(()=>{r(Ks),c.getIsNeedSync().then(l=>{l&&e(He(d=>{d.sync="wait"}))})}),c.onSync(async l=>{e(He(d=>{d.sync="syncing"})),console.log("start sync");try{await l,e(He(d=>{d.sync="success"})),console.log("sync success")}catch(d){console.error("sync error",d),e(He(u=>{u.sync="failed"}))}})});const a=async c=>{const{StorageAPI:l}=await _e(),d=n();`${ke.getState().id}`,await l.batch(d,c.map(u=>({type:"delete",value:u})))},i=async c=>{const{StorageAPI:l}=await _e(),d=n();`${ke.getState().id}`;const u=ke.getState().id;await l.batch(d,c.map(({id:m,entry:h})=>({type:"update",value:{id:m,...h,amount:Math.abs(h.amount),creatorId:u}})))};return{loading:!1,sync:"success",bills:[],actions:[],pendingCursor:void 0,initCurrentBook:o,refreshBillList:r,removeBills:a,removeBill:async c=>a([c]),addBill:async c=>{const{StorageAPI:l}=await _e(),d=n(),u=ke.getState().id;l.batch(d,[{type:"update",value:{...c,amount:Math.abs(c.amount),creatorId:u,id:Qt()}}])},updateBills:i,updateBill:async(c,l)=>i([{id:c,entry:l}]),updateGlobalMeta:async c=>{const{StorageAPI:l}=await _e(),d=n(),u=await l.getMeta(d),m=typeof c=="function"?c(u):Ma(u,c);await l.batch(d,[{type:"meta",metaValue:m}])},updatePersonalMeta:async c=>{const{StorageAPI:l}=await _e(),d=n(),u=await l.getMeta(d),m=ke.getState().id,h=u?.personal?.[m]??{},p=typeof c=="function"?c(h):{...h,...c},g={...u,personal:{...u.personal,[m]:p}};await l.batch(d,[{type:"meta",metaValue:g}])},batchImportFromBills:async(c,l=!1)=>{const{StorageAPI:d}=await _e();if(c.length===0)throw new Error("");const u=await r(),{repeated:m,valid:h}=c.reduce((v,y)=>(u.some(b=>b.time===y.time)?v.repeated.push(y):v.valid.push(y),v),{repeated:[],valid:[]});if(m.length>0&&!confirm(`${m.length}`))throw new Error("");const p=n(),g=ke.getState().id,x=h.map(v=>({type:"update",value:{...v,creatorId:g,id:Qt()}}));d.batch(p,x)}}}),Q0=e=>{const t=e.reduce((n,r)=>(r.type==="income"?n.income=!0:n.expense=!0,n),{expense:!1,income:!1});return!(t.income===!1||t.expense===!1)};function Wt(){const e=V(),t=ne(jn(d=>d.infos?.meta.categories)),n=f.useMemo(()=>(t??Ze).map(d=>q0(d,e)),[t,e]),r=f.useMemo(()=>Lo(n.filter(d=>d.type==="income")),[n]),o=f.useMemo(()=>Lo(n.filter(d=>d.type==="expense")),[n]),a=f.useCallback(async d=>{if(!Ce.getState().currentBookId)return;const{promise:m,resolve:h,reject:p}=Promise.withResolvers();return await ne.getState().updateGlobalMeta(g=>{g.categories===void 0&&(g.categories=Ze);const x=Qt();return g.categories.push({...d,customName:!0,id:x}),h(x),g}),m},[]),i=f.useCallback(async(d,u)=>{Ce.getState().currentBookId&&await ne.getState().updateGlobalMeta(h=>{if(h.categories===void 0&&(h.categories=Ze),u===void 0){if(h.categories=h.categories.filter(y=>y.id!==d),!Q0(h.categories))throw new Error("each bill-type must has one category as least");return h}const p=h.categories.findIndex(v=>v.id===d);if(p===-1)return h;let g;const x=Ze.find(v=>v.id===d);return x&&x&&(g=e(x.name)!==u.name),h.categories[p]={...h.categories[p],...u,customName:g,name:g===!0?u.name:x?.name??u.name,id:d},h})},[e]),c=f.useCallback(async d=>{await ne.getState().updateGlobalMeta(u=>{u.categories===void 0&&(u.categories=Ze);const m=d.map(p=>u.categories?.find(g=>g.id===p.id));if(m.some(p=>p===void 0))return console.error("category order mismatch",m),u;u.categories=u.categories.filter(p=>d.every(g=>g.id!==p.id));const h=m[0]?.parent?u.categories.findIndex(p=>p.id===m[0]?.parent):0;return u.categories.splice(h+1,0,...m.filter(p=>p!==void 0)),u})},[]),l=f.useCallback(async()=>{if(!(await ne.getState().refreshBillList()).every(m=>Ze.some(h=>h.id===m.categoryId)))throw new Error("still has transactions with custom category");await ne.getState().updateGlobalMeta(m=>(m.categories=void 0,m))},[]);return{categories:n,incomes:r,expenses:o,update:i,add:a,reorder:c,reset:l}}function _m(e,t=0,n=120,r=1e3){const[o,a]=f.useState(0),[i,c]=f.useState(()=>Math.max(0,Math.floor(t))),l=f.useRef(void 0),d=f.useRef(null),u=f.useRef(null),m=f.useRef(null),h=f.useRef(!1),p=f.useRef(i);p.current=i;const g=f.useCallback(()=>{const w=e.current;return w?Array.from(w.children).filter(C=>C instanceof HTMLElement):[]},[e]),x=f.useCallback(()=>{const w=e.current;if(!w)return;const C=w.scrollWidth>w.clientWidth;return l.current=C,C},[e]),v=f.useCallback(()=>{const w=e.current;if(!w)return null;const C=g();if(C.length===0)return null;const S=x();let N=0,j=1/0;if(S){const k=w.scrollLeft+w.clientWidth/2;C.forEach((D,R)=>{const O=D.offsetLeft+D.clientWidth/2,L=Math.abs(O-k);L<j&&(j=L,N=R)})}else{const k=w.scrollTop+w.clientHeight/2;C.forEach((D,R)=>{const O=D.offsetTop+D.clientHeight/2,L=Math.abs(O-k);L<j&&(j=L,N=R)})}return Math.max(0,Math.min(C.length-1,N))},[e,g,x]),y=f.useCallback(()=>{const w=v();w!==null&&w!==p.current&&(p.current=w,c(w))},[v]),b=f.useCallback((w,C="smooth")=>{const S=g();if(S.length===0||!e.current)return;const N=Math.max(0,Math.min(S.length-1,Math.floor(w))),j=S[N];if(j){try{j.scrollIntoView({behavior:C,block:"nearest",inline:"nearest"})}catch{e.current.scrollTo({left:j.offsetLeft,top:j.offsetTop,behavior:C})}C==="auto"&&(p.current=N,c(N))}},[e,g]);return f.useEffect(()=>{const w=e.current;if(!w)return;x();const C=g();a(C.length),h.current=!1;const S=()=>{if(h.current)return;const k=g();if(k.length===0){h.current=!0;return}const D=Math.max(0,Math.min(k.length-1,Math.floor(t)));requestAnimationFrame(()=>{b(D,"auto"),p.current=D,c(D),h.current=!0})};"MutationObserver"in window&&(d.current=new MutationObserver(k=>{const D=k.some(O=>O.type==="childList"&&(O.addedNodes.length>0||O.removedNodes.length>0)),R=g();a(R.length),!h.current&&D&&S()}),d.current.observe(w,{childList:!0,subtree:!1})),r>0&&(m.current=window.setTimeout(()=>{h.current||S(),m.current=null},r));let N=!1;try{N=typeof w.onscrollend<"u"}catch{N=!1}const j=()=>{u.current&&(window.clearTimeout(u.current),u.current=null),y()};if(N)w.addEventListener("scrollend",j);else{const k=()=>{u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(()=>{u.current=null,y()},n)};w.addEventListener("scroll",k,{passive:!0}),w.__useSnap_onScroll=k}return()=>{if(d.current&&(d.current.disconnect(),d.current=null),m.current&&(window.clearTimeout(m.current),m.current=null),u.current&&(window.clearTimeout(u.current),u.current=null),N)try{w.removeEventListener("scrollend",j)}catch{}else{const k=w.__useSnap_onScroll;k&&(w.removeEventListener("scroll",k),delete w.__useSnap_onScroll)}}},[e,t,b,x,g,n,r,y]),f.useEffect(()=>{const w=g();a(w.length)},[g]),{count:o,index:i,scrollTo:b,isHorizontal:l.current}}const Vc=f.createContext(null);function eC(){function e({children:o}){const a=f.useRef(null);return s.jsx(Vc.Provider,{value:{parentRef:a},children:o})}function t(){const o=f.useContext(Vc);if(!o)throw new Error("need init TeleportContext first");return o}function n(o){const{parentRef:a}=t();return s.jsx("div",{...o,ref:a})}function r({children:o}){const{parentRef:a}=t();return a.current?et.createPortal(o,a.current):null}return{Provider:e,Slot:n,Teleport:r}}function Te({title:e,children:t,onBack:n,className:r,hideBack:o,right:a}){const i=V();return s.jsxs("div",{className:_("flex-1 flex flex-col overflow-hidden pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]",r),children:[s.jsxs("div",{className:"w-full flex justify-center items-center relative px-4 pt-4 pb-2 flex-shrink-0",children:[!o&&s.jsxs("button",{type:"button",className:"absolute left-0 flex buttoned rounded-full py-1 pl-1 pr-3 cursor-pointer",onClick:c=>{n?.(),c.stopPropagation()},children:[s.jsx("div",{className:"flex items-center justify-center",children:s.jsx("i",{className:"icon-[mdi--chevron-left] size-5"})}),i("back")]}),a&&s.jsx("div",{className:"absolute right-0 pr-1",children:a}),s.jsx("div",{className:"min-h-4 w-full flex justify-center items-center",children:e})]}),t]})}var jo={exports:{}},tC=jo.exports,Gc;function nC(){return Gc||(Gc=1,(function(e,t){(function(n,r){e.exports=r()})(tC,(function(){var n,r,o=1e3,a=6e4,i=36e5,c=864e5,l=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d=31536e6,u=2628e6,m=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,h={years:d,months:u,days:c,hours:i,minutes:a,seconds:o,milliseconds:1,weeks:6048e5},p=function(N){return N instanceof C},g=function(N,j,k){return new C(N,k,j.$l)},x=function(N){return r.p(N)+"s"},v=function(N){return N<0},y=function(N){return v(N)?Math.ceil(N):Math.floor(N)},b=function(N){return Math.abs(N)},w=function(N,j){return N?v(N)?{negative:!0,format:""+b(N)+j}:{negative:!1,format:""+N+j}:{negative:!1,format:""}},C=(function(){function N(k,D,R){var O=this;if(this.$d={},this.$l=R,k===void 0&&(this.$ms=0,this.parseFromMilliseconds()),D)return g(k*h[x(D)],this);if(typeof k=="number")return this.$ms=k,this.parseFromMilliseconds(),this;if(typeof k=="object")return Object.keys(k).forEach((function(M){O.$d[x(M)]=k[M]})),this.calMilliseconds(),this;if(typeof k=="string"){var L=k.match(m);if(L){var W=L.slice(2).map((function(M){return M!=null?Number(M):0}));return this.$d.years=W[0],this.$d.months=W[1],this.$d.weeks=W[2],this.$d.days=W[3],this.$d.hours=W[4],this.$d.minutes=W[5],this.$d.seconds=W[6],this.calMilliseconds(),this}}return this}var j=N.prototype;return j.calMilliseconds=function(){var k=this;this.$ms=Object.keys(this.$d).reduce((function(D,R){return D+(k.$d[R]||0)*h[R]}),0)},j.parseFromMilliseconds=function(){var k=this.$ms;this.$d.years=y(k/d),k%=d,this.$d.months=y(k/u),k%=u,this.$d.days=y(k/c),k%=c,this.$d.hours=y(k/i),k%=i,this.$d.minutes=y(k/a),k%=a,this.$d.seconds=y(k/o),k%=o,this.$d.milliseconds=k},j.toISOString=function(){var k=w(this.$d.years,"Y"),D=w(this.$d.months,"M"),R=+this.$d.days||0;this.$d.weeks&&(R+=7*this.$d.weeks);var O=w(R,"D"),L=w(this.$d.hours,"H"),W=w(this.$d.minutes,"M"),M=this.$d.seconds||0;this.$d.milliseconds&&(M+=this.$d.milliseconds/1e3,M=Math.round(1e3*M)/1e3);var E=w(M,"S"),T=k.negative||D.negative||O.negative||L.negative||W.negative||E.negative,A=L.format||W.format||E.format?"T":"",I=(T?"-":"")+"P"+k.format+D.format+O.format+A+L.format+W.format+E.format;return I==="P"||I==="-P"?"P0D":I},j.toJSON=function(){return this.toISOString()},j.format=function(k){var D=k||"YYYY-MM-DDTHH:mm:ss",R={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return D.replace(l,(function(O,L){return L||String(R[O])}))},j.as=function(k){return this.$ms/h[x(k)]},j.get=function(k){var D=this.$ms,R=x(k);return R==="milliseconds"?D%=1e3:D=R==="weeks"?y(D/h[R]):this.$d[R],D||0},j.add=function(k,D,R){var O;return O=D?k*h[x(D)]:p(k)?k.$ms:g(k,this).$ms,g(this.$ms+O*(R?-1:1),this)},j.subtract=function(k,D){return this.add(k,D,!0)},j.locale=function(k){var D=this.clone();return D.$l=k,D},j.clone=function(){return g(this.$ms,this)},j.humanize=function(k){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!k)},j.valueOf=function(){return this.asMilliseconds()},j.milliseconds=function(){return this.get("milliseconds")},j.asMilliseconds=function(){return this.as("milliseconds")},j.seconds=function(){return this.get("seconds")},j.asSeconds=function(){return this.as("seconds")},j.minutes=function(){return this.get("minutes")},j.asMinutes=function(){return this.as("minutes")},j.hours=function(){return this.get("hours")},j.asHours=function(){return this.as("hours")},j.days=function(){return this.get("days")},j.asDays=function(){return this.as("days")},j.weeks=function(){return this.get("weeks")},j.asWeeks=function(){return this.as("weeks")},j.months=function(){return this.get("months")},j.asMonths=function(){return this.as("months")},j.years=function(){return this.get("years")},j.asYears=function(){return this.as("years")},N})(),S=function(N,j,k){return N.add(j.years()*k,"y").add(j.months()*k,"M").add(j.days()*k,"d").add(j.hours()*k,"h").add(j.minutes()*k,"m").add(j.seconds()*k,"s").add(j.milliseconds()*k,"ms")};return function(N,j,k){n=k,r=k().$utils(),k.duration=function(O,L){var W=k.locale();return g(O,{$l:W},L)},k.isDuration=p;var D=j.prototype.add,R=j.prototype.subtract;j.prototype.add=function(O,L){return p(O)?S(this,O,1):D.bind(this)(O,L)},j.prototype.subtract=function(O,L){return p(O)?S(this,O,-1):R.bind(this)(O,L)}}}))})(jo)),jo.exports}var rC=nC();const oC=Kn(rC);var No={exports:{}},sC=No.exports,Kc;function aC(){return Kc||(Kc=1,(function(e,t){(function(n,r){e.exports=r()})(sC,(function(){return function(n,r,o){r.prototype.isBetween=function(a,i,c,l){var d=o(a),u=o(i),m=(l=l||"()")[0]==="(",h=l[1]===")";return(m?this.isAfter(d,c):!this.isBefore(d,c))&&(h?this.isBefore(u,c):!this.isAfter(u,c))||(m?this.isBefore(d,c):!this.isAfter(d,c))&&(h?this.isAfter(u,c):!this.isBefore(u,c))}}}))})(No)),No.exports}var iC=aC();const cC=Kn(iC);J.extend(cC);J.extend(Am);J.extend(oC);const lC=e=>J.unix(e/1e3).format("YYYY-MM-DD HH:mm");function PD(e,t="day"){return J.unix(e/1e3).startOf(t).format("YYYY-MM-DD")}const Rr=(e,t="-")=>{const n=J();return e.isSame(n,"days")?Wn("Today"):Math.abs(e.diff(n,"day"))<=3&&e.isSame(n,"M")?Zl.locale==="zh"?`${e.format("DD")}`:e.format(`MM${t}DD`):e.isSame(n,"year")?e.format(`MM${t}DD`):e.format(`YYYY${t}MM${t}DD`)},dC=e=>{const t=J(),n=typeof e=="number"?J.unix(e/1e3):J(e);return n.isSame(t,"days")?n.format("HH:mm"):Math.abs(n.diff(t,"day"))<=3&&n.isSame(t,"M")?Zl.locale==="zh"?`${n.format("DD")} ${n.format("HH:mm")}`:n.format("MM/DD HH:mm"):n.isSame(t,"year")?n.format("MM/DD HH:mm"):n.format("YY/MM/DD HH:mm")},So=e=>typeof e=="number"?J.unix(e/1e3):J(e),$m=(e,t,n=!0)=>{const[r,o]=zb(t.map(So),i=>i.unix()),a=[];for(let i=0;i<e.length;i++){const c=e[n?i:e.length-i],l=J.unix(c.time/1e3);if(!l.isAfter(o)){if(l.isAfter(r))a.push(c);else if(l.isBefore(r))break}}return a},Lm=e=>e.totalBudget+(e.categoriesBudget?.reduce((t,n)=>t+n.budget,0)??0),uC=(e,t)=>{const n=So(Date.now()).startOf("day"),r=So(e.start).startOf("day"),o=e.end?So(e.end).endOf("day"):null,a=[];let i=null;const{unit:c,value:l}=e.repeat;let d=r;const u=1e4;let m=0;for(;o===null||d.isSameOrBefore(o);){if(++m>u){console.warn("");break}let h;if(c==="month"?h=d.add(l,"month").subtract(1,"day"):c==="year"?h=d.add(l,"year").subtract(1,"day"):h=d.add(l,c).subtract(1,"day"),o&&h.isAfter(o)&&(h=o),n.isBetween(d,h,null,"[]")&&(i=[d,h]),a.push([d,h]),i&&d.isAfter(i[0]))break;d=d.add(l,c)}return[a,i]},Tr=(e,t,n,r)=>{const o=$m(t,n);let a=0;const i=e.categoriesBudget?.map(c=>({id:c.id,used:0}));return o.forEach(c=>{if(c.type==="income"||e.excludeTags?.some(d=>c.tagIds?.includes(d))||(e.onlyTags?.length??0)>0&&e.onlyTags?.every(d=>!c.tagIds?.includes(d)))return;a+=c.amount;const l=i?.find(d=>K0(d.id,c.categoryId,r));l&&(l.used+=c.amount)},[]),{totalUsed:Qe(a),categoriesUsed:i?.map(c=>({...c,used:Qe(c.used)}))}},fC=(e,t,n,r)=>{const o=Tr(e,t,n,r),a=Lm(e);return[["total",o.totalUsed<=a],...o.categoriesUsed?.map(({id:i,used:c})=>[i,c<=(e.categoriesBudget?.find(l=>l.id===i)?.budget??0)])??[]]};function Bm(e){const t=f.useMemo(()=>Lm(e),[e]),[n,r]=f.useMemo(()=>uC(e),[e]),o=f.useCallback(a=>{if(!a)return;const c=J().diff(a[0]),l=a[1].diff(a[0]),d=J.duration(l).asDays(),u=J.duration(c).asDays(),m=Math.max(0,d-u);return{percent:c/l,leftDays:m,totalDays:d}},[]);return{total:t,allRanges:n,currentRange:r,getTime:o}}function mC({total:e,used:t,timePercent:n,todayUsed:r}){const o=t/e,a=(r??0)/e;return s.jsxs("div",{className:"w-full flex items-center h-4 relative",children:[s.jsxs("div",{className:"relative w-full h-2 rounded-full outer bg-gray-300 flex items-center overflow-hidden",children:[s.jsx("div",{className:"inner h-2 rounded-full bg-amber-500 absolute top-0",style:{left:"0px",width:`${(a+o)*100}%`}}),s.jsx("div",{className:_("inner h-2 rounded-full absolute left-0 top-0",o>n?"bg-red-700":"bg-green-600"),style:{width:`${o*100}%`}})]}),s.jsx("div",{className:"absolute top-0 h-4 bg-slate-500 w-[2px]",style:{left:`${Math.min(n,1)*100}%`}})]})}function Bo({total:e,used:t,todayUsed:n,time:r}){const o=V();return s.jsxs(s.Fragment,{children:[s.jsx(mC,{total:e,used:t,todayUsed:n,timePercent:r?.percent??1}),s.jsxs("div",{className:"flex justify-between items-center text-xs gap-1",children:[s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{children:[o("expensed"),":",t.toFixed(2)]}),n!==void 0&&s.jsxs("div",{children:[o("today-expense"),":",n]}),r&&s.jsxs("div",{children:[o("daily-expense"),":",(t/(r.totalDays-r?.leftDays)).toFixed(2)]})]}),s.jsxs("div",{className:"text-end",children:[s.jsxs("div",{children:[o("total-budget"),": ",e]}),s.jsxs("div",{children:[o("total-left"),": ",(e-t).toFixed(2)]}),r&&s.jsxs(s.Fragment,{children:[o("daily-left"),":",((e-t)/Math.max(1,r.leftDays)).toFixed(2)]})]})]})]})}const Ia=eC();function hC({budget:e,onCancel:t}){const n=V(),{bills:r}=ne(),{categories:o}=Wt(),{currentRange:a,getTime:i,total:c,allRanges:l}=Bm(e),d=a?l.findIndex(C=>C[0].isSame(a[0])):l.length-1,[u,m]=f.useState(d),h=f.useRef(null);_m(h,d);const p=f.useMemo(()=>l.map((C,S)=>{const j=r[0].time>=C[0].unix()*1e3,k=j?fC(e,r,C,o):void 0;return{id:S,range:C,reached:k?.map(D=>D[1]),active:j,label:s.jsxs(s.Fragment,{children:[Rr(C[0],".")," - ",Rr(C[1],".")]})}}),[l,r,e,o]),g=p.filter(C=>C.reached?.every(S=>S)).length-1,x=l[u],v=f.useMemo(()=>x?Tr(e,r,x,o):void 0,[e,r,x,o]),y=f.useMemo(()=>x?i(x):void 0,[x,i]),b=f.useMemo(()=>{const C=J();return C.isSameOrAfter(x[0])&&C.isSameOrBefore(x[1])},[x]),w=f.useMemo(()=>b&&a?Tr(e,r,[J().startOf("day"),J().endOf("day")],o):void 0,[b,a,r,e,o]);return s.jsxs(s.Fragment,{children:[s.jsx(Ia.Teleport,{children:s.jsxs("div",{className:_("text-xs flex justify-center items-center gap-1",g>0?"text-green-700":"opacity-60"),children:[s.jsx("i",{className:"icon-[mdi--medal-outline]"}),g>0?n("budget-reached-times",{n:g}):n("budget-reached-not-yet")]})}),s.jsxs("div",{ref:h,className:"w-full flex gap-2 px-4 overflow-x-auto scrollbar-hidden snap-mandatory snap-x pb-2",children:[p.map(({label:C,id:S,active:N,reached:j},k)=>s.jsx(z,{variant:k===u?"default":"ghost",className:"flex-shrink-0 text-sm snap-center",disabled:!N,title:j?j.every(D=>D)?n("budget-reached"):n("budget-unreached"):n("budget-not-time"),onClick:()=>m(k),children:s.jsxs("div",{className:"flex flex-col justify-center items-center",children:[C,s.jsx("div",{className:"flex justify-center items-center gap-1 h-1",children:j?.map((D,R)=>s.jsx("div",{className:`w-1 h-1 rounded-full ${D?"bg-green-700":"bg-red-700"}`},R))})]})},S)),s.jsx(z,{variant:"ghost",className:"flex-shrink-0 text-sm",disabled:!0,children:e.end?"END":s.jsx("i",{className:"icon-[mdi--infinity] size-5"})})]}),v&&s.jsxs("div",{className:"flex-1 overflow-y-auto px-4 flex flex-col gap-2 pb-6",children:[s.jsxs("div",{children:[n("total-budget"),s.jsx(Bo,{total:c,used:v.totalUsed,todayUsed:w?.totalUsed,time:y})]}),v?.categoriesUsed?.map(C=>{const S=o.find(k=>k.id===C.id),N=e.categoriesBudget?.find(k=>k.id===C.id)?.budget??0,j=w?.categoriesUsed?.find(k=>k.id===C.id);return s.jsxs("div",{children:[S?.name,s.jsx(Bo,{total:N,used:C.used,todayUsed:j?.used,time:y})]},C.id)})]})]})}function pC({edit:e,onCancel:t}){return s.jsx(Ia.Provider,{children:s.jsx(Te,{title:e?.title,right:s.jsx(Ia.Slot,{className:"px-2"}),onBack:t,className:"h-full overflow-hidden",children:e&&s.jsx(hC,{budget:e})})})}const[gC,qc]=we(pC,{dialogTitle:"Budget Detail",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function xC({className:e,budget:t}){const n=V(),{bills:r}=ne(),{total:o,currentRange:a}=Bm(t),{categories:i}=Wt(),c=f.useMemo(()=>a?Tr(t,r,a,i):void 0,[t,r,a,i]),l=f.useMemo(()=>a?Tr(t,r,[J().startOf("day"),J().endOf("day")],i):void 0,[t,r,a,i]),d=f.useMemo(()=>{if(!a)return;const h=J().diff(a[0]),p=a[1].diff(a[0]),g=J.duration(p).asDays(),x=J.duration(h).asDays(),v=Math.max(0,g-x);return{percent:h/p,leftDays:v,totalDays:g}},[a]);if(!c)return s.jsxs("div",{className:_("rounded-lg border flex flex-col w-full px-4 py-2 cursor-pointer",e),onClick:()=>{qc(t)},children:[s.jsx("div",{className:"font-semibold",children:t.title}),s.jsx("div",{className:"text-xs opacity-60",children:n("budget-finished")})]});const u=s.jsx(s.Fragment,{children:c?.categoriesUsed?.map(m=>{const h=i.find(x=>x.id===m.id),p=t.categoriesBudget?.find(x=>x.id===m.id)?.budget??0,g=l?.categoriesUsed?.find(x=>x.id===m.id);return s.jsxs("div",{children:[h?.name,s.jsx(Bo,{total:p,used:m.used,todayUsed:g?.used,time:d})]},m.id)})});return s.jsx("div",{className:_("rounded-lg border flex flex-col w-full px-4 py-2 cursor-pointer",e),onClick:()=>{qc(t)},children:s.jsxs(es,{className:"group",children:[s.jsxs("div",{className:"w-full flex items-center justify-between",children:[s.jsx("div",{className:"font-semibold",children:t.title}),s.jsx("div",{className:"text-sm",children:l&&d&&s.jsxs(s.Fragment,{children:[n("today-left"),":",(o/d.totalDays-l.totalUsed).toFixed(2)]})})]}),t.totalBudget!==0&&c?.categoriesUsed?.length===1?s.jsxs("div",{className:"flex flex-col",children:[s.jsx(Bo,{total:o,used:c.totalUsed,todayUsed:l?.totalUsed,time:d}),s.jsx("div",{children:(c?.categoriesUsed?.length??0)>0&&s.jsx(ts,{className:"h-4 flex justify-end w-full group",onClick:m=>{m.stopPropagation()},children:s.jsx("i",{className:" group-[[data-state=open]]:icon-[mdi--chevron-down] group-[[data-state=closed]]:icon-[mdi--chevron-up]"})})}),s.jsx(fd,{className:"data-[state=open]:animate-collapse-open data-[state=closed]:animate-collapse-close data-[state=closed]:overflow-hidden",children:u})]}):u]})})}const gn=qo()(qa((e,t)=>({}),{name:"guide-store",storage:Xa(()=>localStorage),version:0,partialize(e){return e}})),bn=ny,wn=ry,nn=f.forwardRef(({className:e,align:t="center",sideOffset:n=4,...r},o)=>s.jsx(oy,{children:s.jsx(Ju,{ref:o,align:t,sideOffset:n,className:_("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]",e),...r})}));nn.displayName=Ju.displayName;const vC=vb,yC=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(yb,{children:s.jsx(cm,{ref:r,sideOffset:t,className:_("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",e),...n})}));yC.displayName=cm.displayName;const bC="z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]";function wC({children:e,persistKey:t,content:n}){const r=Ja(),o=gn(l=>l[t]),[a,i]=f.useState(!1),c=Ce(l=>l.currentBookId);return f.useEffect(()=>{setTimeout(()=>{gn.getState()[t]||i(!0)},1e3)},[t]),!r||!c||o?e:s.jsxs(bn,{open:a,onOpenChange:l=>{l||(gn.setState(d=>({...d,[t]:!0})),i(l))},children:[s.jsx(wn,{asChild:!0,children:e}),s.jsxs(nn,{side:"bottom",align:"end",alignOffset:-4,className:_(bC,"border-none w-fit"),children:[s.jsx(qu,{}),n]})]})}const CC=({count:e,current:t,className:n=""})=>s.jsx("div",{className:`flex items-center justify-center gap-2 ${n}`,children:Array.from({length:e}).map((r,o)=>s.jsx("div",{className:`w-1 h-1 rounded-full transition-all duration-300 ${o===t?"bg-stone-800 scale-110":"bg-gray-300 opacity-70 hover:opacity-100"}`},o))});function In(e,t,n){let r=n.initialDeps??[],o;function a(){var i,c,l,d;let u;n.key&&((i=n.debug)!=null&&i.call(n))&&(u=Date.now());const m=e();if(!(m.length!==r.length||m.some((g,x)=>r[x]!==g)))return o;r=m;let p;if(n.key&&((c=n.debug)!=null&&c.call(n))&&(p=Date.now()),o=t(...m),n.key&&((l=n.debug)!=null&&l.call(n))){const g=Math.round((Date.now()-u)*100)/100,x=Math.round((Date.now()-p)*100)/100,v=x/16,y=(b,w)=>{for(b=String(b);b.length<w;)b=" "+b;return b};console.info(`%c ${y(x,5)} /${y(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*v,120))}deg 100% 31%);`,n?.key)}return(d=n?.onChange)==null||d.call(n,o),o}return a.updateDeps=i=>{r=i},a}function Xc(e,t){if(e===void 0)throw new Error("Unexpected undefined");return e}const jC=(e,t)=>Math.abs(e-t)<1.01,NC=(e,t,n)=>{let r;return function(...o){e.clearTimeout(r),r=e.setTimeout(()=>t.apply(this,o),n)}},Jc=e=>{const{offsetWidth:t,offsetHeight:n}=e;return{width:t,height:n}},SC=e=>e,kC=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let o=t;o<=n;o++)r.push(o);return r},MC=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;const o=i=>{const{width:c,height:l}=i;t({width:Math.round(c),height:Math.round(l)})};if(o(Jc(n)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(i=>{const c=()=>{const l=i[0];if(l?.borderBoxSize){const d=l.borderBoxSize[0];if(d){o({width:d.inlineSize,height:d.blockSize});return}}o(Jc(n))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(c):c()});return a.observe(n,{box:"border-box"}),()=>{a.unobserve(n)}},Zc={passive:!0},Qc=typeof window>"u"?!0:"onscrollend"in window,EC=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=e.targetWindow;if(!r)return;let o=0;const a=e.options.useScrollendEvent&&Qc?()=>{}:NC(r,()=>{t(o,!1)},e.options.isScrollingResetDelay),i=u=>()=>{const{horizontal:m,isRtl:h}=e.options;o=m?n.scrollLeft*(h&&-1||1):n.scrollTop,a(),t(o,u)},c=i(!0),l=i(!1);l(),n.addEventListener("scroll",c,Zc);const d=e.options.useScrollendEvent&&Qc;return d&&n.addEventListener("scrollend",l,Zc),()=>{n.removeEventListener("scroll",c),d&&n.removeEventListener("scrollend",l)}},DC=(e,t,n)=>{if(t?.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return e[n.options.horizontal?"offsetWidth":"offsetHeight"]},RC=(e,{adjustments:t=0,behavior:n},r)=>{var o,a;const i=e+t;(a=(o=r.scrollElement)==null?void 0:o.scrollTo)==null||a.call(o,{[r.options.horizontal?"left":"top"]:i,behavior:n})};class TC{constructor(t){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(o=>{o.forEach(a=>{const i=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var o;(o=r())==null||o.disconnect(),n=null},observe:o=>{var a;return(a=r())==null?void 0:a.observe(o,{box:"border-box"})},unobserve:o=>{var a;return(a=r())==null?void 0:a.unobserve(o)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,o])=>{typeof o>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:SC,rangeExtractor:kC,onChange:()=>{},measureElement:DC,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,o;(o=(r=this.options).onChange)==null||o.call(r,this,n)},this.maybeNotify=In(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(o=>{this.observer.observe(o)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,o=>{this.scrollRect=o,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(o,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<o?"forward":"backward":null,this.scrollOffset=o,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const o=new Map,a=new Map;for(let i=r-1;i>=0;i--){const c=n[i];if(o.has(c.lane))continue;const l=a.get(c.lane);if(l==null||c.end>l.end?a.set(c.lane,c):c.end<l.end&&o.set(c.lane,!0),o.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((i,c)=>i.end===c.end?i.index-c.index:i.end-c.end)[0]:void 0},this.getMeasurementOptions=In(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,o,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:o,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=In(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:o,getItemKey:a,enabled:i},c)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){const m=a(u),h=this.options.lanes===1?d[u-1]:this.getFurthestMeasurement(d,u),p=h?h.end+this.options.gap:r+o,g=c.get(m),x=typeof g=="number"?g:this.options.estimateSize(u),v=p+x,y=h?h.lane:u%this.options.lanes;d[u]={index:u,start:p,size:x,end:v,key:m,lane:y}}return this.measurementsCache=d,d},{key:!1,debug:()=>this.options.debug}),this.calculateRange=In(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,o,a)=>this.range=n.length>0&&r>0?OC({measurements:n,outerSize:r,scrollOffset:o,lanes:a}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=In(()=>{let n=null,r=null;const o=this.calculateRange();return o&&(n=o.startIndex,r=o.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,o,a,i)=>a===null||i===null?[]:n({startIndex:a,endIndex:i,overscan:r,count:o}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,o=n.getAttribute(r);return o?parseInt(o,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const o=this.indexFromElement(n),a=this.measurementsCache[o];if(!a)return;const i=a.key,c=this.elementsCache.get(i);c!==n&&(c&&this.observer.unobserve(c),this.observer.observe(n),this.elementsCache.set(i,n)),n.isConnected&&this.resizeItem(o,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const o=this.measurementsCache[n];if(!o)return;const a=this.itemSizeCache.get(o.key)??o.size,i=r-a;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(o,i,this):o.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(o.index),this.itemSizeCache=new Map(this.itemSizeCache.set(o.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,o)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(o))});return}this._measureElement(n,void 0)},this.getVirtualItems=In(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const o=[];for(let a=0,i=n.length;a<i;a++){const c=n[a],l=r[c];o.push(l)}return o},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Xc(r[Fm(0,r.length-1,o=>Xc(r[o]).start,n)])},this.getOffsetForAlignment=(n,r,o=0)=>{const a=this.getSize(),i=this.getScrollOffset();r==="auto"&&(r=n>=i+a?"end":"start"),r==="center"?n+=(o-a)/2:r==="end"&&(n-=a);const c=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(c,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const o=this.measurementsCache[n];if(!o)return;const a=this.getSize(),i=this.getScrollOffset();if(r==="auto")if(o.end>=i+a-this.options.scrollPaddingEnd)r="end";else if(o.start<=i+this.options.scrollPaddingStart)r="start";else return[i,r];const c=r==="end"?o.end+this.options.scrollPaddingEnd:o.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(c,r,o.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:o})},this.scrollToIndex=(n,{align:r="auto",behavior:o}={})=>{o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let a=0;const i=10,c=d=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(n,d);if(!u){console.warn("Failed to get offset for index:",n);return}const[m,h]=u;this._scrollToOffset(m,{adjustments:void 0,behavior:o}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),g=this.getOffsetForIndex(n,h);if(!g){console.warn("Failed to get offset for index:",n);return}jC(g[0],p)||l(h)})},l=d=>{this.targetWindow&&(a++,a<i?this.targetWindow.requestAnimationFrame(()=>c(d)):console.warn(`Failed to scroll to index ${n} after ${i} attempts.`))};c(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let o;if(r.length===0)o=this.options.paddingStart;else if(this.options.lanes===1)o=((n=r[r.length-1])==null?void 0:n.end)??0;else{const a=Array(this.options.lanes).fill(null);let i=r.length-1;for(;i>=0&&a.some(c=>c===null);){const c=r[i];a[c.lane]===null&&(a[c.lane]=c.end),i--}o=Math.max(...a.filter(c=>c!==null))}return Math.max(o-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:o})=>{this.options.scrollToFn(n,{behavior:o,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(t)}}const Fm=(e,t,n,r)=>{for(;e<=t;){const o=(e+t)/2|0,a=n(o);if(a<r)e=o+1;else if(a>r)t=o-1;else return o}return e>0?e-1:0};function OC({measurements:e,outerSize:t,scrollOffset:n,lanes:r}){const o=e.length-1,a=l=>e[l].start;if(e.length<=r)return{startIndex:0,endIndex:o};let i=Fm(0,o,a,n),c=i;if(r===1)for(;c<o&&e[c].end<n+t;)c++;else if(r>1){const l=Array(r).fill(0);for(;c<o&&l.some(u=>u<n+t);){const u=e[c];l[u.lane]=u.end,c++}const d=Array(r).fill(n+t);for(;i>=0&&d.some(u=>u>=n);){const u=e[i];d[u.lane]=u.start,i--}i=Math.max(0,i-i%r),c=Math.min(o,c+(r-1-c%r))}return{startIndex:i,endIndex:c}}const el=typeof document<"u"?f.useLayoutEffect:f.useEffect;function IC(e){const t=f.useReducer(()=>({}),{})[1],n={...e,onChange:(o,a)=>{var i;a?et.flushSync(t):t(),(i=e.onChange)==null||i.call(e,o,a)}},[r]=f.useState(()=>new TC(n));return r.setOptions(n),el(()=>r._didMount(),[]),el(()=>r._willUpdate()),r}function PC(e){return IC({observeElementRect:MC,observeElementOffset:EC,scrollToFn:RC,...e})}function ks(){return ne(jn(t=>t.infos?.creators??[]))}const AC=void 0,qs=new Map,tl=async(e,t)=>{const n=t?typeof t=="number"?J.unix(t/1e3):J(t):J(),r=n.format("YYYY-MM-DD"),o=`${e}-${r}`,a=qs.get(o);if(a)return a;const i=(async()=>{const c=n.isSameOrAfter(J()),l=!t||c?"":`/${r}`,d=await fetch(`${AC}/api/currency/${e}${l}`);if(!d.ok)throw new Error(`Failed to fetch currency rates: ${d.status} ${d.statusText}`);return(await d.json()).rates})();return qs.set(o,i),i.finally(()=>{qs.delete(o)}),i},_C="CNY",$C="2025-11-19",LC={USD:.140638272054362,JPY:21.8347287950491,BGN:.237325567285524,CZK:2.93508069409052,DKK:.906249241596894,GBP:.107037980827569,HUF:46.712777575537,PLN:.514986045382842,RON:.617279456376653,SEK:1.33442543380658,CHF:.112037374105084,ISK:17.8619099623832,NOK:1.4237713869676,TRY:5.95408324232496,AUD:.216357238199248,BRL:.751037495449581,CAD:.197269748816891,CNY:1,HKD:1.09492780002427,IDR:2356.54896250455,ILS:.460077660478097,INR:12.4552845528455,KRW:205.752942604053,MXN:2.59387210290013,MYR:.585620677102294,NZD:.248258706467662,PHP:8.27351049629899,SGD:.183145249362941,THB:4.55879140880961,ZAR:2.42386846256522,EUR:.12134449702706},Xs={base:_C,date:$C,rates:LC},nl=qo()(qa((e,t)=>{const n=(a,i,c)=>{e(l=>{const d=l.data.filter(m=>!(m.date===c&&m.base===i)),u=[{rates:a,base:i,date:c},...d];return u.sort((m,h)=>J(h.date).valueOf()-J(m.date).valueOf()),{data:u}})},r=async()=>{const i=J(new Date).format("YYYY-MM-DD"),c=await tl(Ta);n(c,Ta,i)};Promise.resolve().then(()=>{r()});const o=(a,i,c,l)=>{const d=t(),u=J(l).format("YYYY-MM-DD");let m=1,h=!1,p=d.data.find(v=>v.date===u&&v.base===c);if(i===c)m=1,h=!0;else if(p?.rates[i])m=1/p.rates[i],h=!0;else{const v=d.data.find(y=>y.date===u);if(v?.rates[i]&&v?.rates[c])m=v.rates[c]/v.rates[i],h=!0,p=v;else{const y=d.data.find(b=>b.base===c);if(y?.rates[i])m=1/y.rates[i],h=!1;else if(d.data.length>0){const b=d.data[0];b.rates[i]&&b.rates[c]&&(m=b.rates[c]/b.rates[i],h=!1)}}}const g=a*m,x=(async()=>{if(i===c)return a;if(p?.rates[i])return p.base===c?a*(1/p.rates[i]):a*(p.rates[c]/p.rates[i]);const v=await tl(c,l),y=J(l).format("YYYY-MM-DD");n(v,c,y);let b=m;return v[i]&&(b=1/v[i]),a*b})();return{predict:g,accurate:h,finished:x}};return{data:[{rates:Xs.rates,base:Xs.base,date:Xs.date}],refresh:r,convert:o}},{name:"currency-store",storage:Xa(()=>localStorage),version:0,partialize(e){return{data:e.data.slice(0,20)}}})),er=()=>{const[e,t=[],n=[]]=ne(jn(v=>[v.infos?.meta.baseCurrency??Ta,v.infos?.meta.customCurrencies,v.infos?.meta.quickCurrencies])),r=V(),o=f.useMemo(()=>[...t.map(v=>({...v,label:v.name})),...Co.map(v=>({...v,label:r(v.labelKey)}))],[t,r]),a=o.find(v=>v.id===e),i=f.useCallback(async v=>{Ce.getState().currentBookId&&await ne.getState().updateGlobalMeta(b=>{b.baseCurrency=v;const w=ke.getState().id;return b.personal?.[w]&&(b.personal[w].rates=void 0),b})},[]),[c,l]=f.useState(!1),d=f.useCallback(async(v,y)=>{if(y&&y<=0)throw new Error("rate must larger than 0");await ne.getState().updatePersonalMeta(b=>{const w=[...Object.entries(b.rates??{}).filter(([C])=>C!==v),[v,y]].filter(([,C])=>C!==void 0);return b.rates=w.length===0?void 0:Object.fromEntries(w),b}),l(b=>!b)},[]),u=f.useCallback((v,y,b,w)=>{const C=t.find(D=>D.id===y);if(C){const D=v/C.rateToBase;return{predict:D,accurate:!0,finished:Promise.resolve(D)}}const S=ke.getState().id,N=ne.getState().infos?.meta.personal?.[S]?.rates,j=(()=>{if(N?.[y])return N[y];if(N?.[b])return 1/N?.[b]})();if(j){const D=v/j;return{predict:D,accurate:!0,finished:Promise.resolve(D)}}const k=nl.getState().convert;return k(v,y,b,w)},[c,t]),m=f.useCallback(async()=>nl.getState().refresh().finally(()=>{l(v=>!v)}),[]),h=f.useCallback(v=>{const y=v.id??Qt();return ne.getState().updateGlobalMeta(b=>{const w=b.customCurrencies??[],C=w.findIndex(S=>S.id===y);return C===-1?w.push({...v,id:y}):w[C]={...v,id:y},{...b,customCurrencies:w}})},[]),p=f.useCallback(v=>ne.getState().updateGlobalMeta(y=>{const b=y.customCurrencies??[],w=b.findIndex(C=>C.id===v);return b.splice(w,1),{...y,customCurrencies:b}}),[]),g=f.useMemo(()=>n.map(v=>o.find(y=>y.id===v)).filter(v=>v!==void 0),[n,o]),x=f.useCallback(v=>ne.getState().updateGlobalMeta(y=>({...y,quickCurrencies:v})),[]);return{baseCurrency:a,setBaseCurrency:i,convert:u,setRate:d,refresh:m,customCurrencies:t,updateCustomCurrency:h,deleteCustomCurrency:p,allCurrencies:o,quickCurrencies:g,updateQuickCurrencies:x}};function Mn(){const[e=[],t=[]]=ne(jn(i=>{const c=ke.getState().id;return[i.infos?.meta.tags,i.infos?.meta.personal?.[c]?.tagGroups]})),n=f.useCallback((i,c)=>ne.getState().updateGlobalMeta(l=>{if(c===void 0)return l.tags=l.tags.filter(u=>u.id!==i),l;const d=l.tags?.findIndex(u=>u.id===i)??-1;return d===-1?{...l,tags:[...l.tags??[],{...c,id:i}]}:(l.tags[d]={...c,id:i},l)}),[]),r=f.useMemo(()=>{const i=t.map(l=>({...l,tags:(l.tagIds?.map(d=>e.find(u=>u.id===d))??[]).filter(d=>d!==void 0)})),c=e.filter(l=>t.every(d=>!d.tagIds?.includes(l.id)));return[...i,{name:Wn("un-grouped"),id:"un-group",tags:c,color:"gray",tagIds:c.map(l=>l.id)}]},[t,e]),o=f.useCallback((i,c)=>ne.getState().updatePersonalMeta(l=>{if(c===void 0)return l.tagGroups=l.tagGroups?.filter(m=>m.id!==i),l;const d=l.tagGroups?.findIndex(m=>m.id===i)??-1;if(d===-1)return{...l,tagGroups:[...l.tagGroups??[],{...c,id:i}]};const u=l.tagGroups??[];return u[d]={...c,id:i},l}),[]),a=f.useCallback(i=>ne.getState().updatePersonalMeta(c=>{const l=c.tagGroups?.find(u=>u.id===i);if(!l)return c;const d=[l,...c.tagGroups?.filter(u=>u.id!==i)??[]];return{...c,tagGroups:d}}),[]);return{tags:e,updateTag:n,grouped:r,updateGroup:o,topUpGroup:a}}let _n,Pa;const Wm=()=>{if(Pa)return;const e=Ce.getState().currentBookId;if(!e)return;const t=()=>{const r=Date.now();hn.predict(e,"category").then(o=>{_n={..._n,predictTime:r,category:o}}),hn.predict(e,"comment").then(o=>{_n={..._n,predictTime:r,comment:o}})},n=ke.getState().id;Pa=setInterval(t,60*1e3),hn.learn(e,[n]).then(t)},rl=()=>_n,BC=()=>{clearInterval(Pa),_n=void 0};function FC({checked:e,children:t,onCheckedChange:n,className:r,...o}){return s.jsx("button",{type:"button",...o,"data-state":e?"checked":"uncheck",className:_("rounded-md border py-1 px-2 flex items-center justify-center whitespace-nowrap cursor-pointer","data-[state=checked]:bg-slate-700 data-[state=checked]:text-white bg-stone-200 dark:bg-stone-500 dark:data-[state=checked]:bg-slate-700 text-light-900",r),onMouseDown:()=>{n?.(!e)},children:t})}function Et({...e}){return s.jsx($y,{"data-slot":"select",...e})}function En({...e}){return s.jsx(By,{"data-slot":"select-value",...e})}function Dt({className:e,size:t="default",children:n,...r}){return s.jsxs(Ly,{"data-slot":"select-trigger","data-size":t,className:_("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,s.jsx(Fy,{asChild:!0,children:s.jsx(Ns,{className:"size-4 opacity-50"})})]})}function zt({className:e,children:t,position:n="popper",align:r="center",...o}){return s.jsx(Wy,{children:s.jsxs(zy,{"data-slot":"select-content",className:_("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,align:r,...o,children:[s.jsx(WC,{}),s.jsx(Hy,{className:_("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(zC,{})]})})}function Re({className:e,children:t,...n}){return s.jsxs(Yy,{"data-slot":"select-item",className:_("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(Vy,{children:s.jsx(Dr,{className:"size-4"})})}),s.jsx(Uy,{children:t})]})}function WC({className:e,...t}){return s.jsx(Gy,{"data-slot":"select-scroll-up-button",className:_("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(T0,{className:"size-4"})})}function zC({className:e,...t}){return s.jsx(Ky,{"data-slot":"select-scroll-down-button",className:_("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Ns,{className:"size-4"})})}const HC=e=>pn({name:We().check(Nr(50,{message:e("max-name-length-limit",{n:50})})),preferCurrency:Xt(We())}),YC=({edit:e,onConfirm:t,onCancel:n})=>{const r=V(),{quickCurrencies:o}=er(),a=f.useMemo(()=>HC(r),[r]),i=Br({resolver:Fr(a),defaultValues:e}),c=e===void 0,l=()=>{const d=u=>{t?.({...u,id:e?.id})};i.handleSubmit(d)()};return s.jsx(Wr,{...i,children:s.jsxs("div",{className:"w-full h-full flex flex-col",children:[s.jsx("div",{className:"px-4 text-center",children:r(c?"add-new-tag":"edit-tag")}),s.jsxs("div",{className:"px-4 flex flex-1 flex-col gap-4 overflow-y-auto",children:[s.jsx(xe,{control:i.control,name:"name",render:({field:d})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("tag-name")}),s.jsx(ye,{children:s.jsx(at,{...d,maxLength:50})})]})}),s.jsxs(es,{className:"group",children:[s.jsx(ts,{children:s.jsxs("div",{className:"text-xs opacity-60 flex items-center gap-1",children:[r("more-tag-settings"),s.jsx("i",{className:"w-4 h-4 icon-[mdi--chevron-right] transition-all rotate-90 group-[[data-state=closed]]:rotate-0"})]})}),s.jsx(Qo,{children:s.jsx(xe,{control:i.control,name:"preferCurrency",render:({field:d})=>s.jsxs(ve,{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"max-w-[50%]",children:[s.jsx(Ne,{children:r("prefer-currency")}),s.jsx($n,{children:r("prefer-currency-desc")})]}),s.jsx(ye,{children:s.jsxs(Et,{value:d.value,onValueChange:d.onChange,children:[s.jsx(Dt,{children:s.jsx("div",{children:o.find(u=>u.id===d.value)?.label??r("none")})}),s.jsx(zt,{children:o.length>0?o.map(({id:u,label:m})=>s.jsx(Re,{value:u,children:s.jsx("div",{children:m})},u)):s.jsx("div",{className:"text-sm opacity-60",children:r("empty-currency-quick-entries")})})]})})]})})})]})]}),s.jsxs("div",{className:"flex justify-between items-center px-4",children:[s.jsx("div",{children:!c&&s.jsx(z,{variant:"destructive",onClick:()=>{t?.("delete")},children:r("delete")})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(z,{onClick:n,children:r("cancel")}),s.jsx(z,{onClick:l,children:r("confirm")})]})]})]})})},[UC,VC]=we(YC,{dialogTitle:"Edit Tag Group",dialogModalClose:!1,fade:!0,swipe:!1,contentClassName:"w-[350px] h-[480px] max-h-[55vh] py-4"}),Un=Uv,Vn=Vv,zm=Ru,GC=f.forwardRef(({className:e,inset:t,children:n,...r},o)=>s.jsxs(Lu,{ref:o,className:_("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",e),...r,children:[n,s.jsx(Ui,{className:"ml-auto"})]}));GC.displayName=Lu.displayName;const KC=f.forwardRef(({className:e,...t},n)=>s.jsx(Bu,{ref:n,className:_("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...t}));KC.displayName=Bu.displayName;const Cn=f.forwardRef(({className:e,sideOffset:t=4,...n},r)=>s.jsx(Ru,{children:s.jsx(Tu,{ref:r,sideOffset:t,className:_("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",e),...n})}));Cn.displayName=Tu.displayName;const Aa=f.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Iu,{ref:r,className:_("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",e),...n}));Aa.displayName=Iu.displayName;const Or=f.forwardRef(({className:e,children:t,checked:n,...r},o)=>s.jsxs(Pu,{ref:o,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:n,...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(_u,{children:s.jsx(Dr,{className:"h-4 w-4"})})}),t]}));Or.displayName=Pu.displayName;const qC=f.forwardRef(({className:e,children:t,...n},r)=>s.jsxs(Au,{ref:r,className:_("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(_u,{children:s.jsx(Om,{className:"h-2 w-2 fill-current"})})}),t]}));qC.displayName=Au.displayName;const Hm=f.forwardRef(({className:e,inset:t,...n},r)=>s.jsx(Ou,{ref:r,className:_("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...n}));Hm.displayName=Ou.displayName;const XC=f.forwardRef(({className:e,...t},n)=>s.jsx($u,{ref:n,className:_("-mx-1 my-1 h-px bg-muted",e),...t}));XC.displayName=$u.displayName;const It=f.forwardRef(({className:e,...t},n)=>s.jsx(_i,{className:_("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:n,children:s.jsx(Ff,{className:_("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));It.displayName=_i.displayName;const JC=e=>pn({name:We().check(Nr(50,{message:e("max-name-length-limit",{n:50})})),color:We(),singleSelect:Xt(uc()),required:Xt(uc()),tagIds:hr(We())}),ZC=[{name:"red",light:"#FF5F57",dark:"#FF6961"},{name:"orange",light:"#FFBD2E",dark:"#FFB340"},{name:"yellow",light:"#B28200",dark:"#FFD426"},{name:"green",light:"#28C941",dark:"#32D74B"},{name:"blue",light:"#007AFF",dark:"#0A84FF"},{name:"purple",light:"#A550A7",dark:"#BF5AF2"},{name:"gray",light:"#8E8E93",dark:"#98989D"}],QC=({edit:e,onConfirm:t,onCancel:n})=>{const r=V(),{tags:o}=Mn(),a=f.useMemo(()=>JC(r),[r]),i=Br({resolver:Fr(a),defaultValues:e??{color:"gray"}}),c=e===void 0,l=()=>{const u=m=>{t?.({...m,id:e?.id})};i.handleSubmit(u)()},d=u=>u?.map(h=>o.find(p=>p.id===h)).filter(h=>h!==void 0).map(h=>h.name)?.join(",")??r("none");return s.jsx(Wr,{...i,children:s.jsxs("div",{className:"w-full h-full flex flex-col",children:[s.jsx("div",{className:"px-4 text-center",children:r(c?"add-new-tag-group":"edit-tag-group")}),s.jsxs("div",{className:"px-4 flex flex-1 flex-col gap-4 overflow-y-auto",children:[s.jsx(xe,{control:i.control,name:"name",render:({field:u})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("tag-group-name")}),s.jsx(ye,{children:s.jsx(at,{...u,maxLength:50})})]})}),s.jsx(xe,{control:i.control,name:"tagIds",render:({field:u})=>s.jsxs(ve,{className:"flex justify-between items-center",children:[s.jsx(Ne,{className:"m-0",children:r("group-tags")}),s.jsx(ye,{children:s.jsxs(Un,{children:[s.jsx(Vn,{asChild:!0,children:s.jsx(z,{variant:"outline",className:"px-2 md:px-4 py-2 text-xs md:text-sm",children:s.jsx("div",{className:" max-w-[200px] truncate",children:d(u.value)})})}),s.jsx(Cn,{className:"w-56",align:"end",children:o.map(m=>s.jsx(Or,{onSelect:h=>h.preventDefault(),checked:u.value?.some(h=>h===m.id),onCheckedChange:h=>{const p=h?[...u.value??[],m.id]:u.value?.filter(g=>g!==m.id);u.onChange(p)},children:m.name},m.id))})]})})]})}),s.jsx(xe,{control:i.control,name:"color",render:({field:u})=>s.jsxs(ve,{className:"flex justify-between items-center",children:[s.jsx(Ne,{className:"m-0",children:r("tag-group-color")}),s.jsx(ye,{children:s.jsx(ej,{value:u.value,onChange:u.onChange})})]})}),s.jsxs(es,{className:"group",children:[s.jsx(ts,{children:s.jsxs("div",{className:"text-xs opacity-60 flex items-center gap-1",children:[r("more-tag-settings"),s.jsx("i",{className:"w-4 h-4 icon-[mdi--chevron-right] transition-all rotate-90 group-[[data-state=closed]]:rotate-0"})]})}),s.jsxs(Qo,{children:[s.jsx(xe,{control:i.control,name:"singleSelect",render:({field:u})=>s.jsxs(ve,{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:r("is-single-select")}),s.jsx($n,{children:r("single-select-desc")})]}),s.jsx(ye,{children:s.jsx(It,{checked:u.value??!1,onCheckedChange:u.onChange})})]})}),s.jsx(xe,{control:i.control,name:"required",render:({field:u})=>s.jsxs(ve,{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx(Ne,{children:r("is-required-select")}),s.jsx($n,{children:r("required-select-desc")})]}),s.jsx(ye,{children:s.jsx(It,{checked:u.value??!1,onCheckedChange:u.onChange})})]})})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center px-4",children:[s.jsx("div",{children:!c&&s.jsx(z,{variant:"destructive",onClick:()=>{t?.("delete")},children:r("delete")})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(z,{onClick:n,children:r("cancel")}),s.jsx(z,{onClick:l,children:r("confirm")})]})]})]})})};function ej({className:e,value:t,onChange:n}){return s.jsx("div",{className:_("flex gap-3",e),children:ZC.map(r=>s.jsx("button",{type:"button",onClick:()=>n?.(r.name),className:_("w-4 h-4 rounded-full cursor-pointer with-tag-color bg-[var(--current-tag-color)] ring-2 ring-transparent",`tag-${r.name}`,t===r.name&&"ring-foreground")},r.name))})}const[tj,nj]=we(QC,{dialogTitle:"Edit Tag Group",dialogModalClose:!1,fade:!0,swipe:!1,contentClassName:"w-[350px] h-[480px] max-h-[55vh] py-4"}),rj={layout:{duration:.2,ease:"easeInOut"}};function oj({onCancel:e}){const t=V(),{updateTag:n,grouped:r,updateGroup:o,topUpGroup:a}=Mn(),i=async u=>{const m=await nj(u);if(m==="delete"){u?.id&&o(u?.id,void 0);return}await o(u?.id??Qt(),m)},c=async u=>{const m=await VC(u);if(m==="delete"){u?.id&&n(u?.id,void 0);return}await n(u?.id??Qt(),m)},[l,d]=f.useState(!1);return s.jsxs(Te,{onBack:e,className:"overflow-hidden h-full",title:t("edit-tags"),right:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{onClick:()=>c(),variant:"secondary",children:s.jsx("i",{className:"icon-[mdi--tag-plus-outline]"})}),s.jsx(z,{onClick:()=>i(),children:t("add-new-tag-group")})]}),children:[s.jsx("div",{className:"flex items-center justify-between px-2",children:s.jsx("div",{className:"px-2 text-xs text-foreground/80",children:t("click-tag-to-edit")})}),s.jsx("div",{className:"flex-1 overflow-y-auto flex flex-col p-2 gap-2",children:s.jsx(Up,{initial:!1,children:r.map((u,m)=>s.jsxs(id.div,{className:"border rounded-md w-full text-sm bg-background",layout:"position",initial:!1,transition:l?rj:{duration:0},children:[s.jsxs("div",{className:_("flex justify-between items-center with-tag-color px-2 py-1 rounded-t-md bg-[var(--current-tag-color)]",`tag-${u.color}`),children:[s.jsx("div",{className:"text-white",children:u.id==="un-group"?t("un-grouped"):u.name}),s.jsx("div",{className:"flex items-center gap-1",children:u.id!=="un-group"&&s.jsxs(s.Fragment,{children:[m!==0&&s.jsx(z,{size:"sm",variant:"ghost",onClick:async()=>{d(!0),await Promise.resolve(),a(u.id)},children:s.jsx("i",{className:"icon-[mdi--arrow-collapse-up]"})}),s.jsx(z,{variant:"ghost",size:"sm",onClick:()=>i(u),children:s.jsx("i",{className:"icon-[mdi--settings]"})})]})})]}),s.jsxs("div",{className:"flex flex-wrap items-center p-2 gap-2",children:[u.tags.map(h=>s.jsx(FC,{className:"gap-1 cursor-grab active:cursor-grabbing",onClick:()=>c(h),children:s.jsxs("span",{children:["#",h.name]})},h.id)),u.tags.length===0&&s.jsx("div",{children:t("none")})]})]},u.id))})}),s.jsx(UC,{}),s.jsx(tj,{})]})}const[sj,Ym]=we(oj,{dialogTitle:"Edit Tag",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px] overflow-hidden"});function aj(){const e=V();return s.jsx("div",{className:"edit-tag",children:s.jsx(z,{onClick:()=>{Ym()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--tag-outline] size-5"}),e("edit-tags")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})})})}function ij(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>r=>{t.forEach(o=>o(r))},t)}const Ms=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function tr(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function Ki(e){return"nodeType"in e}function Le(e){var t,n;return e?tr(e)?e:Ki(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function qi(e){const{Document:t}=Le(e);return e instanceof t}function Qr(e){return tr(e)?!1:e instanceof Le(e).HTMLElement}function Um(e){return e instanceof Le(e).SVGElement}function nr(e){return e?tr(e)?e.document:Ki(e)?qi(e)?e:Qr(e)||Um(e)?e.ownerDocument:document:document:document}const ut=Ms?f.useLayoutEffect:f.useEffect;function Es(e){const t=f.useRef(e);return ut(()=>{t.current=e}),f.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}function cj(){const e=f.useRef(null),t=f.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),n=f.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Ir(e,t){t===void 0&&(t=[e]);const n=f.useRef(e);return ut(()=>{n.current!==e&&(n.current=e)},t),n}function eo(e,t){const n=f.useRef();return f.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Fo(e){const t=Es(e),n=f.useRef(null),r=f.useCallback(o=>{o!==n.current&&t?.(o,n.current),n.current=o},[]);return[n,r]}function Wo(e){const t=f.useRef();return f.useEffect(()=>{t.current=e},[e]),t.current}let Js={};function to(e,t){return f.useMemo(()=>{if(t)return t;const n=Js[e]==null?0:Js[e]+1;return Js[e]=n,e+"-"+n},[e,t])}function Vm(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return r.reduce((a,i)=>{const c=Object.entries(i);for(const[l,d]of c){const u=a[l];u!=null&&(a[l]=u+e*d)}return a},{...t})}}const Bn=Vm(1),zo=Vm(-1);function lj(e){return"clientX"in e&&"clientY"in e}function Ds(e){if(!e)return!1;const{KeyboardEvent:t}=Le(e.target);return t&&e instanceof t}function dj(e){if(!e)return!1;const{TouchEvent:t}=Le(e.target);return t&&e instanceof t}function Ho(e){if(dj(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return lj(e)?{x:e.clientX,y:e.clientY}:null}const Nt=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Nt.Translate.toString(e),Nt.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),ol="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function uj(e){return e.matches(ol)?e:e.querySelector(ol)}const fj={display:"none"};function mj(e){let{id:t,value:n}=e;return $.createElement("div",{id:t,style:fj},n)}function hj(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return $.createElement("div",{id:t,style:o,role:"status","aria-live":r,"aria-atomic":!0},n)}function pj(){const[e,t]=f.useState("");return{announce:f.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const Gm=f.createContext(null);function gj(e){const t=f.useContext(Gm);f.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function xj(){const[e]=f.useState(()=>new Set),t=f.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[f.useCallback(r=>{let{type:o,event:a}=r;e.forEach(i=>{var c;return(c=i[o])==null?void 0:c.call(i,a)})},[e]),t]}const vj={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},yj={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function bj(e){let{announcements:t=yj,container:n,hiddenTextDescribedById:r,screenReaderInstructions:o=vj}=e;const{announce:a,announcement:i}=pj(),c=to("DndLiveRegion"),[l,d]=f.useState(!1);if(f.useEffect(()=>{d(!0)},[]),gj(f.useMemo(()=>({onDragStart(m){let{active:h}=m;a(t.onDragStart({active:h}))},onDragMove(m){let{active:h,over:p}=m;t.onDragMove&&a(t.onDragMove({active:h,over:p}))},onDragOver(m){let{active:h,over:p}=m;a(t.onDragOver({active:h,over:p}))},onDragEnd(m){let{active:h,over:p}=m;a(t.onDragEnd({active:h,over:p}))},onDragCancel(m){let{active:h,over:p}=m;a(t.onDragCancel({active:h,over:p}))}}),[a,t])),!l)return null;const u=$.createElement($.Fragment,null,$.createElement(mj,{id:r,value:o.draggable}),$.createElement(hj,{id:c,announcement:i}));return n?et.createPortal(u,n):u}var Me;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Me||(Me={}));function Yo(){}function Fn(e,t){return f.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Km(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ft=Object.freeze({x:0,y:0});function qm(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function wj(e,t){const n=Ho(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function Xm(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Cj(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function sl(e){let{left:t,top:n,height:r,width:o}=e;return[{x:t,y:n},{x:t+o,y:n},{x:t,y:n+r},{x:t+o,y:n+r}]}function jj(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function al(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const Nj=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=al(t,t.left,t.top),a=[];for(const i of r){const{id:c}=i,l=n.get(c);if(l){const d=qm(al(l),o);a.push({id:c,data:{droppableContainer:i,value:d}})}}return a.sort(Xm)},Sj=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=sl(t),a=[];for(const i of r){const{id:c}=i,l=n.get(c);if(l){const d=sl(l),u=o.reduce((h,p,g)=>h+qm(d[g],p),0),m=Number((u/4).toFixed(4));a.push({id:c,data:{droppableContainer:i,value:m}})}}return a.sort(Xm)};function kj(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=o-r,c=a-n;if(r<o&&n<a){const l=t.width*t.height,d=e.width*e.height,u=i*c,m=u/(l+d-u);return Number(m.toFixed(4))}return 0}const Mj=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const o=[];for(const a of r){const{id:i}=a,c=n.get(i);if(c){const l=kj(c,t);l>0&&o.push({id:i,data:{droppableContainer:a,value:l}})}}return o.sort(Cj)};function Ej(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function Jm(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ft}function Dj(e){return function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.reduce((i,c)=>({...i,top:i.top+e*c.y,bottom:i.bottom+e*c.y,left:i.left+e*c.x,right:i.right+e*c.x}),{...n})}}const Rj=Dj(1);function Zm(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function Tj(e,t,n){const r=Zm(t);if(!r)return e;const{scaleX:o,scaleY:a,x:i,y:c}=r,l=e.left-i-(1-o)*parseFloat(n),d=e.top-c-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,m=a?e.height/a:e.height;return{width:u,height:m,top:d,right:l+u,bottom:d+m,left:l}}const Oj={ignoreTransform:!1};function rr(e,t){t===void 0&&(t=Oj);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:d,transformOrigin:u}=Le(e).getComputedStyle(e);d&&(n=Tj(n,d,u))}const{top:r,left:o,width:a,height:i,bottom:c,right:l}=n;return{top:r,left:o,width:a,height:i,bottom:c,right:l}}function il(e){return rr(e,{ignoreTransform:!0})}function Ij(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function Pj(e,t){return t===void 0&&(t=Le(e).getComputedStyle(e)),t.position==="fixed"}function Aj(e,t){t===void 0&&(t=Le(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const a=t[o];return typeof a=="string"?n.test(a):!1})}function Xi(e,t){const n=[];function r(o){if(t!=null&&n.length>=t||!o)return n;if(qi(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!Qr(o)||Um(o)||n.includes(o))return n;const a=Le(e).getComputedStyle(o);return o!==e&&Aj(o,a)&&n.push(o),Pj(o,a)?n:r(o.parentNode)}return e?r(e):n}function Qm(e){const[t]=Xi(e,1);return t??null}function Zs(e){return!Ms||!e?null:tr(e)?e:Ki(e)?qi(e)||e===nr(e).scrollingElement?window:Qr(e)?e:null:null}function eh(e){return tr(e)?e.scrollX:e.scrollLeft}function th(e){return tr(e)?e.scrollY:e.scrollTop}function _a(e){return{x:eh(e),y:th(e)}}var De;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(De||(De={}));function nh(e){return!Ms||!e?!1:e===document.scrollingElement}function rh(e){const t={x:0,y:0},n=nh(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:o,isLeft:a,isBottom:i,isRight:c,maxScroll:r,minScroll:t}}const _j={x:.2,y:.2};function $j(e,t,n,r,o){let{top:a,left:i,right:c,bottom:l}=n;r===void 0&&(r=10),o===void 0&&(o=_j);const{isTop:d,isBottom:u,isLeft:m,isRight:h}=rh(e),p={x:0,y:0},g={x:0,y:0},x={height:t.height*o.y,width:t.width*o.x};return!d&&a<=t.top+x.height?(p.y=De.Backward,g.y=r*Math.abs((t.top+x.height-a)/x.height)):!u&&l>=t.bottom-x.height&&(p.y=De.Forward,g.y=r*Math.abs((t.bottom-x.height-l)/x.height)),!h&&c>=t.right-x.width?(p.x=De.Forward,g.x=r*Math.abs((t.right-x.width-c)/x.width)):!m&&i<=t.left+x.width&&(p.x=De.Backward,g.x=r*Math.abs((t.left+x.width-i)/x.width)),{direction:p,speed:g}}function Lj(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function oh(e){return e.reduce((t,n)=>Bn(t,_a(n)),ft)}function Bj(e){return e.reduce((t,n)=>t+eh(n),0)}function Fj(e){return e.reduce((t,n)=>t+th(n),0)}function sh(e,t){if(t===void 0&&(t=rr),!e)return;const{top:n,left:r,bottom:o,right:a}=t(e);Qm(e)&&(o<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Wj=[["x",["left","right"],Bj],["y",["top","bottom"],Fj]];class Ji{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Xi(n),o=oh(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,c]of Wj)for(const l of i)Object.defineProperty(this,l,{get:()=>{const d=c(r),u=o[a]-d;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class br{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var o;(o=this.target)==null||o.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function zj(e){const{EventTarget:t}=Le(e);return e instanceof t?e:nr(e)}function Qs(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Je;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Je||(Je={}));function cl(e){e.preventDefault()}function Hj(e){e.stopPropagation()}var de;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(de||(de={}));const ah={start:[de.Space,de.Enter],cancel:[de.Esc],end:[de.Space,de.Enter,de.Tab]},Yj=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case de.Right:return{...n,x:n.x+25};case de.Left:return{...n,x:n.x-25};case de.Down:return{...n,y:n.y+25};case de.Up:return{...n,y:n.y-25}}};class Rs{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new br(nr(n)),this.windowListeners=new br(Le(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Je.Resize,this.handleCancel),this.windowListeners.add(Je.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Je.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&sh(r),n(ft)}handleKeyDown(t){if(Ds(t)){const{active:n,context:r,options:o}=this.props,{keyboardCodes:a=ah,coordinateGetter:i=Yj,scrollBehavior:c="smooth"}=o,{code:l}=t;if(a.end.includes(l)){this.handleEnd(t);return}if(a.cancel.includes(l)){this.handleCancel(t);return}const{collisionRect:d}=r.current,u=d?{x:d.left,y:d.top}:ft;this.referenceCoordinates||(this.referenceCoordinates=u);const m=i(t,{active:n,context:r.current,currentCoordinates:u});if(m){const h=zo(m,u),p={x:0,y:0},{scrollableAncestors:g}=r.current;for(const x of g){const v=t.code,{isTop:y,isRight:b,isLeft:w,isBottom:C,maxScroll:S,minScroll:N}=rh(x),j=Lj(x),k={x:Math.min(v===de.Right?j.right-j.width/2:j.right,Math.max(v===de.Right?j.left:j.left+j.width/2,m.x)),y:Math.min(v===de.Down?j.bottom-j.height/2:j.bottom,Math.max(v===de.Down?j.top:j.top+j.height/2,m.y))},D=v===de.Right&&!b||v===de.Left&&!w,R=v===de.Down&&!C||v===de.Up&&!y;if(D&&k.x!==m.x){const O=x.scrollLeft+h.x,L=v===de.Right&&O<=S.x||v===de.Left&&O>=N.x;if(L&&!h.y){x.scrollTo({left:O,behavior:c});return}L?p.x=x.scrollLeft-O:p.x=v===de.Right?x.scrollLeft-S.x:x.scrollLeft-N.x,p.x&&x.scrollBy({left:-p.x,behavior:c});break}else if(R&&k.y!==m.y){const O=x.scrollTop+h.y,L=v===de.Down&&O<=S.y||v===de.Up&&O>=N.y;if(L&&!h.x){x.scrollTo({top:O,behavior:c});return}L?p.y=x.scrollTop-O:p.y=v===de.Down?x.scrollTop-S.y:x.scrollTop-N.y,p.y&&x.scrollBy({top:-p.y,behavior:c});break}}this.handleMove(t,Bn(zo(m,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Rs.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=ah,onActivation:o}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const c=a.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function ll(e){return!!(e&&"distance"in e)}function dl(e){return!!(e&&"delay"in e)}class Zi{constructor(t,n,r){var o;r===void 0&&(r=zj(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=nr(i),this.documentListeners=new br(this.document),this.listeners=new br(r),this.windowListeners=new br(Le(i)),this.initialCoordinates=(o=Ho(a))!=null?o:ft,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Je.Resize,this.handleCancel),this.windowListeners.add(Je.DragStart,cl),this.windowListeners.add(Je.VisibilityChange,this.handleCancel),this.windowListeners.add(Je.ContextMenu,cl),this.documentListeners.add(Je.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(dl(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ll(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:o}=this.props;o(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Je.Click,Hj,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Je.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:o,props:a}=this,{onMove:i,options:{activationConstraint:c}}=a;if(!o)return;const l=(n=Ho(t))!=null?n:ft,d=zo(o,l);if(!r&&c){if(ll(c)){if(c.tolerance!=null&&Qs(d,c.tolerance))return this.handleCancel();if(Qs(d,c.distance))return this.handleStart()}if(dl(c)&&Qs(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===de.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const Uj={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ts extends Zi{constructor(t){const{event:n}=t,r=nr(n.target);super(t,Uj,r)}}Ts.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const Vj={move:{name:"mousemove"},end:{name:"mouseup"}};var $a;(function(e){e[e.RightClick=2]="RightClick"})($a||($a={}));class Gj extends Zi{constructor(t){super(t,Vj,nr(t.event.target))}}Gj.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===$a.RightClick?!1:(r?.({event:n}),!0)}}];const ea={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Qi extends Zi{constructor(t){super(t,ea)}static setup(){return window.addEventListener(ea.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ea.move.name,t)};function t(){}}}Qi.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:o}=n;return o.length>1?!1:(r?.({event:n}),!0)}}];var wr;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(wr||(wr={}));var Uo;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Uo||(Uo={}));function Kj(e){let{acceleration:t,activator:n=wr.Pointer,canScroll:r,draggingRect:o,enabled:a,interval:i=5,order:c=Uo.TreeOrder,pointerCoordinates:l,scrollableAncestors:d,scrollableAncestorRects:u,delta:m,threshold:h}=e;const p=Xj({delta:m,disabled:!a}),[g,x]=cj(),v=f.useRef({x:0,y:0}),y=f.useRef({x:0,y:0}),b=f.useMemo(()=>{switch(n){case wr.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case wr.DraggableRect:return o}},[n,o,l]),w=f.useRef(null),C=f.useCallback(()=>{const N=w.current;if(!N)return;const j=v.current.x*y.current.x,k=v.current.y*y.current.y;N.scrollBy(j,k)},[]),S=f.useMemo(()=>c===Uo.TreeOrder?[...d].reverse():d,[c,d]);f.useEffect(()=>{if(!a||!d.length||!b){x();return}for(const N of S){if(r?.(N)===!1)continue;const j=d.indexOf(N),k=u[j];if(!k)continue;const{direction:D,speed:R}=$j(N,k,b,t,h);for(const O of["x","y"])p[O][D[O]]||(R[O]=0,D[O]=0);if(R.x>0||R.y>0){x(),w.current=N,g(C,i),v.current=R,y.current=D;return}}v.current={x:0,y:0},y.current={x:0,y:0},x()},[t,C,r,x,a,i,JSON.stringify(b),JSON.stringify(p),g,d,S,u,JSON.stringify(h)])}const qj={x:{[De.Backward]:!1,[De.Forward]:!1},y:{[De.Backward]:!1,[De.Forward]:!1}};function Xj(e){let{delta:t,disabled:n}=e;const r=Wo(t);return eo(o=>{if(n||!r||!o)return qj;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[De.Backward]:o.x[De.Backward]||a.x===-1,[De.Forward]:o.x[De.Forward]||a.x===1},y:{[De.Backward]:o.y[De.Backward]||a.y===-1,[De.Forward]:o.y[De.Forward]||a.y===1}}},[n,t,r])}function Jj(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return eo(o=>{var a;return t==null?null:(a=r??o)!=null?a:null},[r,t])}function Zj(e,t){return f.useMemo(()=>e.reduce((n,r)=>{const{sensor:o}=r,a=o.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var Pr;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Pr||(Pr={}));var La;(function(e){e.Optimized="optimized"})(La||(La={}));const ul=new Map;function Qj(e,t){let{dragging:n,dependencies:r,config:o}=t;const[a,i]=f.useState(null),{frequency:c,measure:l,strategy:d}=o,u=f.useRef(e),m=v(),h=Ir(m),p=f.useCallback(function(y){y===void 0&&(y=[]),!h.current&&i(b=>b===null?y:b.concat(y.filter(w=>!b.includes(w))))},[h]),g=f.useRef(null),x=eo(y=>{if(m&&!n)return ul;if(!y||y===ul||u.current!==e||a!=null){const b=new Map;for(let w of e){if(!w)continue;if(a&&a.length>0&&!a.includes(w.id)&&w.rect.current){b.set(w.id,w.rect.current);continue}const C=w.node.current,S=C?new Ji(l(C),C):null;w.rect.current=S,S&&b.set(w.id,S)}return b}return y},[e,a,n,m,l]);return f.useEffect(()=>{u.current=e},[e]),f.useEffect(()=>{m||p()},[n,m]),f.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),f.useEffect(()=>{m||typeof c!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},c))},[c,m,p,...r]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:a!=null};function v(){switch(d){case Pr.Always:return!1;case Pr.BeforeDragging:return n;default:return!n}}}function ec(e,t){return eo(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function eN(e,t){return ec(e,t)}function tN(e){let{callback:t,disabled:n}=e;const r=Es(t),o=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return f.useEffect(()=>()=>o?.disconnect(),[o]),o}function Os(e){let{callback:t,disabled:n}=e;const r=Es(t),o=f.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return f.useEffect(()=>()=>o?.disconnect(),[o]),o}function nN(e){return new Ji(rr(e),e)}function fl(e,t,n){t===void 0&&(t=nN);const[r,o]=f.useState(null);function a(){o(l=>{if(!e)return null;if(e.isConnected===!1){var d;return(d=l??n)!=null?d:null}const u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const i=tN({callback(l){if(e)for(const d of l){const{type:u,target:m}=d;if(u==="childList"&&m instanceof HTMLElement&&m.contains(e)){a();break}}}}),c=Os({callback:a});return ut(()=>{a(),e?(c?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(c?.disconnect(),i?.disconnect())},[e]),r}function rN(e){const t=ec(e);return Jm(e,t)}const ml=[];function oN(e){const t=f.useRef(e),n=eo(r=>e?r&&r!==ml&&e&&t.current&&e.parentNode===t.current.parentNode?r:Xi(e):ml,[e]);return f.useEffect(()=>{t.current=e},[e]),n}function sN(e){const[t,n]=f.useState(null),r=f.useRef(e),o=f.useCallback(a=>{const i=Zs(a.target);i&&n(c=>c?(c.set(i,_a(i)),new Map(c)):null)},[]);return f.useEffect(()=>{const a=r.current;if(e!==a){i(a);const c=e.map(l=>{const d=Zs(l);return d?(d.addEventListener("scroll",o,{passive:!0}),[d,_a(d)]):null}).filter(l=>l!=null);n(c.length?new Map(c):null),r.current=e}return()=>{i(e),i(a)};function i(c){c.forEach(l=>{const d=Zs(l);d?.removeEventListener("scroll",o)})}},[o,e]),f.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>Bn(a,i),ft):oh(e):ft,[e,t])}function hl(e,t){t===void 0&&(t=[]);const n=f.useRef(null);return f.useEffect(()=>{n.current=null},t),f.useEffect(()=>{const r=e!==ft;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?zo(e,n.current):ft}function aN(e){f.useEffect(()=>{if(!Ms)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function iN(e,t){return f.useMemo(()=>e.reduce((n,r)=>{let{eventName:o,handler:a}=r;return n[o]=i=>{a(i,t)},n},{}),[e,t])}function ih(e){return f.useMemo(()=>e?Ij(e):null,[e])}const pl=[];function cN(e,t){t===void 0&&(t=rr);const[n]=e,r=ih(n?Le(n):null),[o,a]=f.useState(pl);function i(){a(()=>e.length?e.map(l=>nh(l)?r:new Ji(t(l),l)):pl)}const c=Os({callback:i});return ut(()=>{c?.disconnect(),i(),e.forEach(l=>c?.observe(l))},[e]),o}function ch(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Qr(t)?t:e}function lN(e){let{measure:t}=e;const[n,r]=f.useState(null),o=f.useCallback(d=>{for(const{target:u}of d)if(Qr(u)){r(m=>{const h=t(u);return m?{...m,width:h.width,height:h.height}:h});break}},[t]),a=Os({callback:o}),i=f.useCallback(d=>{const u=ch(d);a?.disconnect(),u&&a?.observe(u),r(u?t(u):null)},[t,a]),[c,l]=Fo(i);return f.useMemo(()=>({nodeRef:c,rect:n,setRef:l}),[n,c,l])}const dN=[{sensor:Ts,options:{}},{sensor:Rs,options:{}}],uN={current:{}},ko={draggable:{measure:il},droppable:{measure:il,strategy:Pr.WhileDragging,frequency:La.Optimized},dragOverlay:{measure:rr}};class Cr extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const fN={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Cr,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Yo},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ko,measureDroppableContainers:Yo,windowRect:null,measuringScheduled:!1},lh={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Yo,draggableNodes:new Map,over:null,measureDroppableContainers:Yo},no=f.createContext(lh),dh=f.createContext(fN);function mN(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Cr}}}function hN(e,t){switch(t.type){case Me.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Me.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Me.DragEnd:case Me.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Me.RegisterDroppable:{const{element:n}=t,{id:r}=n,o=new Cr(e.droppable.containers);return o.set(r,n),{...e,droppable:{...e.droppable,containers:o}}}case Me.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new Cr(e.droppable.containers);return i.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:i}}}case Me.UnregisterDroppable:{const{id:n,key:r}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const a=new Cr(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function pN(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:o}=f.useContext(no),a=Wo(r),i=Wo(n?.id);return f.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!Ds(a)||document.activeElement===a.target)return;const c=o.get(i);if(!c)return;const{activatorNode:l,node:d}=c;if(!l.current&&!d.current)return;requestAnimationFrame(()=>{for(const u of[l.current,d.current]){if(!u)continue;const m=uj(u);if(m){m.focus();break}}})}},[r,t,o,i,a]),null}function uh(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...r}),n):n}function gN(e){return f.useMemo(()=>({draggable:{...ko.draggable,...e?.draggable},droppable:{...ko.droppable,...e?.droppable},dragOverlay:{...ko.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function xN(e){let{activeNode:t,measure:n,initialRect:r,config:o=!0}=e;const a=f.useRef(!1),{x:i,y:c}=typeof o=="boolean"?{x:o,y:o}:o;ut(()=>{if(!i&&!c||!t){a.current=!1;return}if(a.current||!r)return;const d=t?.node.current;if(!d||d.isConnected===!1)return;const u=n(d),m=Jm(u,r);if(i||(m.x=0),c||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const h=Qm(d);h&&h.scrollBy({top:m.y,left:m.x})}},[t,i,c,r,n])}const Is=f.createContext({...ft,scaleX:1,scaleY:1});var qt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qt||(qt={}));const fh=f.memo(function(t){var n,r,o,a;let{id:i,accessibility:c,autoScroll:l=!0,children:d,sensors:u=dN,collisionDetection:m=Mj,measuring:h,modifiers:p,...g}=t;const x=f.useReducer(hN,void 0,mN),[v,y]=x,[b,w]=xj(),[C,S]=f.useState(qt.Uninitialized),N=C===qt.Initialized,{draggable:{active:j,nodes:k,translate:D},droppable:{containers:R}}=v,O=j!=null?k.get(j):null,L=f.useRef({initial:null,translated:null}),W=f.useMemo(()=>{var ue;return j!=null?{id:j,data:(ue=O?.data)!=null?ue:uN,rect:L}:null},[j,O]),M=f.useRef(null),[E,T]=f.useState(null),[A,I]=f.useState(null),P=Ir(g,Object.values(g)),B=to("DndDescribedBy",i),K=f.useMemo(()=>R.getEnabled(),[R]),G=gN(h),{droppableRects:ee,measureDroppableContainers:te,measuringScheduled:le}=Qj(K,{dragging:N,dependencies:[D.x,D.y],config:G.droppable}),ie=Jj(k,j),F=f.useMemo(()=>A?Ho(A):null,[A]),Z=me(),ae=eN(ie,G.draggable.measure);xN({activeNode:j!=null?k.get(j):null,config:Z.layoutShiftCompensation,initialRect:ae,measure:G.draggable.measure});const H=fl(ie,G.draggable.measure,ae),re=fl(ie?ie.parentElement:null),se=f.useRef({activatorEvent:null,active:null,activeNode:ie,collisionRect:null,collisions:null,droppableRects:ee,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:R,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pe=R.getNodeFor((n=se.current.over)==null?void 0:n.id),Se=lN({measure:G.dragOverlay.measure}),qe=(r=Se.nodeRef.current)!=null?r:ie,Xe=N?(o=Se.rect)!=null?o:H:null,Ht=!!(Se.nodeRef.current&&Se.rect),ao=rN(Ht?null:H),sr=ih(qe?Le(qe):null),ht=oN(N?pe??ie:null),Dn=cN(ht),ln=uh(p,{transform:{x:D.x-ao.x,y:D.y-ao.y,scaleX:1,scaleY:1},activatorEvent:A,active:W,activeNodeRect:H,containerNodeRect:re,draggingNodeRect:Xe,over:se.current.over,overlayNodeRect:Se.rect,scrollableAncestors:ht,scrollableAncestorRects:Dn,windowRect:sr}),Rn=F?Bn(F,D):null,Tn=sN(ht),_s=hl(Tn),$s=hl(Tn,[H]),Yt=Bn(ln,_s),Ut=Xe?Rj(Xe,ln):null,dn=W&&Ut?m({active:W,collisionRect:Ut,droppableRects:ee,droppableContainers:K,pointerCoordinates:Rn}):null,io=jj(dn,"id"),[pt,co]=f.useState(null),Ls=Ht?ln:Bn(ln,$s),Bs=Ej(Ls,(a=pt?.rect)!=null?a:null,H),ar=f.useRef(null),ir=f.useCallback((ue,q)=>{let{sensor:Ae,options:gt}=q;if(M.current==null)return;const Be=k.get(M.current);if(!Be)return;const Oe=ue.nativeEvent,Fe=new Ae({active:M.current,activeNode:Be,event:Oe,options:gt,context:se,onAbort(Ie){if(!k.get(Ie))return;const{onDragAbort:xt}=P.current,Tt={id:Ie};xt?.(Tt),b({type:"onDragAbort",event:Tt})},onPending(Ie,Vt,xt,Tt){if(!k.get(Ie))return;const{onDragPending:lr}=P.current,Gt={id:Ie,constraint:Vt,initialCoordinates:xt,offset:Tt};lr?.(Gt),b({type:"onDragPending",event:Gt})},onStart(Ie){const Vt=M.current;if(Vt==null)return;const xt=k.get(Vt);if(!xt)return;const{onDragStart:Tt}=P.current,cr={activatorEvent:Oe,active:{id:Vt,data:xt.data,rect:L}};et.unstable_batchedUpdates(()=>{Tt?.(cr),S(qt.Initializing),y({type:Me.DragStart,initialCoordinates:Ie,active:Vt}),b({type:"onDragStart",event:cr}),T(ar.current),I(Oe)})},onMove(Ie){y({type:Me.DragMove,coordinates:Ie})},onEnd:On(Me.DragEnd),onCancel:On(Me.DragCancel)});ar.current=Fe;function On(Ie){return async function(){const{active:xt,collisions:Tt,over:cr,scrollAdjustedTranslate:lr}=se.current;let Gt=null;if(xt&&lr){const{cancelDrop:dr}=P.current;Gt={activatorEvent:Oe,active:xt,collisions:Tt,delta:lr,over:cr},Ie===Me.DragEnd&&typeof dr=="function"&&await Promise.resolve(dr(Gt))&&(Ie=Me.DragCancel)}M.current=null,et.unstable_batchedUpdates(()=>{y({type:Ie}),S(qt.Uninitialized),co(null),T(null),I(null),ar.current=null;const dr=Ie===Me.DragEnd?"onDragEnd":"onDragCancel";if(Gt){const Ws=P.current[dr];Ws?.(Gt),b({type:dr,event:Gt})}})}}},[k]),Fs=f.useCallback((ue,q)=>(Ae,gt)=>{const Be=Ae.nativeEvent,Oe=k.get(gt);if(M.current!==null||!Oe||Be.dndKit||Be.defaultPrevented)return;const Fe={active:Oe};ue(Ae,q.options,Fe)===!0&&(Be.dndKit={capturedBy:q.sensor},M.current=gt,ir(Ae,q))},[k,ir]),oe=Zj(u,Fs);aN(u),ut(()=>{H&&C===qt.Initializing&&S(qt.Initialized)},[H,C]),f.useEffect(()=>{const{onDragMove:ue}=P.current,{active:q,activatorEvent:Ae,collisions:gt,over:Be}=se.current;if(!q||!Ae)return;const Oe={active:q,activatorEvent:Ae,collisions:gt,delta:{x:Yt.x,y:Yt.y},over:Be};et.unstable_batchedUpdates(()=>{ue?.(Oe),b({type:"onDragMove",event:Oe})})},[Yt.x,Yt.y]),f.useEffect(()=>{const{active:ue,activatorEvent:q,collisions:Ae,droppableContainers:gt,scrollAdjustedTranslate:Be}=se.current;if(!ue||M.current==null||!q||!Be)return;const{onDragOver:Oe}=P.current,Fe=gt.get(io),On=Fe&&Fe.rect.current?{id:Fe.id,rect:Fe.rect.current,data:Fe.data,disabled:Fe.disabled}:null,Ie={active:ue,activatorEvent:q,collisions:Ae,delta:{x:Be.x,y:Be.y},over:On};et.unstable_batchedUpdates(()=>{co(On),Oe?.(Ie),b({type:"onDragOver",event:Ie})})},[io]),ut(()=>{se.current={activatorEvent:A,active:W,activeNode:ie,collisionRect:Ut,collisions:dn,droppableRects:ee,draggableNodes:k,draggingNode:qe,draggingNodeRect:Xe,droppableContainers:R,over:pt,scrollableAncestors:ht,scrollAdjustedTranslate:Yt},L.current={initial:Xe,translated:Ut}},[W,ie,dn,Ut,k,qe,Xe,ee,R,pt,ht,Yt]),Kj({...Z,delta:D,draggingRect:Ut,pointerCoordinates:Rn,scrollableAncestors:ht,scrollableAncestorRects:Dn});const ge=f.useMemo(()=>({active:W,activeNode:ie,activeNodeRect:H,activatorEvent:A,collisions:dn,containerNodeRect:re,dragOverlay:Se,draggableNodes:k,droppableContainers:R,droppableRects:ee,over:pt,measureDroppableContainers:te,scrollableAncestors:ht,scrollableAncestorRects:Dn,measuringConfiguration:G,measuringScheduled:le,windowRect:sr}),[W,ie,H,A,dn,re,Se,k,R,ee,pt,te,ht,Dn,G,le,sr]),X=f.useMemo(()=>({activatorEvent:A,activators:oe,active:W,activeNodeRect:H,ariaDescribedById:{draggable:B},dispatch:y,draggableNodes:k,over:pt,measureDroppableContainers:te}),[A,oe,W,H,y,B,k,pt,te]);return $.createElement(Gm.Provider,{value:w},$.createElement(no.Provider,{value:X},$.createElement(dh.Provider,{value:ge},$.createElement(Is.Provider,{value:Bs},d)),$.createElement(pN,{disabled:c?.restoreFocus===!1})),$.createElement(bj,{...c,hiddenTextDescribedById:B}));function me(){const ue=E?.autoScrollEnabled===!1,q=typeof l=="object"?l.enabled===!1:l===!1,Ae=N&&!ue&&!q;return typeof l=="object"?{...l,enabled:Ae}:{enabled:Ae}}}),vN=f.createContext(null),gl="button",yN="Draggable";function bN(e){let{id:t,data:n,disabled:r=!1,attributes:o}=e;const a=to(yN),{activators:i,activatorEvent:c,active:l,activeNodeRect:d,ariaDescribedById:u,draggableNodes:m,over:h}=f.useContext(no),{role:p=gl,roleDescription:g="draggable",tabIndex:x=0}=o??{},v=l?.id===t,y=f.useContext(v?Is:vN),[b,w]=Fo(),[C,S]=Fo(),N=iN(i,t),j=Ir(n);ut(()=>(m.set(t,{id:t,key:a,node:b,activatorNode:C,data:j}),()=>{const D=m.get(t);D&&D.key===a&&m.delete(t)}),[m,t]);const k=f.useMemo(()=>({role:p,tabIndex:x,"aria-disabled":r,"aria-pressed":v&&p===gl?!0:void 0,"aria-roledescription":g,"aria-describedby":u.draggable}),[r,p,x,v,g,u.draggable]);return{active:l,activatorEvent:c,activeNodeRect:d,attributes:k,isDragging:v,listeners:r?void 0:N,node:b,over:h,setNodeRef:w,setActivatorNodeRef:S,transform:y}}function mh(){return f.useContext(dh)}const wN="Droppable",CN={timeout:25};function jN(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:o}=e;const a=to(wN),{active:i,dispatch:c,over:l,measureDroppableContainers:d}=f.useContext(no),u=f.useRef({disabled:n}),m=f.useRef(!1),h=f.useRef(null),p=f.useRef(null),{disabled:g,updateMeasurementsFor:x,timeout:v}={...CN,...o},y=Ir(x??r),b=f.useCallback(()=>{if(!m.current){m.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{d(Array.isArray(y.current)?y.current:[y.current]),p.current=null},v)},[v]),w=Os({callback:b,disabled:g||!i}),C=f.useCallback((k,D)=>{w&&(D&&(w.unobserve(D),m.current=!1),k&&w.observe(k))},[w]),[S,N]=Fo(C),j=Ir(t);return f.useEffect(()=>{!w||!S.current||(w.disconnect(),m.current=!1,w.observe(S.current))},[S,w]),f.useEffect(()=>(c({type:Me.RegisterDroppable,element:{id:r,key:a,disabled:n,node:S,rect:h,data:j}}),()=>c({type:Me.UnregisterDroppable,key:a,id:r})),[r]),f.useEffect(()=>{n!==u.current.disabled&&(c({type:Me.SetDroppableDisabled,id:r,key:a,disabled:n}),u.current.disabled=n)},[r,a,n,c]),{active:i,rect:h,isOver:l?.id===r,node:S,over:l,setNodeRef:N}}function NN(e){let{animation:t,children:n}=e;const[r,o]=f.useState(null),[a,i]=f.useState(null),c=Wo(n);return!n&&!r&&c&&o(c),ut(()=>{if(!a)return;const l=r?.key,d=r?.props.id;if(l==null||d==null){o(null);return}Promise.resolve(t(d,a)).then(()=>{o(null)})},[t,r,a]),$.createElement($.Fragment,null,n,r?f.cloneElement(r,{ref:i}):null)}const SN={x:0,y:0,scaleX:1,scaleY:1};function kN(e){let{children:t}=e;return $.createElement(no.Provider,{value:lh},$.createElement(Is.Provider,{value:SN},t))}const MN={position:"fixed",touchAction:"none"},EN=e=>Ds(e)?"transform 250ms ease":void 0,DN=f.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:o,children:a,className:i,rect:c,style:l,transform:d,transition:u=EN}=e;if(!c)return null;const m=o?d:{...d,scaleX:1,scaleY:1},h={...MN,width:c.width,height:c.height,top:c.top,left:c.left,transform:Nt.Transform.toString(m),transformOrigin:o&&r?wj(r,c):void 0,transition:typeof u=="function"?u(r):u,...l};return $.createElement(n,{className:i,style:h,ref:t},a)}),hh=e=>t=>{let{active:n,dragOverlay:r}=t;const o={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[c,l]of Object.entries(a.active))l!==void 0&&(o[c]=n.node.style.getPropertyValue(c),n.node.style.setProperty(c,l));if(a!=null&&a.dragOverlay)for(const[c,l]of Object.entries(a.dragOverlay))l!==void 0&&r.node.style.setProperty(c,l);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[l,d]of Object.entries(o))n.node.style.setProperty(l,d);i!=null&&i.active&&n.node.classList.remove(i.active)}},RN=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:Nt.Transform.toString(t)},{transform:Nt.Transform.toString(n)}]},TN={duration:250,easing:"ease",keyframes:RN,sideEffects:hh({styles:{active:{opacity:"0"}}})};function ON(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:o}=e;return Es((a,i)=>{if(t===null)return;const c=n.get(a);if(!c)return;const l=c.node.current;if(!l)return;const d=ch(i);if(!d)return;const{transform:u}=Le(i).getComputedStyle(i),m=Zm(u);if(!m)return;const h=typeof t=="function"?t:IN(t);return sh(l,o.draggable.measure),h({active:{id:a,data:c.data,node:l,rect:o.draggable.measure(l)},draggableNodes:n,dragOverlay:{node:i,rect:o.dragOverlay.measure(d)},droppableContainers:r,measuringConfiguration:o,transform:m})})}function IN(e){const{duration:t,easing:n,sideEffects:r,keyframes:o}={...TN,...e};return a=>{let{active:i,dragOverlay:c,transform:l,...d}=a;if(!t)return;const u={x:c.rect.left-i.rect.left,y:c.rect.top-i.rect.top},m={scaleX:l.scaleX!==1?i.rect.width*l.scaleX/c.rect.width:1,scaleY:l.scaleY!==1?i.rect.height*l.scaleY/c.rect.height:1},h={x:l.x-u.x,y:l.y-u.y,...m},p=o({...d,active:i,dragOverlay:c,transform:{initial:l,final:h}}),[g]=p,x=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(x))return;const v=r?.({active:i,dragOverlay:c,...d}),y=c.node.animate(p,{duration:t,easing:n,fill:"forwards"});return new Promise(b=>{y.onfinish=()=>{v?.(),b()}})}}let xl=0;function PN(e){return f.useMemo(()=>{if(e!=null)return xl++,xl},[e])}const AN=$.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:o,transition:a,modifiers:i,wrapperElement:c="div",className:l,zIndex:d=999}=e;const{activatorEvent:u,active:m,activeNodeRect:h,containerNodeRect:p,draggableNodes:g,droppableContainers:x,dragOverlay:v,over:y,measuringConfiguration:b,scrollableAncestors:w,scrollableAncestorRects:C,windowRect:S}=mh(),N=f.useContext(Is),j=PN(m?.id),k=uh(i,{activatorEvent:u,active:m,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:v.rect,over:y,overlayNodeRect:v.rect,scrollableAncestors:w,scrollableAncestorRects:C,transform:N,windowRect:S}),D=ec(h),R=ON({config:r,draggableNodes:g,droppableContainers:x,measuringConfiguration:b}),O=D?v.setRef:void 0;return $.createElement(kN,null,$.createElement(NN,{animation:R},m&&j?$.createElement(DN,{key:j,id:m.id,ref:O,as:c,activatorEvent:u,adjustScale:t,className:l,transition:a,rect:D,style:{zIndex:d,...o},transform:k},n):null))}),ph=e=>{let{transform:t}=e;return{...t,x:0}};function Ar(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function _N(e,t){return e.reduce((n,r,o)=>{const a=t.get(r);return a&&(n[o]=a),n},Array(e.length))}function mo(e){return e!==null&&e>=0}function $N(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function LN(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const gh=e=>{let{rects:t,activeIndex:n,overIndex:r,index:o}=e;const a=Ar(t,r,n),i=t[o],c=a[o];return!c||!i?null:{x:c.left-i.left,y:c.top-i.top,scaleX:c.width/i.width,scaleY:c.height/i.height}},ho={scaleX:1,scaleY:1},tc=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:o,rects:a,overIndex:i}=e;const c=(t=a[n])!=null?t:r;if(!c)return null;if(o===n){const d=a[i];return d?{x:0,y:n<i?d.top+d.height-(c.top+c.height):d.top-c.top,...ho}:null}const l=BN(a,o,n);return o>n&&o<=i?{x:0,y:-c.height-l,...ho}:o<n&&o>=i?{x:0,y:c.height+l,...ho}:{x:0,y:0,...ho}};function BN(e,t,n){const r=e[t],o=e[t-1],a=e[t+1];return r?n<t?o?r.top-(o.top+o.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}const xh="Sortable",vh=$.createContext({activeIndex:-1,containerId:xh,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:gh,disabled:{draggable:!1,droppable:!1}});function nc(e){let{children:t,id:n,items:r,strategy:o=gh,disabled:a=!1}=e;const{active:i,dragOverlay:c,droppableRects:l,over:d,measureDroppableContainers:u}=mh(),m=to(xh,n),h=c.rect!==null,p=f.useMemo(()=>r.map(N=>typeof N=="object"&&"id"in N?N.id:N),[r]),g=i!=null,x=i?p.indexOf(i.id):-1,v=d?p.indexOf(d.id):-1,y=f.useRef(p),b=!$N(p,y.current),w=v!==-1&&x===-1||b,C=LN(a);ut(()=>{b&&g&&u(p)},[b,p,g,u]),f.useEffect(()=>{y.current=p},[p]);const S=f.useMemo(()=>({activeIndex:x,containerId:m,disabled:C,disableTransforms:w,items:p,overIndex:v,useDragOverlay:h,sortedRects:_N(p,l),strategy:o}),[x,m,C.draggable,C.droppable,w,p,v,l,h,o]);return $.createElement(vh.Provider,{value:S},t)}const FN=e=>{let{id:t,items:n,activeIndex:r,overIndex:o}=e;return Ar(n,r,o).indexOf(t)},WN=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:o,items:a,newIndex:i,previousItems:c,previousContainerId:l,transition:d}=e;return!d||!r||c!==a&&o===i?!1:n?!0:i!==o&&t===l},zN={duration:200,easing:"ease"},yh="transform",HN=Nt.Transition.toString({property:yh,duration:0,easing:"linear"}),YN={roleDescription:"sortable"};function UN(e){let{disabled:t,index:n,node:r,rect:o}=e;const[a,i]=f.useState(null),c=f.useRef(n);return ut(()=>{if(!t&&n!==c.current&&r.current){const l=o.current;if(l){const d=rr(r.current,{ignoreTransform:!0}),u={x:l.left-d.left,y:l.top-d.top,scaleX:l.width/d.width,scaleY:l.height/d.height};(u.x||u.y)&&i(u)}}n!==c.current&&(c.current=n)},[t,n,r,o]),f.useEffect(()=>{a&&i(null)},[a]),a}function rc(e){let{animateLayoutChanges:t=WN,attributes:n,disabled:r,data:o,getNewIndex:a=FN,id:i,strategy:c,resizeObserverConfig:l,transition:d=zN}=e;const{items:u,containerId:m,activeIndex:h,disabled:p,disableTransforms:g,sortedRects:x,overIndex:v,useDragOverlay:y,strategy:b}=f.useContext(vh),w=VN(r,p),C=u.indexOf(i),S=f.useMemo(()=>({sortable:{containerId:m,index:C,items:u},...o}),[m,o,C,u]),N=f.useMemo(()=>u.slice(u.indexOf(i)),[u,i]),{rect:j,node:k,isOver:D,setNodeRef:R}=jN({id:i,data:S,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:N,...l}}),{active:O,activatorEvent:L,activeNodeRect:W,attributes:M,setNodeRef:E,listeners:T,isDragging:A,over:I,setActivatorNodeRef:P,transform:B}=bN({id:i,data:S,attributes:{...YN,...n},disabled:w.draggable}),K=ij(R,E),G=!!O,ee=G&&!g&&mo(h)&&mo(v),te=!y&&A,le=te&&ee?B:null,F=ee?le??(c??b)({rects:x,activeNodeRect:W,activeIndex:h,overIndex:v,index:C}):null,Z=mo(h)&&mo(v)?a({id:i,items:u,activeIndex:h,overIndex:v}):C,ae=O?.id,H=f.useRef({activeId:ae,items:u,newIndex:Z,containerId:m}),re=u!==H.current.items,se=t({active:O,containerId:m,isDragging:A,isSorting:G,id:i,index:C,items:u,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:d,wasDragging:H.current.activeId!=null}),pe=UN({disabled:!se,index:C,node:k,rect:j});return f.useEffect(()=>{G&&H.current.newIndex!==Z&&(H.current.newIndex=Z),m!==H.current.containerId&&(H.current.containerId=m),u!==H.current.items&&(H.current.items=u)},[G,Z,m,u]),f.useEffect(()=>{if(ae===H.current.activeId)return;if(ae!=null&&H.current.activeId==null){H.current.activeId=ae;return}const qe=setTimeout(()=>{H.current.activeId=ae},50);return()=>clearTimeout(qe)},[ae]),{active:O,activeIndex:h,attributes:M,data:S,rect:j,index:C,newIndex:Z,items:u,isOver:D,isSorting:G,isDragging:A,listeners:T,node:k,overIndex:v,over:I,setNodeRef:K,setActivatorNodeRef:P,setDroppableNodeRef:R,setDraggableNodeRef:E,transform:pe??F,transition:Se()};function Se(){if(pe||re&&H.current.newIndex===C)return HN;if(!(te&&!Ds(L)||!d)&&(G||se))return Nt.Transition.toString({...d,property:yh})}}function VN(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}de.Down,de.Right,de.Up,de.Left;function GN({id:e,name:t}){const{attributes:n,listeners:r,setNodeRef:o,transform:a,transition:i,isDragging:c}=rc({id:e}),l={transform:Nt.Transform.toString(a),transition:i,opacity:c?.5:1,cursor:"grab",userSelect:"none"};return s.jsxs("div",{ref:o,style:l,...n,...r,className:"bg-background border rounded-md p-2 shadow-sm active:cursor-grabbing flex items-center justify-between",children:[s.jsx("div",{children:t}),s.jsx("i",{className:"icon-[mdi--reorder-horizontal]"})]})}const KN=({items:e,onReorder:t,className:n})=>{const r=Km(Fn(Ts,{activationConstraint:{distance:5}}),Fn(Qi,{activationConstraint:{delay:100,tolerance:5}}),Fn(Rs)),o=a=>{const{active:i,over:c}=a;if(!c||i.id===c.id)return;const l=e.findIndex(m=>m.id===i.id),d=e.findIndex(m=>m.id===c.id),u=Ar(e,l,d);t(u)};return s.jsx(fh,{sensors:r,collisionDetection:Nj,onDragEnd:o,modifiers:[ph],children:s.jsx(nc,{items:e.map(a=>a.id),strategy:tc,children:s.jsx("div",{className:`overflow-y-auto max-h-[400px] flex flex-col gap-2 ${n||""}`,children:e.map(a=>s.jsx(GN,{...a},a.id))})})})};function qN({edit:e,onCancel:t,onConfirm:n}){const[r,o]=f.useState([...e??[]]),a=f.useCallback(c=>{o(c)},[]),i=V();return s.jsx(Te,{title:i("sort"),onBack:t,right:s.jsx(z,{onClick:()=>{n?.(r)},children:i("confirm")}),className:"h-full overflow-hidden",children:s.jsx("div",{className:"flex-1 w-full overflow-hidden py-2",children:s.jsx(KN,{items:r,onReorder:a,className:"h-full max-h-full px-2"})})})}const[XN,Ba]=we(qN,{dialogTitle:"Sort",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"}),bh=tb,oc=f.forwardRef(({className:e,...t},n)=>s.jsx(Jf,{ref:n,className:_("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",e),...t}));oc.displayName=Jf.displayName;const Vo=f.forwardRef(({className:e,...t},n)=>s.jsx(Zf,{ref:n,className:_("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",e),...t}));Vo.displayName=Zf.displayName;const Go=f.forwardRef(({className:e,...t},n)=>s.jsx(Qf,{ref:n,className:_("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Go.displayName=Qf.displayName;function Ps({icon:e,className:t}){if(e.trim().startsWith("<svg")){const r="data:image/svg+xml;utf8,"+encodeURIComponent(e);return s.jsx("i",{className:_("flex items-center justify-center min-w-4 min-h-4",t),style:{backgroundImage:`url(${r})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}})}return s.jsx("i",{className:_(e,t)})}const wh=[{labelKey:"category.food_dining",icons:[{name:"food",className:"icon-[mdi--food]"},{name:"food-apple",className:"icon-[mdi--food-apple]"},{name:"food-fork-drink",className:"icon-[mdi--food-fork-drink]"},{name:"silverware-fork-knife",className:"icon-[mdi--silverware-fork-knife]"},{name:"cup",className:"icon-[mdi--cup]"},{name:"coffee",className:"icon-[mdi--coffee]"},{name:"glass-wine",className:"icon-[mdi--glass-wine]"},{name:"breakfast",className:"icon-[mdi--bread-slice]"},{name:"launch",className:"icon-[mdi--meat]"},{name:"dinner",className:"icon-[mdi--food-turkey]"},{name:"snack",className:"icon-[mdi--treat]"},{name:"treat",className:"icon-[mdi--food-ramen]"},{name:"drinks",className:"icon-[mdi--local-bar]"}]},{labelKey:"category.transport_travel",icons:[{name:"car",className:"icon-[mdi--car]"},{name:"car-electric",className:"icon-[mdi--car-electric]"},{name:"bus",className:"icon-[mdi--bus]"},{name:"train",className:"icon-[mdi--train]"},{name:"subway",className:"icon-[mdi--subway]"},{name:"bike",className:"icon-[mdi--bike]"},{name:"airplane",className:"icon-[mdi--airplane]"},{name:"map",className:"icon-[mdi--map]"},{name:"map-marker",className:"icon-[mdi--map-marker]"},{name:"compass",className:"icon-[mdi--compass]"},{name:"ticket",className:"icon-[mdi--ticket]"},{name:"transport",className:"icon-[mdi--transportation]"},{name:"taxi",className:"icon-[mdi--taxi]"},{name:"parking",className:"icon-[mdi--parking]"},{name:"travel",className:"icon-[mdi--bag-suitcase]"}]},{labelKey:"category.shopping_goods",icons:[{name:"cart",className:"icon-[mdi--cart]"},{name:"cart-outline",className:"icon-[mdi--cart-outline]"},{name:"cart-plus",className:"icon-[mdi--cart-plus]"},{name:"basket",className:"icon-[mdi--basket]"},{name:"store",className:"icon-[mdi--store]"},{name:"storefront",className:"icon-[mdi--storefront]"},{name:"bag-personal",className:"icon-[mdi--bag-personal]"},{name:"shopping",className:"icon-[mdi--shopping-cart]"},{name:"household",className:"icon-[mdi--house-add]"},{name:"electronics",className:"icon-[mdi--tablet-cellphone]"},{name:"credits",className:"icon-[mdi--bitcoin]"},{name:"baby-and-mom",className:"icon-[mdi--baby-face]"},{name:"accessories",className:"icon-[mdi--watch]"},{name:"office",className:"icon-[mdi--briefcase]"}]},{labelKey:"category.apparel_beauty",icons:[{name:"tshirt-crew",className:"icon-[mdi--tshirt-crew]"},{name:"shoe-sneaker",className:"icon-[mdi--shoe-sneaker]"},{name:"hanger",className:"icon-[mdi--hanger]"},{name:"lipstick",className:"icon-[mdi--lipstick]"},{name:"sunglasses",className:"icon-[mdi--sunglasses]"}]},{labelKey:"category.housing_utilities",icons:[{name:"home",className:"icon-[mdi--home]"},{name:"home-outline",className:"icon-[mdi--home-outline]"},{name:"lightbulb",className:"icon-[mdi--lightbulb]"},{name:"water",className:"icon-[mdi--water]"},{name:"gas-station",className:"icon-[mdi--gas-station]"},{name:"flash",className:"icon-[mdi--flash]"},{name:"housing",className:"icon-[mdi--house-city]"},{name:"electricity",className:"icon-[mdi--battery-charging-10]"},{name:"mgmt-fee",className:"icon-[mdi--gardening]"},{name:"rent",className:"icon-[mdi--hoop-house]"},{name:"mortgage",className:"icon-[mdi--house-floor-l]"},{name:"cleaning",className:"icon-[mdi--vacuum-cleaner]"},{name:"renovation",className:"icon-[mdi--house-flood]"}]},{labelKey:"category.comm_internet",icons:[{name:"cellphone",className:"icon-[mdi--cellphone]"},{name:"wifi",className:"icon-[mdi--wifi]"},{name:"router",className:"icon-[mdi--router]"},{name:"server",className:"icon-[mdi--server]"},{name:"earth",className:"icon-[mdi--earth]"},{name:"phone",className:"icon-[mdi--phone]"}]},{labelKey:"category.medical_health",icons:[{name:"heart",className:"icon-[mdi--heart]"},{name:"hospital",className:"icon-[mdi--hospital]"},{name:"pill",className:"icon-[mdi--pill]"},{name:"stethoscope",className:"icon-[mdi--stethoscope]"},{name:"medical-bag",className:"icon-[mdi--medical-bag]"},{name:"medical",className:"icon-[mdi--hospital-box]"},{name:"clinic",className:"icon-[mdi--stethoscope]"},{name:"pharmacy",className:"icon-[mdi--pill-multiple]"}]},{labelKey:"category.education_learning",icons:[{name:"book",className:"icon-[mdi--book]"},{name:"book-open",className:"icon-[mdi--book-open]"},{name:"school",className:"icon-[mdi--school]"},{name:"graduation-cap",className:"icon-[mdi--graduation-cap]"},{name:"education",className:"icon-[mdi--academic-cap]"},{name:"tuition",className:"icon-[mdi--account-school]"},{name:"books",className:"icon-[mdi--book-open-blank-variant]"},{name:"courses",className:"icon-[mdi--book-account]"}]},{labelKey:"category.entertainment_leisure",icons:[{name:"camera",className:"icon-[mdi--camera]"},{name:"movie",className:"icon-[mdi--movie]"},{name:"music",className:"icon-[mdi--music]"},{name:"guitar",className:"icon-[mdi--guitar-acoustic]"},{name:"gamepad",className:"icon-[mdi--gamepad]"},{name:"dice-multiple",className:"icon-[mdi--dice-multiple]"},{name:"entertainment",className:"icon-[mdi--google-gamepad]"},{name:"movies",className:"icon-[mdi--local-movies]"},{name:"fitness",className:"icon-[mdi--fitness-center]"},{name:"wellness",className:"icon-[mdi--emoticon]"},{name:"shows",className:"icon-[mdi--microphone-variant]"}]},{labelKey:"category.pets",icons:[{name:"dog",className:"icon-[mdi--dog]"},{name:"cat",className:"icon-[mdi--cat]"},{name:"paw",className:"icon-[mdi--paw]"},{name:"fish",className:"icon-[mdi--fish]"},{name:"pets",className:"icon-[mdi--pets]"}]},{labelKey:"category.social_gifts",icons:[{name:"gift",className:"icon-[mdi--gift]"},{name:"balloon",className:"icon-[mdi--balloon]"},{name:"party-popper",className:"icon-[mdi--party-popper]"},{name:"social",className:"icon-[mdi--party-balloon]"},{name:"family",className:"icon-[mdi--elderly]"},{name:"loan",className:"icon-[mdi--hand-back-right]"},{name:"hongbao",className:"icon-[mdi--redeem]"},{name:"Lean",className:"icon-[mdi--hand-extended]"}]},{labelKey:"category.finance_wealth",icons:[{name:"wallet",className:"icon-[mdi--wallet]"},{name:"bank",className:"icon-[mdi--bank]"},{name:"cash",className:"icon-[mdi--cash]"},{name:"currency-usd",className:"icon-[mdi--currency-usd]"},{name:"currency-eur",className:"icon-[mdi--currency-eur]"},{name:"piggy-bank",className:"icon-[mdi--piggy-bank]"},{name:"chart-line",className:"icon-[mdi--chart-line]"},{name:"chart-pie",className:"icon-[mdi--chart-pie]"},{name:"shield",className:"icon-[mdi--shield]"},{name:"shield-check",className:"icon-[mdi--shield-check]"},{name:"security",className:"icon-[mdi--security]"},{name:"credit-card",className:"icon-[mdi--credit-card]"},{name:"credit-card-check",className:"icon-[mdi--credit-card-check]"},{name:"card-account-details",className:"icon-[mdi--card-account-details]"},{name:"wage",className:"icon-[mdi--credit-card-outline]"},{name:"part-time",className:"icon-[mdi--google-cardboard]"},{name:"fees-and-charges",className:"icon-[mdi--cash-minus]"},{name:"reconciliation",className:"icon-[mdi--credit-card-sync-outline]"},{name:"refund",className:"icon-[mdi--credit-card-refund]"},{name:"drawback",className:"icon-[mdi--recurring-payment]"}]},{labelKey:"category.charity_donations",icons:[{name:"hand-heart",className:"icon-[mdi--hand-heart]"},{name:"hand-coin",className:"icon-[mdi--hand-coin]"},{name:"account-heart",className:"icon-[mdi--account-heart]"},{name:"charity",className:"icon-[mdi--charity]"}]},{labelKey:"category.others",icons:[{name:"dots-horizontal",className:"icon-[mdi--dots-horizontal]"},{name:"help-circle",className:"icon-[mdi--help-circle]"},{name:"question-mark",className:"icon-[mdi--question-mark]"},{name:"other-expenses",className:"icon-[mdi--bookmark-multiple]"}]}],ta="__noparent",JN=e=>pn({name:We().check(Nr(50,{message:e("max-name-length-limit",{n:50})})),parent:Xt(We())}),ZN=wh,QN=e=>e.startsWith("<svg")&&e.endsWith("</svg>");function eS({onCancel:e,onConfirm:t,edit:n}){const r=V(),[o,a]=f.useState(()=>n===void 0||n.id===void 0?{name:"",type:n?.type??"expense",color:"#fff",icon:wh[0].icons[0].className,...n}:{...n}),i=f.useMemo(()=>JN(r),[r]),c=Br({resolver:Fr(i),defaultValues:o?{name:o.name,parent:o.parent}:{name:""}}),{expenses:l,incomes:d,categories:u,update:m,add:h}=Wt(),p=l,g=d,x=async y=>{if(n===void 0||n.id===void 0){const C={...o,...y};console.log("add category:",C);const S=await h(C);t?.(S);return}const b={icon:n.icon,name:n.name,parent:n.parent},w={...y,icon:o?.icon};if(b.icon===w.icon&&b.name===w.name&&b.parent===w.parent){console.log("nothing changed");return}console.log("update category:",w),await m(n.id,w),t?.(n.id)},v=async()=>{if(!n?.id)return;const y=Ce.getState().currentBookId;if(!y)return;const b=u.filter(C=>C.id===n.id||C.parent===n.id),w=await hn.filter(y,{categories:b.map(C=>C.id)});if(w.length>0){alert(r("category-delete-alert",{n:w.length}));return}await m(n.id,void 0),t?.(void 0)};return s.jsx(Wr,{...c,children:s.jsxs(Te,{className:"overflow-hidden w-full h-full flex-col gap-2 items-center",onBack:e,title:r("edit-category-details"),right:s.jsxs("div",{className:"flex items-center gap-2 pr-2",children:[n?.id&&s.jsx(z,{variant:"destructive",size:"sm",onClick:v,children:s.jsx("i",{className:"icon-[mdi--trash-can-outline]"})}),s.jsx(z,{size:"sm",type:"submit",onClick:()=>{c.handleSubmit(x)()},children:r("confirm")})]}),children:[s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx("div",{className:"p-4 size-16 aspect-square rounded-full overflow-hidden border flex justify-center items-center",children:o?.icon&&s.jsx(Ps,{icon:o?.icon,className:_("w-full h-full")})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(xe,{control:c.control,name:"name",render:({field:y})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("category-name")}),s.jsx(ye,{children:s.jsx(at,{type:"text",maxLength:50,...y})})]})}),s.jsx(xe,{control:c.control,name:"parent",render:({field:y})=>{const b=c.getValues("parent"),w=b==null?ta:y.value;return s.jsxs(ve,{children:[s.jsx(Ne,{children:r("category-parent")}),s.jsx(ye,{children:s.jsxs(Et,{value:w,onValueChange:C=>{let S;C===ta?S=void 0:S=C,y.onChange(S)},children:[s.jsx(ye,{children:s.jsx(Dt,{children:s.jsx(En,{placeholder:r("parent-category")})})}),s.jsxs(zt,{align:"end",children:[s.jsx(Re,{value:ta,children:r("no-parent-category")}),(o.type==="expense"?p:g).filter(C=>C.id!==n?.id).map(C=>s.jsx(Re,{value:C.id,children:C.name},C.id))]})]})})]})}})]})]}),s.jsxs(bh,{defaultValue:"icons",className:"w-full flex flex-col flex-1 overflow-hidden p-2 gap-2",children:[s.jsx("div",{className:"w-full flex justify-center",children:s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(oc,{children:[s.jsx(Vo,{value:"icons",children:r("icons-tab")}),s.jsx(Vo,{value:"custom",children:r("custom-tab")})]})})}),s.jsxs("div",{className:"flex-1 overflow-y-auto border rounded-lg p-2",children:[s.jsx(Go,{value:"icons",className:"flex flex-col gap-2",children:ZN.map(y=>s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"text-sm",children:r(y.labelKey)}),s.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(48px,1fr))] gap-2",children:y.icons.map(b=>s.jsx("button",{type:"button",onClick:()=>{a(w=>({...w,icon:b.className}))},className:"size-12 p-2 rounded-full border flex justify-center items-center cursor-pointer",children:s.jsx("i",{className:_(b.className)})},y.labelKey+b.name))})]},y.labelKey))}),s.jsx(Go,{value:"custom",className:"w-full h-full flex flex-col gap-2 m-0",children:s.jsxs("div",{className:"w-full h-full flex flex-col gap-2",children:[s.jsxs("div",{className:"text-sm opacity-80 flex justify-between items-center px-2",children:[s.jsxs("div",{children:[r("copy-and-paste-svg-below"),":"]}),s.jsx(z,{size:"sm",children:r("clear")})]}),s.jsx("textarea",{className:"w-full flex-1 border rounded-lg p-2",placeholder:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M19 6.41L17.59 5L12 10.59L6.41 5L5 6.41L10.59 12L5 17.59L6.41 19L12 13.41L17.59 19L19 17.59L13.41 12z"/></svg>',onChange:y=>{const b=y.currentTarget.value;if(!b||!QN(b)){a(w=>({...w,icon:w?.icon}));return}a(w=>({...w,icon:b}))}})]})})]})]})]})})}const[tS,na]=we(eS,{dialogTitle:"Category Edit",contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function Ko({category:e,selected:t,onMouseDown:n,onClick:r,className:o}){return s.jsxs("button",{type:"button",className:_("rounded-lg border flex-1 py-1 px-2 h-8 flex items-center justify-center whitespace-nowrap cursor-pointer",t?"bg-slate-700 text-white ":"bg-stone-200  text-light-900 dark:bg-stone-500",o),onMouseDown:n,onClick:r,children:[s.jsx(Ps,{icon:e.icon,className:"w-4 h-4 flex-shrink-0"}),s.jsx("div",{className:"mx-2 truncate",children:e.name})]})}function nS({edit:e,onCancel:t}){const n=V(),{categories:r,reorder:o,reset:a}=Wt(),i=Lo(r.filter(g=>g.type==="expense")),c=Lo(r.filter(g=>g.type==="income")),l=[{label:"expense",value:i},{label:"income",value:c}],d=g=>{na({id:void 0,parent:g,type:r.find(x=>x.id===g).type})},u=async g=>{na({id:void 0,type:g})},m=async g=>{await na(g)},[h,p]=f.useState(e??"expense");return s.jsxs(Te,{className:"overflow-hidden h-full",onBack:t,title:n("edit-categories"),right:s.jsx(z,{onClick:async()=>{if(confirm(n("sure-to-reset-categories")))try{await a(),Ve.success(n("reset-success"))}catch(x){x.message.startsWith("still has transactions")&&Ve.error(n("reset-categories-failed-by-existing-custom-category-transcations"))}},children:n("reset")}),children:[s.jsxs(bh,{value:h,onValueChange:p,className:"px-2 pb-4 flex flex-col flex-1 overflow-hidden gap-2",children:[s.jsx("div",{className:"w-full flex justify-center",children:s.jsx("div",{children:s.jsx(oc,{children:l.map(g=>s.jsx(Vo,{value:g.label,children:n(g.label)},g.label))})})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"px-2 text-xs text-foreground/80",children:n("click-category-to-edit")}),s.jsx(z,{variant:"ghost",className:"p-1 h-fit",onClick:async()=>{const g=l.find(v=>v.label===h);if(!g)return;const x=await Ba(g.value);o(x)},children:s.jsx("i",{className:"icon-[mdi--reorder-horizontal]"})})]}),l.map(g=>s.jsxs(Go,{value:g.label,className:"mt-0 flex-1 overflow-y-auto scrollbar-hidden flex flex-col gap-4",children:[s.jsxs(z,{variant:"outline",onClick:()=>{u(g.label)},children:[s.jsx("i",{className:"icon-[mdi--plus]"}),n("add-new-category-group")]}),g.value.map((x,v)=>s.jsxs(es,{defaultOpen:v===0,className:"rounded-md border shadow group",children:[s.jsx(ts,{asChild:!0,children:s.jsxs("div",{className:"px-2 py-1 flex items-center justify-between",children:[s.jsx("div",{children:s.jsx(Ko,{category:x,onClick:y=>{y.stopPropagation(),y.preventDefault(),m(x)}})}),s.jsxs("div",{children:[s.jsx(z,{variant:"ghost",className:"p-1 h-fit",onClick:async y=>{y.preventDefault(),y.stopPropagation();const b=await Ba(x.children);o(b)},children:s.jsx("i",{className:"icon-[mdi--reorder-horizontal]"})}),s.jsx("i",{className:" group-[[data-state=open]]:icon-[mdi--chevron-down] group-[[data-state=closed]]:icon-[mdi--chevron-up]"})]})]})}),s.jsx(fd,{className:"border-t data-[state=open]:animate-collapse-open data-[state=closed]:animate-collapse-close data-[state=closed]:overflow-hidden",children:s.jsxs("div",{className:_("p-4 grid gap-1 text-sm",Oa(x.children)),children:[x.children.map(y=>s.jsx(Ko,{category:y,onClick:()=>m(y)},y.id)),s.jsxs("button",{type:"button",className:"rounded-lg border flex justify-center items-center",onClick:()=>d(x.id),children:[s.jsx("i",{className:"icon-[mdi--plus]"}),n("add")]})]})})]},x.id))]},g.label))]}),s.jsx(tS,{})]})}const[rS,Ch]=we(nS,{dialogTitle:"Category",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function oS(){const e=V();return s.jsx("div",{className:"backup",children:s.jsx(z,{onClick:()=>{Ch()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--view-grid-outline] size-5"}),e("edit-categories")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})})})}function sS(e,t,n="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:e,timeZoneName:n}).format(t).split(/\s/g).slice(2).join(" ")}const aS={},vr={};function mn(e,t){try{const r=(aS[e]||=new Intl.DateTimeFormat("en-US",{timeZone:e,timeZoneName:"longOffset"}).format)(t).split("GMT")[1];return r in vr?vr[r]:vl(r,r.split(":"))}catch{if(e in vr)return vr[e];const n=e?.match(iS);return n?vl(e,n.slice(1)):NaN}}const iS=/([+-]\d\d):?(\d\d)?/;function vl(e,t){const n=+(t[0]||0),r=+(t[1]||0),o=+(t[2]||0)/60;return vr[e]=n*60+r>0?n*60+r+o:n*60-r-o}class bt extends Date{constructor(...t){super(),t.length>1&&typeof t[t.length-1]=="string"&&(this.timeZone=t.pop()),this.internal=new Date,isNaN(mn(this.timeZone,this))?this.setTime(NaN):t.length?typeof t[0]=="number"&&(t.length===1||t.length===2&&typeof t[1]!="number")?this.setTime(t[0]):typeof t[0]=="string"?this.setTime(+new Date(t[0])):t[0]instanceof Date?this.setTime(+t[0]):(this.setTime(+new Date(...t)),jh(this),Fa(this)):this.setTime(Date.now())}static tz(t,...n){return n.length?new bt(...n,t):new bt(Date.now(),t)}withTimeZone(t){return new bt(+this,t)}getTimezoneOffset(){const t=-mn(this.timeZone,this);return t>0?Math.floor(t):Math.ceil(t)}setTime(t){return Date.prototype.setTime.apply(this,arguments),Fa(this),+this}[Symbol.for("constructDateFrom")](t){return new bt(+new Date(t),this.timeZone)}}const yl=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!yl.test(e))return;const t=e.replace(yl,"$1UTC");bt.prototype[t]&&(e.startsWith("get")?bt.prototype[e]=function(){return this.internal[t]()}:(bt.prototype[e]=function(){return Date.prototype[t].apply(this.internal,arguments),cS(this),+this},bt.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),Fa(this),+this}))});function Fa(e){e.internal.setTime(+e),e.internal.setUTCSeconds(e.internal.getUTCSeconds()-Math.round(-mn(e.timeZone,e)*60))}function cS(e){Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),jh(e)}function jh(e){const t=mn(e.timeZone,e),n=t>0?Math.floor(t):Math.ceil(t),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const o=-new Date(+e).getTimezoneOffset(),a=-new Date(+r).getTimezoneOffset(),i=o-a,c=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();i&&c&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+i);const l=o-n;l&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const d=new Date(+e);d.setUTCSeconds(0);const u=o>0?d.getSeconds():(d.getSeconds()-60)%60,m=Math.round(-(mn(e.timeZone,e)*60))%60;(m||u)&&(e.internal.setUTCSeconds(e.internal.getUTCSeconds()+m),Date.prototype.setUTCSeconds.call(e,Date.prototype.getUTCSeconds.call(e)+m+u));const h=mn(e.timeZone,e),p=h>0?Math.floor(h):Math.ceil(h),x=-new Date(+e).getTimezoneOffset()-p,v=p!==n,y=x-l;if(v&&y){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+y);const b=mn(e.timeZone,e),w=b>0?Math.floor(b):Math.ceil(b),C=p-w;C&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+C),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+C))}}class Pe extends bt{static tz(t,...n){return n.length?new Pe(...n,t):new Pe(Date.now(),t)}toISOString(){const[t,n,r]=this.tzComponents(),o=`${t}${n}:${r}`;return this.internal.toISOString().slice(0,-1)+o}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[t,n,r,o]=this.internal.toUTCString().split(" ");return`${t?.slice(0,-1)} ${r} ${n} ${o}`}toTimeString(){const t=this.internal.toUTCString().split(" ")[4],[n,r,o]=this.tzComponents();return`${t} GMT${n}${r}${o} (${sS(this.timeZone,this)})`}toLocaleString(t,n){return Date.prototype.toLocaleString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleDateString(t,n){return Date.prototype.toLocaleDateString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}toLocaleTimeString(t,n){return Date.prototype.toLocaleTimeString.call(this,t,{...n,timeZone:n?.timeZone||this.timeZone})}tzComponents(){const t=this.getTimezoneOffset(),n=t>0?"-":"+",r=String(Math.floor(Math.abs(t)/60)).padStart(2,"0"),o=String(Math.abs(t)%60).padStart(2,"0");return[n,r,o]}withTimeZone(t){return new Pe(+this,t)}[Symbol.for("constructDateFrom")](t){return new Pe(+new Date(t),this.timeZone)}}const Nh=6048e5,lS=864e5,bl=Symbol.for("constructDateFrom");function Ee(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&bl in e?e[bl](t):e instanceof Date?new e.constructor(t):new Date(t)}function he(e,t){return Ee(t||e,e)}function Sh(e,t,n){const r=he(e,n?.in);return isNaN(t)?Ee(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function kh(e,t,n){const r=he(e,n?.in);if(isNaN(t))return Ee(e,NaN);if(!t)return r;const o=r.getDate(),a=Ee(e,r.getTime());a.setMonth(r.getMonth()+t+1,0);const i=a.getDate();return o>=i?a:(r.setFullYear(a.getFullYear(),a.getMonth(),o),r)}let dS={};function ro(){return dS}function Gn(e,t){const n=ro(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=he(e,t?.in),a=o.getDay(),i=(a<r?7:0)+a-r;return o.setDate(o.getDate()-i),o.setHours(0,0,0,0),o}function _r(e,t){return Gn(e,{...t,weekStartsOn:1})}function Mh(e,t){const n=he(e,t?.in),r=n.getFullYear(),o=Ee(n,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const a=_r(o),i=Ee(n,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const c=_r(i);return n.getTime()>=a.getTime()?r+1:n.getTime()>=c.getTime()?r:r-1}function wl(e){const t=he(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function or(e,...t){const n=Ee.bind(null,t.find(r=>typeof r=="object"));return t.map(n)}function $r(e,t){const n=he(e,t?.in);return n.setHours(0,0,0,0),n}function Eh(e,t,n){const[r,o]=or(n?.in,e,t),a=$r(r),i=$r(o),c=+a-wl(a),l=+i-wl(i);return Math.round((c-l)/lS)}function uS(e,t){const n=Mh(e,t),r=Ee(e,0);return r.setFullYear(n,0,4),r.setHours(0,0,0,0),_r(r)}function fS(e,t,n){return Sh(e,t*7,n)}function mS(e,t,n){return kh(e,t*12,n)}function hS(e,t){let n,r=t?.in;return e.forEach(o=>{!r&&typeof o=="object"&&(r=Ee.bind(null,o));const a=he(o,r);(!n||n<a||isNaN(+a))&&(n=a)}),Ee(r,n||NaN)}function pS(e,t){let n,r=t?.in;return e.forEach(o=>{!r&&typeof o=="object"&&(r=Ee.bind(null,o));const a=he(o,r);(!n||n>a||isNaN(+a))&&(n=a)}),Ee(r,n||NaN)}function gS(e,t,n){const[r,o]=or(n?.in,e,t);return+$r(r)==+$r(o)}function Dh(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function xS(e){return!(!Dh(e)&&typeof e!="number"||isNaN(+he(e)))}function vS(e,t,n){const[r,o]=or(n?.in,e,t),a=r.getFullYear()-o.getFullYear(),i=r.getMonth()-o.getMonth();return a*12+i}function yS(e,t){const n=he(e,t?.in),r=n.getMonth();return n.setFullYear(n.getFullYear(),r+1,0),n.setHours(23,59,59,999),n}function bS(e,t){const[n,r]=or(e,t.start,t.end);return{start:n,end:r}}function wS(e,t){const{start:n,end:r}=bS(t?.in,e);let o=+n>+r;const a=o?+n:+r,i=o?r:n;i.setHours(0,0,0,0),i.setDate(1);let c=1;const l=[];for(;+i<=a;)l.push(Ee(n,i)),i.setMonth(i.getMonth()+c);return o?l.reverse():l}function CS(e,t){const n=he(e,t?.in);return n.setDate(1),n.setHours(0,0,0,0),n}function jS(e,t){const n=he(e,t?.in),r=n.getFullYear();return n.setFullYear(r+1,0,0),n.setHours(23,59,59,999),n}function Rh(e,t){const n=he(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}function Th(e,t){const n=ro(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=he(e,t?.in),a=o.getDay(),i=(a<r?-7:0)+6-(a-r);return o.setDate(o.getDate()+i),o.setHours(23,59,59,999),o}function NS(e,t){return Th(e,{...t,weekStartsOn:1})}const SS={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kS=(e,t,n)=>{let r;const o=SS[e];return typeof o=="string"?r=o:t===1?r=o.one:r=o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function ra(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const MS={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},ES={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},DS={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},RS={date:ra({formats:MS,defaultWidth:"full"}),time:ra({formats:ES,defaultWidth:"full"}),dateTime:ra({formats:DS,defaultWidth:"full"})},TS={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},OS=(e,t,n,r)=>TS[e];function fr(e){return(t,n)=>{const r=n?.context?String(n.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,c=n?.width?String(n.width):i;o=e.formattingValues[c]||e.formattingValues[i]}else{const i=e.defaultWidth,c=n?.width?String(n.width):e.defaultWidth;o=e.values[c]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(t):t;return o[a]}}const IS={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},PS={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},AS={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},_S={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},$S={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LS={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},BS=(e,t)=>{const n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},FS={ordinalNumber:BS,era:fr({values:IS,defaultWidth:"wide"}),quarter:fr({values:PS,defaultWidth:"wide",argumentCallback:e=>e-1}),month:fr({values:AS,defaultWidth:"wide"}),day:fr({values:_S,defaultWidth:"wide"}),dayPeriod:fr({values:$S,defaultWidth:"wide",formattingValues:LS,defaultFormattingWidth:"wide"})};function mr(e){return(t,n={})=>{const r=n.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(o);if(!a)return null;const i=a[0],c=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(c)?zS(c,m=>m.test(i)):WS(c,m=>m.test(i));let d;d=e.valueCallback?e.valueCallback(l):l,d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(i.length);return{value:d,rest:u}}}function WS(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function zS(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function HS(e){return(t,n={})=>{const r=t.match(e.matchPattern);if(!r)return null;const o=r[0],a=t.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;const c=t.slice(o.length);return{value:i,rest:c}}}const YS=/^(\d+)(th|st|nd|rd)?/i,US=/\d+/i,VS={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},GS={any:[/^b/i,/^(a|c)/i]},KS={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qS={any:[/1/i,/2/i,/3/i,/4/i]},XS={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},JS={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},ZS={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},QS={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},ek={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},tk={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},nk={ordinalNumber:HS({matchPattern:YS,parsePattern:US,valueCallback:e=>parseInt(e,10)}),era:mr({matchPatterns:VS,defaultMatchWidth:"wide",parsePatterns:GS,defaultParseWidth:"any"}),quarter:mr({matchPatterns:KS,defaultMatchWidth:"wide",parsePatterns:qS,defaultParseWidth:"any",valueCallback:e=>e+1}),month:mr({matchPatterns:XS,defaultMatchWidth:"wide",parsePatterns:JS,defaultParseWidth:"any"}),day:mr({matchPatterns:ZS,defaultMatchWidth:"wide",parsePatterns:QS,defaultParseWidth:"any"}),dayPeriod:mr({matchPatterns:ek,defaultMatchWidth:"any",parsePatterns:tk,defaultParseWidth:"any"})},sc={code:"en-US",formatDistance:kS,formatLong:RS,formatRelative:OS,localize:FS,match:nk,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rk(e,t){const n=he(e,t?.in);return Eh(n,Rh(n))+1}function Oh(e,t){const n=he(e,t?.in),r=+_r(n)-+uS(n);return Math.round(r/Nh)+1}function Ih(e,t){const n=he(e,t?.in),r=n.getFullYear(),o=ro(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,i=Ee(t?.in||e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const c=Gn(i,t),l=Ee(t?.in||e,0);l.setFullYear(r,0,a),l.setHours(0,0,0,0);const d=Gn(l,t);return+n>=+c?r+1:+n>=+d?r:r-1}function ok(e,t){const n=ro(),r=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Ih(e,t),a=Ee(t?.in||e,0);return a.setFullYear(o,0,r),a.setHours(0,0,0,0),Gn(a,t)}function Ph(e,t){const n=he(e,t?.in),r=+Gn(n,t)-+ok(n,t);return Math.round(r/Nh)+1}function fe(e,t){const n=e<0?"-":"",r=Math.abs(e).toString().padStart(t,"0");return n+r}const Kt={y(e,t){const n=e.getFullYear(),r=n>0?n:1-n;return fe(t==="yy"?r%100:r,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):fe(n+1,2)},d(e,t){return fe(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(e,t){return fe(e.getHours()%12||12,t.length)},H(e,t){return fe(e.getHours(),t.length)},m(e,t){return fe(e.getMinutes(),t.length)},s(e,t){return fe(e.getSeconds(),t.length)},S(e,t){const n=t.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return fe(o,t.length)}},Pn={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Cl={G:function(e,t,n){const r=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Kt.y(e,t)},Y:function(e,t,n,r){const o=Ih(e,r),a=o>0?o:1-o;if(t==="YY"){const i=a%100;return fe(i,2)}return t==="Yo"?n.ordinalNumber(a,{unit:"year"}):fe(a,t.length)},R:function(e,t){const n=Mh(e);return fe(n,t.length)},u:function(e,t){const n=e.getFullYear();return fe(n,t.length)},Q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return fe(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,t,n){const r=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return fe(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,t,n){const r=e.getMonth();switch(t){case"M":case"MM":return Kt.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(e,t,n){const r=e.getMonth();switch(t){case"L":return String(r+1);case"LL":return fe(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(e,t,n,r){const o=Ph(e,r);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):fe(o,t.length)},I:function(e,t,n){const r=Oh(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):fe(r,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):Kt.d(e,t)},D:function(e,t,n){const r=rk(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):fe(r,t.length)},E:function(e,t,n){const r=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(e,t,n,r){const o=e.getDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return fe(a,2);case"eo":return n.ordinalNumber(a,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(e,t,n,r){const o=e.getDay(),a=(o-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return fe(a,t.length);case"co":return n.ordinalNumber(a,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(e,t,n){const r=e.getDay(),o=r===0?7:r;switch(t){case"i":return String(o);case"ii":return fe(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(e,t,n){const o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,t,n){const r=e.getHours();let o;switch(r===12?o=Pn.noon:r===0?o=Pn.midnight:o=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,t,n){const r=e.getHours();let o;switch(r>=17?o=Pn.evening:r>=12?o=Pn.afternoon:r>=4?o=Pn.morning:o=Pn.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let r=e.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Kt.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):Kt.H(e,t)},K:function(e,t,n){const r=e.getHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,t.length)},k:function(e,t,n){let r=e.getHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):fe(r,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):Kt.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):Kt.s(e,t)},S:function(e,t){return Kt.S(e,t)},X:function(e,t,n){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(t){case"X":return Nl(r);case"XXXX":case"XX":return un(r);case"XXXXX":case"XXX":default:return un(r,":")}},x:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"x":return Nl(r);case"xxxx":case"xx":return un(r);case"xxxxx":case"xxx":default:return un(r,":")}},O:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+jl(r,":");case"OOOO":default:return"GMT"+un(r,":")}},z:function(e,t,n){const r=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+jl(r,":");case"zzzz":default:return"GMT"+un(r,":")}},t:function(e,t,n){const r=Math.trunc(+e/1e3);return fe(r,t.length)},T:function(e,t,n){return fe(+e,t.length)}};function jl(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),a=r%60;return a===0?n+String(o):n+String(o)+t+fe(a,2)}function Nl(e,t){return e%60===0?(e>0?"-":"+")+fe(Math.abs(e)/60,2):un(e,t)}function un(e,t=""){const n=e>0?"-":"+",r=Math.abs(e),o=fe(Math.trunc(r/60),2),a=fe(r%60,2);return n+o+t+a}const Sl=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ah=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},sk=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return Sl(e,t);let a;switch(r){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",Sl(r,t)).replace("{{time}}",Ah(o,t))},ak={p:Ah,P:sk},ik=/^D+$/,ck=/^Y+$/,lk=["D","DD","YY","YYYY"];function dk(e){return ik.test(e)}function uk(e){return ck.test(e)}function fk(e,t,n){const r=mk(e,t,n);if(console.warn(r),lk.includes(e))throw new RangeError(r)}function mk(e,t,n){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const hk=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,pk=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,gk=/^'([^]*?)'?$/,xk=/''/g,vk=/[a-zA-Z]/;function yk(e,t,n){const r=ro(),o=n?.locale??r.locale??sc,a=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,c=he(e,n?.in);if(!xS(c))throw new RangeError("Invalid time value");let l=t.match(pk).map(u=>{const m=u[0];if(m==="p"||m==="P"){const h=ak[m];return h(u,o.formatLong)}return u}).join("").match(hk).map(u=>{if(u==="''")return{isToken:!1,value:"'"};const m=u[0];if(m==="'")return{isToken:!1,value:bk(u)};if(Cl[m])return{isToken:!0,value:u};if(m.match(vk))throw new RangeError("Format string contains an unescaped latin alphabet character `"+m+"`");return{isToken:!1,value:u}});o.localize.preprocessor&&(l=o.localize.preprocessor(c,l));const d={firstWeekContainsDate:a,weekStartsOn:i,locale:o};return l.map(u=>{if(!u.isToken)return u.value;const m=u.value;(!n?.useAdditionalWeekYearTokens&&uk(m)||!n?.useAdditionalDayOfYearTokens&&dk(m))&&fk(m,t,String(e));const h=Cl[m[0]];return h(c,m,o.localize,d)}).join("")}function bk(e){const t=e.match(gk);return t?t[1].replace(xk,"'"):e}function wk(e,t){const n=he(e,t?.in),r=n.getFullYear(),o=n.getMonth(),a=Ee(n,0);return a.setFullYear(r,o+1,0),a.setHours(0,0,0,0),a.getDate()}function Ck(e,t){return he(e,t?.in).getMonth()}function jk(e,t){return he(e,t?.in).getFullYear()}function Nk(e,t){return+he(e)>+he(t)}function Sk(e,t){return+he(e)<+he(t)}function kk(e,t,n){const[r,o]=or(n?.in,e,t);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function Mk(e,t,n){const[r,o]=or(n?.in,e,t);return r.getFullYear()===o.getFullYear()}function Ek(e,t,n){const r=he(e,n?.in),o=r.getFullYear(),a=r.getDate(),i=Ee(e,0);i.setFullYear(o,t,15),i.setHours(0,0,0,0);const c=wk(i);return r.setMonth(t,Math.min(a,c)),r}function Dk(e,t,n){const r=he(e,n?.in);return isNaN(+r)?Ee(e,NaN):(r.setFullYear(t),r)}const kl=5,Rk=4;function Tk(e,t){const n=t.startOfMonth(e),r=n.getDay()>0?n.getDay():7,o=t.addDays(e,-r+1),a=t.addDays(o,kl*7-1);return t.getMonth(e)===t.getMonth(a)?kl:Rk}function _h(e,t){const n=t.startOfMonth(e),r=n.getDay();return r===1?n:r===0?t.addDays(n,-6):t.addDays(n,-1*(r-1))}function Ok(e,t){const n=_h(e,t),r=Tk(e,t);return t.addDays(n,r*7-1)}class Ke{constructor(t,n){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Pe.tz(this.options.timeZone):new this.Date,this.newDate=(r,o,a)=>this.overrides?.newDate?this.overrides.newDate(r,o,a):this.options.timeZone?new Pe(r,o,a,this.options.timeZone):new Date(r,o,a),this.addDays=(r,o)=>this.overrides?.addDays?this.overrides.addDays(r,o):Sh(r,o),this.addMonths=(r,o)=>this.overrides?.addMonths?this.overrides.addMonths(r,o):kh(r,o),this.addWeeks=(r,o)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,o):fS(r,o),this.addYears=(r,o)=>this.overrides?.addYears?this.overrides.addYears(r,o):mS(r,o),this.differenceInCalendarDays=(r,o)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,o):Eh(r,o),this.differenceInCalendarMonths=(r,o)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,o):vS(r,o),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):wS(r),this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):Ok(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):NS(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):yS(r),this.endOfWeek=(r,o)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,o):Th(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):jS(r),this.format=(r,o,a)=>{const i=this.overrides?.format?this.overrides.format(r,o,this.options):yk(r,o,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(i):i},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):Oh(r),this.getMonth=(r,o)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):Ck(r,this.options),this.getYear=(r,o)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):jk(r,this.options),this.getWeek=(r,o)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):Ph(r,this.options),this.isAfter=(r,o)=>this.overrides?.isAfter?this.overrides.isAfter(r,o):Nk(r,o),this.isBefore=(r,o)=>this.overrides?.isBefore?this.overrides.isBefore(r,o):Sk(r,o),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):Dh(r),this.isSameDay=(r,o)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,o):gS(r,o),this.isSameMonth=(r,o)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,o):kk(r,o),this.isSameYear=(r,o)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,o):Mk(r,o),this.max=r=>this.overrides?.max?this.overrides.max(r):hS(r),this.min=r=>this.overrides?.min?this.overrides.min(r):pS(r),this.setMonth=(r,o)=>this.overrides?.setMonth?this.overrides.setMonth(r,o):Ek(r,o),this.setYear=(r,o)=>this.overrides?.setYear?this.overrides.setYear(r,o):Dk(r,o),this.startOfBroadcastWeek=(r,o)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):_h(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):$r(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):_r(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):CS(r),this.startOfWeek=(r,o)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):Gn(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):Rh(r),this.options={locale:sc,...t},this.overrides=n}getDigitMap(){const{numerals:t="latn"}=this.options,n=new Intl.NumberFormat("en-US",{numberingSystem:t}),r={};for(let o=0;o<10;o++)r[o.toString()]=n.format(o);return r}replaceDigits(t){const n=this.getDigitMap();return t.replace(/\d/g,r=>n[r]||r)}formatNumber(t){return this.replaceDigits(t.toString())}getMonthYearOrder(){const t=this.options.locale?.code;return t&&Ke.yearFirstLocales.has(t)?"year-first":"month-first"}formatMonthYear(t){const{locale:n,timeZone:r,numerals:o}=this.options,a=n?.code;if(a&&Ke.yearFirstLocales.has(a))try{return new Intl.DateTimeFormat(a,{month:"long",year:"numeric",timeZone:r,numberingSystem:o}).format(t)}catch{}const i=this.getMonthYearOrder()==="year-first"?"y LLLL":"LLLL y";return this.format(t,i)}}Ke.yearFirstLocales=new Set(["eu","hu","ja","ja-Hira","ja-JP","ko","ko-KR","lt","lt-LT","lv","lv-LV","mn","mn-MN","zh","zh-CN","zh-HK","zh-TW"]);const Rt=new Ke;class $h{constructor(t,n,r=Rt){this.date=t,this.displayMonth=n,this.outside=!!(n&&!r.isSameMonth(t,n)),this.dateLib=r}isEqualTo(t){return this.dateLib.isSameDay(t.date,this.date)&&this.dateLib.isSameMonth(t.displayMonth,this.displayMonth)}}class Ik{constructor(t,n){this.date=t,this.weeks=n}}class Pk{constructor(t,n){this.days=n,this.weekNumber=t}}function Ak(e){return $.createElement("button",{...e})}function _k(e){return $.createElement("span",{...e})}function $k(e){const{size:t=24,orientation:n="left",className:r}=e;return $.createElement("svg",{className:r,width:t,height:t,viewBox:"0 0 24 24"},n==="up"&&$.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),n==="down"&&$.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),n==="left"&&$.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),n==="right"&&$.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function Lk(e){const{day:t,modifiers:n,...r}=e;return $.createElement("td",{...r})}function Bk(e){const{day:t,modifiers:n,...r}=e,o=$.useRef(null);return $.useEffect(()=>{n.focused&&o.current?.focus()},[n.focused]),$.createElement("button",{ref:o,...r})}var U;(function(e){e.Root="root",e.Chevron="chevron",e.Day="day",e.DayButton="day_button",e.CaptionLabel="caption_label",e.Dropdowns="dropdowns",e.Dropdown="dropdown",e.DropdownRoot="dropdown_root",e.Footer="footer",e.MonthGrid="month_grid",e.MonthCaption="month_caption",e.MonthsDropdown="months_dropdown",e.Month="month",e.Months="months",e.Nav="nav",e.NextMonthButton="button_next",e.PreviousMonthButton="button_previous",e.Week="week",e.Weeks="weeks",e.Weekday="weekday",e.Weekdays="weekdays",e.WeekNumber="week_number",e.WeekNumberHeader="week_number_header",e.YearsDropdown="years_dropdown"})(U||(U={}));var be;(function(e){e.disabled="disabled",e.hidden="hidden",e.outside="outside",e.focused="focused",e.today="today"})(be||(be={}));var it;(function(e){e.range_end="range_end",e.range_middle="range_middle",e.range_start="range_start",e.selected="selected"})(it||(it={}));var Ye;(function(e){e.weeks_before_enter="weeks_before_enter",e.weeks_before_exit="weeks_before_exit",e.weeks_after_enter="weeks_after_enter",e.weeks_after_exit="weeks_after_exit",e.caption_after_enter="caption_after_enter",e.caption_after_exit="caption_after_exit",e.caption_before_enter="caption_before_enter",e.caption_before_exit="caption_before_exit"})(Ye||(Ye={}));function Fk(e){const{options:t,className:n,components:r,classNames:o,...a}=e,i=[o[U.Dropdown],n].join(" "),c=t?.find(({value:l})=>l===a.value);return $.createElement("span",{"data-disabled":a.disabled,className:o[U.DropdownRoot]},$.createElement(r.Select,{className:i,...a},t?.map(({value:l,label:d,disabled:u})=>$.createElement(r.Option,{key:l,value:l,disabled:u},d))),$.createElement("span",{className:o[U.CaptionLabel],"aria-hidden":!0},c?.label,$.createElement(r.Chevron,{orientation:"down",size:18,className:o[U.Chevron]})))}function Wk(e){return $.createElement("div",{...e})}function zk(e){return $.createElement("div",{...e})}function Hk(e){const{calendarMonth:t,displayIndex:n,...r}=e;return $.createElement("div",{...r},e.children)}function Yk(e){const{calendarMonth:t,displayIndex:n,...r}=e;return $.createElement("div",{...r})}function Uk(e){return $.createElement("table",{...e})}function Vk(e){return $.createElement("div",{...e})}const Lh=f.createContext(void 0);function oo(){const e=f.useContext(Lh);if(e===void 0)throw new Error("useDayPicker() must be used within a custom component.");return e}function Gk(e){const{components:t}=oo();return $.createElement(t.Dropdown,{...e})}function Kk(e){const{onPreviousClick:t,onNextClick:n,previousMonth:r,nextMonth:o,...a}=e,{components:i,classNames:c,labels:{labelPrevious:l,labelNext:d}}=oo(),u=f.useCallback(h=>{o&&n?.(h)},[o,n]),m=f.useCallback(h=>{r&&t?.(h)},[r,t]);return $.createElement("nav",{...a},$.createElement(i.PreviousMonthButton,{type:"button",className:c[U.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":l(r),onClick:m},$.createElement(i.Chevron,{disabled:r?void 0:!0,className:c[U.Chevron],orientation:"left"})),$.createElement(i.NextMonthButton,{type:"button",className:c[U.NextMonthButton],tabIndex:o?void 0:-1,"aria-disabled":o?void 0:!0,"aria-label":d(o),onClick:u},$.createElement(i.Chevron,{disabled:o?void 0:!0,orientation:"right",className:c[U.Chevron]})))}function qk(e){const{components:t}=oo();return $.createElement(t.Button,{...e})}function Xk(e){return $.createElement("option",{...e})}function Jk(e){const{components:t}=oo();return $.createElement(t.Button,{...e})}function Zk(e){const{rootRef:t,...n}=e;return $.createElement("div",{...n,ref:t})}function Qk(e){return $.createElement("select",{...e})}function eM(e){const{week:t,...n}=e;return $.createElement("tr",{...n})}function tM(e){return $.createElement("th",{...e})}function nM(e){return $.createElement("thead",{"aria-hidden":!0},$.createElement("tr",{...e}))}function rM(e){const{week:t,...n}=e;return $.createElement("th",{...n})}function oM(e){return $.createElement("th",{...e})}function sM(e){return $.createElement("tbody",{...e})}function aM(e){const{components:t}=oo();return $.createElement(t.Dropdown,{...e})}const iM=Object.freeze(Object.defineProperty({__proto__:null,Button:Ak,CaptionLabel:_k,Chevron:$k,Day:Lk,DayButton:Bk,Dropdown:Fk,DropdownNav:Wk,Footer:zk,Month:Hk,MonthCaption:Yk,MonthGrid:Uk,Months:Vk,MonthsDropdown:Gk,Nav:Kk,NextMonthButton:qk,Option:Xk,PreviousMonthButton:Jk,Root:Zk,Select:Qk,Week:eM,WeekNumber:rM,WeekNumberHeader:oM,Weekday:tM,Weekdays:nM,Weeks:sM,YearsDropdown:aM},Symbol.toStringTag,{value:"Module"}));function Pt(e,t,n=!1,r=Rt){let{from:o,to:a}=e;const{differenceInCalendarDays:i,isSameDay:c}=r;return o&&a?(i(a,o)<0&&([o,a]=[a,o]),i(t,o)>=(n?1:0)&&i(a,t)>=(n?1:0)):!n&&a?c(a,t):!n&&o?c(o,t):!1}function Bh(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function ac(e){return!!(e&&typeof e=="object"&&"from"in e)}function Fh(e){return!!(e&&typeof e=="object"&&"after"in e)}function Wh(e){return!!(e&&typeof e=="object"&&"before"in e)}function zh(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function Hh(e,t){return Array.isArray(e)&&e.every(t.isDate)}function At(e,t,n=Rt){const r=Array.isArray(t)?t:[t],{isSameDay:o,differenceInCalendarDays:a,isAfter:i}=n;return r.some(c=>{if(typeof c=="boolean")return c;if(n.isDate(c))return o(e,c);if(Hh(c,n))return c.includes(e);if(ac(c))return Pt(c,e,!1,n);if(zh(c))return Array.isArray(c.dayOfWeek)?c.dayOfWeek.includes(e.getDay()):c.dayOfWeek===e.getDay();if(Bh(c)){const l=a(c.before,e),d=a(c.after,e),u=l>0,m=d<0;return i(c.before,c.after)?m&&u:u||m}return Fh(c)?a(e,c.after)>0:Wh(c)?a(c.before,e)>0:typeof c=="function"?c(e):!1})}function cM(e,t,n,r,o){const{disabled:a,hidden:i,modifiers:c,showOutsideDays:l,broadcastCalendar:d,today:u}=t,{isSameDay:m,isSameMonth:h,startOfMonth:p,isBefore:g,endOfMonth:x,isAfter:v}=o,y=n&&p(n),b=r&&x(r),w={[be.focused]:[],[be.outside]:[],[be.disabled]:[],[be.hidden]:[],[be.today]:[]},C={};for(const S of e){const{date:N,displayMonth:j}=S,k=!!(j&&!h(N,j)),D=!!(y&&g(N,y)),R=!!(b&&v(N,b)),O=!!(a&&At(N,a,o)),L=!!(i&&At(N,i,o))||D||R||!d&&!l&&k||d&&l===!1&&k,W=m(N,u??o.today());k&&w.outside.push(S),O&&w.disabled.push(S),L&&w.hidden.push(S),W&&w.today.push(S),c&&Object.keys(c).forEach(M=>{const E=c?.[M];E&&At(N,E,o)&&(C[M]?C[M].push(S):C[M]=[S])})}return S=>{const N={[be.focused]:!1,[be.disabled]:!1,[be.hidden]:!1,[be.outside]:!1,[be.today]:!1},j={};for(const k in w){const D=w[k];N[k]=D.some(R=>R===S)}for(const k in C)j[k]=C[k].some(D=>D===S);return{...N,...j}}}function lM(e,t,n={}){return Object.entries(e).filter(([,o])=>o===!0).reduce((o,[a])=>(n[a]?o.push(n[a]):t[be[a]]?o.push(t[be[a]]):t[it[a]]&&o.push(t[it[a]]),o),[t[U.Day]])}function dM(e){return{...iM,...e}}function uM(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([n,r])=>{n.startsWith("data-")&&(t[n]=r)}),t}function ic(){const e={};for(const t in U)e[U[t]]=`rdp-${U[t]}`;for(const t in be)e[be[t]]=`rdp-${be[t]}`;for(const t in it)e[it[t]]=`rdp-${it[t]}`;for(const t in Ye)e[Ye[t]]=`rdp-${Ye[t]}`;return e}function Yh(e,t,n){return(n??new Ke(t)).formatMonthYear(e)}const fM=Yh;function mM(e,t,n){return(n??new Ke(t)).format(e,"d")}function hM(e,t=Rt){return t.format(e,"LLLL")}function pM(e,t,n){return(n??new Ke(t)).format(e,"cccccc")}function gM(e,t=Rt){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)}function xM(){return""}function Uh(e,t=Rt){return t.format(e,"yyyy")}const vM=Uh,yM=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Yh,formatDay:mM,formatMonthCaption:fM,formatMonthDropdown:hM,formatWeekNumber:gM,formatWeekNumberHeader:xM,formatWeekdayName:pM,formatYearCaption:vM,formatYearDropdown:Uh},Symbol.toStringTag,{value:"Module"}));function bM(e){return e?.formatMonthCaption&&!e.formatCaption&&(e.formatCaption=e.formatMonthCaption),e?.formatYearCaption&&!e.formatYearDropdown&&(e.formatYearDropdown=e.formatYearCaption),{...yM,...e}}function wM(e,t,n,r,o){const{startOfMonth:a,startOfYear:i,endOfYear:c,eachMonthOfInterval:l,getMonth:d}=o;return l({start:i(e),end:c(e)}).map(h=>{const p=r.formatMonthDropdown(h,o),g=d(h),x=t&&h<a(t)||n&&h>a(n)||!1;return{value:g,label:p,disabled:x}})}function CM(e,t={},n={}){let r={...t?.[U.Day]};return Object.entries(e).filter(([,o])=>o===!0).forEach(([o])=>{r={...r,...n?.[o]}}),r}function jM(e,t,n){const r=e.today(),o=t?e.startOfISOWeek(r):e.startOfWeek(r),a=[];for(let i=0;i<7;i++){const c=e.addDays(o,i);a.push(c)}return a}function NM(e,t,n,r,o=!1){if(!e||!t)return;const{startOfYear:a,endOfYear:i,addYears:c,getYear:l,isBefore:d,isSameYear:u}=r,m=a(e),h=i(t),p=[];let g=m;for(;d(g,h)||u(g,h);)p.push(g),g=c(g,1);return o&&p.reverse(),p.map(x=>{const v=n.formatYearDropdown(x,r);return{value:l(x),label:v,disabled:!1}})}function Vh(e,t,n,r){let o=(r??new Ke(n)).format(e,"PPPP");return t.today&&(o=`Today, ${o}`),t.selected&&(o=`${o}, selected`),o}const SM=Vh;function Gh(e,t,n){return(n??new Ke(t)).formatMonthYear(e)}const kM=Gh;function MM(e,t,n,r){let o=(r??new Ke(n)).format(e,"PPPP");return t?.today&&(o=`Today, ${o}`),o}function EM(e){return"Choose the Month"}function DM(){return""}function RM(e){return"Go to the Next Month"}function TM(e){return"Go to the Previous Month"}function OM(e,t,n){return(n??new Ke(t)).format(e,"cccc")}function IM(e,t){return`Week ${e}`}function PM(e){return"Week Number"}function AM(e){return"Choose the Year"}const _M=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:kM,labelDay:SM,labelDayButton:Vh,labelGrid:Gh,labelGridcell:MM,labelMonthDropdown:EM,labelNav:DM,labelNext:RM,labelPrevious:TM,labelWeekNumber:IM,labelWeekNumberHeader:PM,labelWeekday:OM,labelYearDropdown:AM},Symbol.toStringTag,{value:"Module"})),so=e=>e instanceof HTMLElement?e:null,oa=e=>[...e.querySelectorAll("[data-animated-month]")??[]],$M=e=>so(e.querySelector("[data-animated-month]")),sa=e=>so(e.querySelector("[data-animated-caption]")),aa=e=>so(e.querySelector("[data-animated-weeks]")),LM=e=>so(e.querySelector("[data-animated-nav]")),BM=e=>so(e.querySelector("[data-animated-weekdays]"));function FM(e,t,{classNames:n,months:r,focused:o,dateLib:a}){const i=f.useRef(null),c=f.useRef(r),l=f.useRef(!1);f.useLayoutEffect(()=>{const d=c.current;if(c.current=r,!t||!e.current||!(e.current instanceof HTMLElement)||r.length===0||d.length===0||r.length!==d.length)return;const u=a.isSameMonth(r[0].date,d[0].date),m=a.isAfter(r[0].date,d[0].date),h=m?n[Ye.caption_after_enter]:n[Ye.caption_before_enter],p=m?n[Ye.weeks_after_enter]:n[Ye.weeks_before_enter],g=i.current,x=e.current.cloneNode(!0);if(x instanceof HTMLElement?(oa(x).forEach(w=>{if(!(w instanceof HTMLElement))return;const C=$M(w);C&&w.contains(C)&&w.removeChild(C);const S=sa(w);S&&S.classList.remove(h);const N=aa(w);N&&N.classList.remove(p)}),i.current=x):i.current=null,l.current||u||o)return;const v=g instanceof HTMLElement?oa(g):[],y=oa(e.current);if(y?.every(b=>b instanceof HTMLElement)&&v&&v.every(b=>b instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const b=LM(e.current);b&&(b.style.zIndex="1"),y.forEach((w,C)=>{const S=v[C];if(!S)return;w.style.position="relative",w.style.overflow="hidden";const N=sa(w);N&&N.classList.add(h);const j=aa(w);j&&j.classList.add(p);const k=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),b&&(b.style.zIndex=""),N&&N.classList.remove(h),j&&j.classList.remove(p),w.style.position="",w.style.overflow="",w.contains(S)&&w.removeChild(S)};S.style.pointerEvents="none",S.style.position="absolute",S.style.overflow="hidden",S.setAttribute("aria-hidden","true");const D=BM(S);D&&(D.style.opacity="0");const R=sa(S);R&&(R.classList.add(m?n[Ye.caption_before_exit]:n[Ye.caption_after_exit]),R.addEventListener("animationend",k));const O=aa(S);O&&O.classList.add(m?n[Ye.weeks_before_exit]:n[Ye.weeks_after_exit]),w.insertBefore(S,w.firstChild)})}})}function WM(e,t,n,r){const o=e[0],a=e[e.length-1],{ISOWeek:i,fixedWeeks:c,broadcastCalendar:l}=n??{},{addDays:d,differenceInCalendarDays:u,differenceInCalendarMonths:m,endOfBroadcastWeek:h,endOfISOWeek:p,endOfMonth:g,endOfWeek:x,isAfter:v,startOfBroadcastWeek:y,startOfISOWeek:b,startOfWeek:w}=r,C=l?y(o,r):i?b(o):w(o),S=l?h(a):i?p(g(a)):x(g(a)),N=u(S,C),j=m(a,o)+1,k=[];for(let O=0;O<=N;O++){const L=d(C,O);if(t&&v(L,t))break;k.push(L)}const R=(l?35:42)*j;if(c&&k.length<R){const O=R-k.length;for(let L=0;L<O;L++){const W=d(k[k.length-1],1);k.push(W)}}return k}function zM(e){const t=[];return e.reduce((n,r)=>{const o=r.weeks.reduce((a,i)=>a.concat(i.days.slice()),t.slice());return n.concat(o.slice())},t.slice())}function HM(e,t,n,r){const{numberOfMonths:o=1}=n,a=[];for(let i=0;i<o;i++){const c=r.addMonths(e,i);if(t&&c>t)break;a.push(c)}return a}function Ml(e,t,n,r){const{month:o,defaultMonth:a,today:i=r.today(),numberOfMonths:c=1}=e;let l=o||a||i;const{differenceInCalendarMonths:d,addMonths:u,startOfMonth:m}=r;if(n&&d(n,l)<c-1){const h=-1*(c-1);l=u(n,h)}return t&&d(l,t)<0&&(l=t),m(l)}function YM(e,t,n,r){const{addDays:o,endOfBroadcastWeek:a,endOfISOWeek:i,endOfMonth:c,endOfWeek:l,getISOWeek:d,getWeek:u,startOfBroadcastWeek:m,startOfISOWeek:h,startOfWeek:p}=r,g=e.reduce((x,v)=>{const y=n.broadcastCalendar?m(v,r):n.ISOWeek?h(v):p(v),b=n.broadcastCalendar?a(v):n.ISOWeek?i(c(v)):l(c(v)),w=t.filter(j=>j>=y&&j<=b),C=n.broadcastCalendar?35:42;if(n.fixedWeeks&&w.length<C){const j=t.filter(k=>{const D=C-w.length;return k>b&&k<=o(b,D)});w.push(...j)}const S=w.reduce((j,k)=>{const D=n.ISOWeek?d(k):u(k),R=j.find(L=>L.weekNumber===D),O=new $h(k,v,r);return R?R.days.push(O):j.push(new Pk(D,[O])),j},[]),N=new Ik(v,S);return x.push(N),x},[]);return n.reverseMonths?g.reverse():g}function UM(e,t){let{startMonth:n,endMonth:r}=e;const{startOfYear:o,startOfDay:a,startOfMonth:i,endOfMonth:c,addYears:l,endOfYear:d,newDate:u,today:m}=t,{fromYear:h,toYear:p,fromMonth:g,toMonth:x}=e;!n&&g&&(n=g),!n&&h&&(n=t.newDate(h,0,1)),!r&&x&&(r=x),!r&&p&&(r=u(p,11,31));const v=e.captionLayout==="dropdown"||e.captionLayout==="dropdown-years";return n?n=i(n):h?n=u(h,0,1):!n&&v&&(n=o(l(e.today??m(),-100))),r?r=c(r):p?r=u(p,11,31):!r&&v&&(r=d(e.today??m())),[n&&a(n),r&&a(r)]}function VM(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:o,numberOfMonths:a=1}=n,{startOfMonth:i,addMonths:c,differenceInCalendarMonths:l}=r,d=o?a:1,u=i(e);if(!t)return c(u,d);if(!(l(t,e)<a))return c(u,d)}function GM(e,t,n,r){if(n.disableNavigation)return;const{pagedNavigation:o,numberOfMonths:a}=n,{startOfMonth:i,addMonths:c,differenceInCalendarMonths:l}=r,d=o?a??1:1,u=i(e);if(!t)return c(u,-d);if(!(l(u,t)<=0))return c(u,-d)}function KM(e){const t=[];return e.reduce((n,r)=>n.concat(r.weeks.slice()),t.slice())}function As(e,t){const[n,r]=f.useState(e);return[t===void 0?n:t,r]}function qM(e,t){const[n,r]=UM(e,t),{startOfMonth:o,endOfMonth:a}=t,i=Ml(e,n,r,t),[c,l]=As(i,e.month?i:void 0);f.useEffect(()=>{const N=Ml(e,n,r,t);l(N)},[e.timeZone]);const d=HM(c,r,e,t),u=WM(d,e.endMonth?a(e.endMonth):void 0,e,t),m=YM(d,u,e,t),h=KM(m),p=zM(m),g=GM(c,n,e,t),x=VM(c,r,e,t),{disableNavigation:v,onMonthChange:y}=e,b=N=>h.some(j=>j.days.some(k=>k.isEqualTo(N))),w=N=>{if(v)return;let j=o(N);n&&j<o(n)&&(j=o(n)),r&&j>o(r)&&(j=o(r)),l(j),y?.(j)};return{months:m,weeks:h,days:p,navStart:n,navEnd:r,previousMonth:g,nextMonth:x,goToMonth:w,goToDay:N=>{b(N)||w(N.date)}}}var vt;(function(e){e[e.Today=0]="Today",e[e.Selected=1]="Selected",e[e.LastFocused=2]="LastFocused",e[e.FocusedModifier=3]="FocusedModifier"})(vt||(vt={}));function El(e){return!e[be.disabled]&&!e[be.hidden]&&!e[be.outside]}function XM(e,t,n,r){let o,a=-1;for(const i of e){const c=t(i);El(c)&&(c[be.focused]&&a<vt.FocusedModifier?(o=i,a=vt.FocusedModifier):r?.isEqualTo(i)&&a<vt.LastFocused?(o=i,a=vt.LastFocused):n(i.date)&&a<vt.Selected?(o=i,a=vt.Selected):c[be.today]&&a<vt.Today&&(o=i,a=vt.Today))}return o||(o=e.find(i=>El(t(i)))),o}function JM(e,t,n,r,o,a,i){const{ISOWeek:c,broadcastCalendar:l}=a,{addDays:d,addMonths:u,addWeeks:m,addYears:h,endOfBroadcastWeek:p,endOfISOWeek:g,endOfWeek:x,max:v,min:y,startOfBroadcastWeek:b,startOfISOWeek:w,startOfWeek:C}=i;let N={day:d,week:m,month:u,year:h,startOfWeek:j=>l?b(j,i):c?w(j):C(j),endOfWeek:j=>l?p(j):c?g(j):x(j)}[e](n,t==="after"?1:-1);return t==="before"&&r?N=v([r,N]):t==="after"&&o&&(N=y([o,N])),N}function Kh(e,t,n,r,o,a,i,c=0){if(c>365)return;const l=JM(e,t,n.date,r,o,a,i),d=!!(a.disabled&&At(l,a.disabled,i)),u=!!(a.hidden&&At(l,a.hidden,i)),m=l,h=new $h(l,m,i);return!d&&!u?h:Kh(e,t,h,r,o,a,i,c+1)}function ZM(e,t,n,r,o){const{autoFocus:a}=e,[i,c]=f.useState(),l=XM(t.days,n,r||(()=>!1),i),[d,u]=f.useState(a?l:void 0);return{isFocusTarget:x=>!!l?.isEqualTo(x),setFocused:u,focused:d,blur:()=>{c(d),u(void 0)},moveFocus:(x,v)=>{if(!d)return;const y=Kh(x,v,d,t.navStart,t.navEnd,e,o);y&&(t.goToDay(y),u(y))}}}function QM(e,t){const{selected:n,required:r,onSelect:o}=e,[a,i]=As(n,o?n:void 0),c=o?n:a,{isSameDay:l}=t,d=p=>c?.some(g=>l(g,p))??!1,{min:u,max:m}=e;return{selected:c,select:(p,g,x)=>{let v=[...c??[]];if(d(p)){if(c?.length===u||r&&c?.length===1)return;v=c?.filter(y=>!l(y,p))}else c?.length===m?v=[p]:v=[...v,p];return o||i(v),o?.(v,p,g,x),v},isSelected:d}}function e1(e,t,n=0,r=0,o=!1,a=Rt){const{from:i,to:c}=t||{},{isSameDay:l,isAfter:d,isBefore:u}=a;let m;if(!i&&!c)m={from:e,to:n>0?void 0:e};else if(i&&!c)l(i,e)?n===0?m={from:i,to:e}:o?m={from:i,to:void 0}:m=void 0:u(e,i)?m={from:e,to:i}:m={from:i,to:e};else if(i&&c)if(l(i,e)&&l(c,e))o?m={from:i,to:c}:m=void 0;else if(l(i,e))m={from:i,to:n>0?void 0:e};else if(l(c,e))m={from:e,to:n>0?void 0:e};else if(u(e,i))m={from:e,to:c};else if(d(e,i))m={from:i,to:e};else if(d(e,c))m={from:i,to:e};else throw new Error("Invalid range");if(m?.from&&m?.to){const h=a.differenceInCalendarDays(m.to,m.from);r>0&&h>r?m={from:e,to:void 0}:n>1&&h<n&&(m={from:e,to:void 0})}return m}function t1(e,t,n=Rt){const r=Array.isArray(t)?t:[t];let o=e.from;const a=n.differenceInCalendarDays(e.to,e.from),i=Math.min(a,6);for(let c=0;c<=i;c++){if(r.includes(o.getDay()))return!0;o=n.addDays(o,1)}return!1}function Dl(e,t,n=Rt){return Pt(e,t.from,!1,n)||Pt(e,t.to,!1,n)||Pt(t,e.from,!1,n)||Pt(t,e.to,!1,n)}function n1(e,t,n=Rt){const r=Array.isArray(t)?t:[t];if(r.filter(c=>typeof c!="function").some(c=>typeof c=="boolean"?c:n.isDate(c)?Pt(e,c,!1,n):Hh(c,n)?c.some(l=>Pt(e,l,!1,n)):ac(c)?c.from&&c.to?Dl(e,{from:c.from,to:c.to},n):!1:zh(c)?t1(e,c.dayOfWeek,n):Bh(c)?n.isAfter(c.before,c.after)?Dl(e,{from:n.addDays(c.after,1),to:n.addDays(c.before,-1)},n):At(e.from,c,n)||At(e.to,c,n):Fh(c)||Wh(c)?At(e.from,c,n)||At(e.to,c,n):!1))return!0;const i=r.filter(c=>typeof c=="function");if(i.length){let c=e.from;const l=n.differenceInCalendarDays(e.to,e.from);for(let d=0;d<=l;d++){if(i.some(u=>u(c)))return!0;c=n.addDays(c,1)}}return!1}function r1(e,t){const{disabled:n,excludeDisabled:r,selected:o,required:a,onSelect:i}=e,[c,l]=As(o,i?o:void 0),d=i?o:c;return{selected:d,select:(h,p,g)=>{const{min:x,max:v}=e,y=h?e1(h,d,x,v,a,t):void 0;return r&&n&&y?.from&&y.to&&n1({from:y.from,to:y.to},n,t)&&(y.from=h,y.to=void 0),i||l(y),i?.(y,h,p,g),y},isSelected:h=>d&&Pt(d,h,!1,t)}}function o1(e,t){const{selected:n,required:r,onSelect:o}=e,[a,i]=As(n,o?n:void 0),c=o?n:a,{isSameDay:l}=t;return{selected:c,select:(m,h,p)=>{let g=m;return!r&&c&&c&&l(m,c)&&(g=void 0),o||i(g),o?.(g,m,h,p),g},isSelected:m=>c?l(c,m):!1}}function s1(e,t){const n=o1(e,t),r=QM(e,t),o=r1(e,t);switch(e.mode){case"single":return n;case"multiple":return r;case"range":return o;default:return}}function a1(e){let t=e;t.timeZone&&(t={...e},t.today&&(t.today=new Pe(t.today,t.timeZone)),t.month&&(t.month=new Pe(t.month,t.timeZone)),t.defaultMonth&&(t.defaultMonth=new Pe(t.defaultMonth,t.timeZone)),t.startMonth&&(t.startMonth=new Pe(t.startMonth,t.timeZone)),t.endMonth&&(t.endMonth=new Pe(t.endMonth,t.timeZone)),t.mode==="single"&&t.selected?t.selected=new Pe(t.selected,t.timeZone):t.mode==="multiple"&&t.selected?t.selected=t.selected?.map(oe=>new Pe(oe,t.timeZone)):t.mode==="range"&&t.selected&&(t.selected={from:t.selected.from?new Pe(t.selected.from,t.timeZone):void 0,to:t.selected.to?new Pe(t.selected.to,t.timeZone):void 0}));const{components:n,formatters:r,labels:o,dateLib:a,locale:i,classNames:c}=f.useMemo(()=>{const oe={...sc,...t.locale};return{dateLib:new Ke({locale:oe,weekStartsOn:t.broadcastCalendar?1:t.weekStartsOn,firstWeekContainsDate:t.firstWeekContainsDate,useAdditionalWeekYearTokens:t.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:t.useAdditionalDayOfYearTokens,timeZone:t.timeZone,numerals:t.numerals},t.dateLib),components:dM(t.components),formatters:bM(t.formatters),labels:{..._M,...t.labels},locale:oe,classNames:{...ic(),...t.classNames}}},[t.locale,t.broadcastCalendar,t.weekStartsOn,t.firstWeekContainsDate,t.useAdditionalWeekYearTokens,t.useAdditionalDayOfYearTokens,t.timeZone,t.numerals,t.dateLib,t.components,t.formatters,t.labels,t.classNames]),{captionLayout:l,mode:d,navLayout:u,numberOfMonths:m=1,onDayBlur:h,onDayClick:p,onDayFocus:g,onDayKeyDown:x,onDayMouseEnter:v,onDayMouseLeave:y,onNextClick:b,onPrevClick:w,showWeekNumber:C,styles:S}=t,{formatCaption:N,formatDay:j,formatMonthDropdown:k,formatWeekNumber:D,formatWeekNumberHeader:R,formatWeekdayName:O,formatYearDropdown:L}=r,W=qM(t,a),{days:M,months:E,navStart:T,navEnd:A,previousMonth:I,nextMonth:P,goToMonth:B}=W,K=cM(M,t,T,A,a),{isSelected:G,select:ee,selected:te}=s1(t,a)??{},{blur:le,focused:ie,isFocusTarget:F,moveFocus:Z,setFocused:ae}=ZM(t,W,K,G??(()=>!1),a),{labelDayButton:H,labelGridcell:re,labelGrid:se,labelMonthDropdown:pe,labelNav:Se,labelPrevious:qe,labelNext:Xe,labelWeekday:Ht,labelWeekNumber:ao,labelWeekNumberHeader:sr,labelYearDropdown:ht}=o,Dn=f.useMemo(()=>jM(a,t.ISOWeek),[a,t.ISOWeek]),ln=d!==void 0||p!==void 0,Rn=f.useCallback(()=>{I&&(B(I),w?.(I))},[I,B,w]),Tn=f.useCallback(()=>{P&&(B(P),b?.(P))},[B,P,b]),_s=f.useCallback((oe,ge)=>X=>{X.preventDefault(),X.stopPropagation(),ae(oe),ee?.(oe.date,ge,X),p?.(oe.date,ge,X)},[ee,p,ae]),$s=f.useCallback((oe,ge)=>X=>{ae(oe),g?.(oe.date,ge,X)},[g,ae]),Yt=f.useCallback((oe,ge)=>X=>{le(),h?.(oe.date,ge,X)},[le,h]),Ut=f.useCallback((oe,ge)=>X=>{const me={ArrowLeft:[X.shiftKey?"month":"day",t.dir==="rtl"?"after":"before"],ArrowRight:[X.shiftKey?"month":"day",t.dir==="rtl"?"before":"after"],ArrowDown:[X.shiftKey?"year":"week","after"],ArrowUp:[X.shiftKey?"year":"week","before"],PageUp:[X.shiftKey?"year":"month","before"],PageDown:[X.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(me[X.key]){X.preventDefault(),X.stopPropagation();const[ue,q]=me[X.key];Z(ue,q)}x?.(oe.date,ge,X)},[Z,x,t.dir]),dn=f.useCallback((oe,ge)=>X=>{v?.(oe.date,ge,X)},[v]),io=f.useCallback((oe,ge)=>X=>{y?.(oe.date,ge,X)},[y]),pt=f.useCallback(oe=>ge=>{const X=Number(ge.target.value),me=a.setMonth(a.startOfMonth(oe),X);B(me)},[a,B]),co=f.useCallback(oe=>ge=>{const X=Number(ge.target.value),me=a.setYear(a.startOfMonth(oe),X);B(me)},[a,B]),{className:Ls,style:Bs}=f.useMemo(()=>({className:[c[U.Root],t.className].filter(Boolean).join(" "),style:{...S?.[U.Root],...t.style}}),[c,t.className,t.style,S]),ar=uM(t),ir=f.useRef(null);FM(ir,!!t.animate,{classNames:c,months:E,focused:ie,dateLib:a});const Fs={dayPickerProps:t,selected:te,select:ee,isSelected:G,months:E,nextMonth:P,previousMonth:I,goToMonth:B,getModifiers:K,components:n,classNames:c,styles:S,labels:o,formatters:r};return $.createElement(Lh.Provider,{value:Fs},$.createElement(n.Root,{rootRef:t.animate?ir:void 0,className:Ls,style:Bs,dir:t.dir,id:t.id,lang:t.lang,nonce:t.nonce,title:t.title,role:t.role,"aria-label":t["aria-label"],"aria-labelledby":t["aria-labelledby"],...ar},$.createElement(n.Months,{className:c[U.Months],style:S?.[U.Months]},!t.hideNavigation&&!u&&$.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:c[U.Nav],style:S?.[U.Nav],"aria-label":Se(),onPreviousClick:Rn,onNextClick:Tn,previousMonth:I,nextMonth:P}),E.map((oe,ge)=>$.createElement(n.Month,{"data-animated-month":t.animate?"true":void 0,className:c[U.Month],style:S?.[U.Month],key:ge,displayIndex:ge,calendarMonth:oe},u==="around"&&!t.hideNavigation&&ge===0&&$.createElement(n.PreviousMonthButton,{type:"button",className:c[U.PreviousMonthButton],tabIndex:I?void 0:-1,"aria-disabled":I?void 0:!0,"aria-label":qe(I),onClick:Rn,"data-animated-button":t.animate?"true":void 0},$.createElement(n.Chevron,{disabled:I?void 0:!0,className:c[U.Chevron],orientation:t.dir==="rtl"?"right":"left"})),$.createElement(n.MonthCaption,{"data-animated-caption":t.animate?"true":void 0,className:c[U.MonthCaption],style:S?.[U.MonthCaption],calendarMonth:oe,displayIndex:ge},l?.startsWith("dropdown")?$.createElement(n.DropdownNav,{className:c[U.Dropdowns],style:S?.[U.Dropdowns]},(()=>{const X=l==="dropdown"||l==="dropdown-months"?$.createElement(n.MonthsDropdown,{key:"month",className:c[U.MonthsDropdown],"aria-label":pe(),classNames:c,components:n,disabled:!!t.disableNavigation,onChange:pt(oe.date),options:wM(oe.date,T,A,r,a),style:S?.[U.Dropdown],value:a.getMonth(oe.date)}):$.createElement("span",{key:"month"},k(oe.date,a)),me=l==="dropdown"||l==="dropdown-years"?$.createElement(n.YearsDropdown,{key:"year",className:c[U.YearsDropdown],"aria-label":ht(a.options),classNames:c,components:n,disabled:!!t.disableNavigation,onChange:co(oe.date),options:NM(T,A,r,a,!!t.reverseYears),style:S?.[U.Dropdown],value:a.getYear(oe.date)}):$.createElement("span",{key:"year"},L(oe.date,a));return a.getMonthYearOrder()==="year-first"?[me,X]:[X,me]})(),$.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},N(oe.date,a.options,a))):$.createElement(n.CaptionLabel,{className:c[U.CaptionLabel],role:"status","aria-live":"polite"},N(oe.date,a.options,a))),u==="around"&&!t.hideNavigation&&ge===m-1&&$.createElement(n.NextMonthButton,{type:"button",className:c[U.NextMonthButton],tabIndex:P?void 0:-1,"aria-disabled":P?void 0:!0,"aria-label":Xe(P),onClick:Tn,"data-animated-button":t.animate?"true":void 0},$.createElement(n.Chevron,{disabled:P?void 0:!0,className:c[U.Chevron],orientation:t.dir==="rtl"?"left":"right"})),ge===m-1&&u==="after"&&!t.hideNavigation&&$.createElement(n.Nav,{"data-animated-nav":t.animate?"true":void 0,className:c[U.Nav],style:S?.[U.Nav],"aria-label":Se(),onPreviousClick:Rn,onNextClick:Tn,previousMonth:I,nextMonth:P}),$.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":d==="multiple"||d==="range","aria-label":se(oe.date,a.options,a)||void 0,className:c[U.MonthGrid],style:S?.[U.MonthGrid]},!t.hideWeekdays&&$.createElement(n.Weekdays,{"data-animated-weekdays":t.animate?"true":void 0,className:c[U.Weekdays],style:S?.[U.Weekdays]},C&&$.createElement(n.WeekNumberHeader,{"aria-label":sr(a.options),className:c[U.WeekNumberHeader],style:S?.[U.WeekNumberHeader],scope:"col"},R()),Dn.map(X=>$.createElement(n.Weekday,{"aria-label":Ht(X,a.options,a),className:c[U.Weekday],key:String(X),style:S?.[U.Weekday],scope:"col"},O(X,a.options,a)))),$.createElement(n.Weeks,{"data-animated-weeks":t.animate?"true":void 0,className:c[U.Weeks],style:S?.[U.Weeks]},oe.weeks.map(X=>$.createElement(n.Week,{className:c[U.Week],key:X.weekNumber,style:S?.[U.Week],week:X},C&&$.createElement(n.WeekNumber,{week:X,style:S?.[U.WeekNumber],"aria-label":ao(X.weekNumber,{locale:i}),className:c[U.WeekNumber],scope:"row",role:"rowheader"},D(X.weekNumber,a)),X.days.map(me=>{const{date:ue}=me,q=K(me);if(q[be.focused]=!q.hidden&&!!ie?.isEqualTo(me),q[it.selected]=G?.(ue)||q.selected,ac(te)){const{from:Oe,to:Fe}=te;q[it.range_start]=!!(Oe&&Fe&&a.isSameDay(ue,Oe)),q[it.range_end]=!!(Oe&&Fe&&a.isSameDay(ue,Fe)),q[it.range_middle]=Pt(te,ue,!0,a)}const Ae=CM(q,S,t.modifiersStyles),gt=lM(q,c,t.modifiersClassNames),Be=!ln&&!q.hidden?re(ue,q,a.options,a):void 0;return $.createElement(n.Day,{key:`${a.format(ue,"yyyy-MM-dd")}_${a.format(me.displayMonth,"yyyy-MM")}`,day:me,modifiers:q,className:gt.join(" "),style:Ae,role:"gridcell","aria-selected":q.selected||void 0,"aria-label":Be,"data-day":a.format(ue,"yyyy-MM-dd"),"data-month":me.outside?a.format(ue,"yyyy-MM"):void 0,"data-selected":q.selected||void 0,"data-disabled":q.disabled||void 0,"data-hidden":q.hidden||void 0,"data-outside":me.outside||void 0,"data-focused":q.focused||void 0,"data-today":q.today||void 0},!q.hidden&&ln?$.createElement(n.DayButton,{className:c[U.DayButton],style:S?.[U.DayButton],type:"button",day:me,modifiers:q,disabled:q.disabled||void 0,tabIndex:F(me)?0:-1,"aria-label":H(ue,q,a.options,a),onClick:_s(me,q),onBlur:Yt(me,q),onFocus:$s(me,q),onKeyDown:Ut(me,q),onMouseEnter:dn(me,q),onMouseLeave:io(me,q)},j(ue,a.options,a)):!q.hidden&&j(me.date,a.options,a))})))))))),t.footer&&$.createElement(n.Footer,{className:c[U.Footer],style:S?.[U.Footer],role:"status","aria-live":"polite"},t.footer)))}function Wa({className:e,classNames:t,showOutsideDays:n=!0,captionLayout:r="label",buttonVariant:o="ghost",formatters:a,components:i,...c}){const l=ic();return s.jsx(a1,{showOutsideDays:n,className:_("bg-background group/calendar p-3 [--cell-size:40px] [[data-slot=card-content]_&]:bg-transparent [[data-slot=popover-content]_&]:bg-transparent",String.raw`rtl:**:[.rdp-button\_next>svg]:rotate-180`,String.raw`rtl:**:[.rdp-button\_previous>svg]:rotate-180`,e),captionLayout:r,formatters:{formatMonthDropdown:d=>d.toLocaleString("default",{month:"short"}),...a,formatWeekdayName:d=>d.toLocaleString("default",{weekday:"short"})},classNames:{root:_("w-fit",l.root),months:_("relative flex flex-col gap-4 md:flex-row",l.months),month:_("flex w-full flex-col gap-4",l.month),nav:_("absolute inset-x-0 top-0 flex w-full items-center justify-between gap-1",l.nav),button_previous:_(fc({variant:o}),"h-(--cell-size) w-(--cell-size) select-none p-0 aria-disabled:opacity-50",l.button_previous),button_next:_(fc({variant:o}),"h-(--cell-size) w-(--cell-size) select-none p-0 aria-disabled:opacity-50",l.button_next),month_caption:_("flex h-(--cell-size) w-full items-center justify-center px-(--cell-size)",l.month_caption),dropdowns:_("flex h-(--cell-size) w-full items-center justify-center gap-1.5 text-sm font-medium",l.dropdowns),dropdown_root:_("has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border",l.dropdown_root),dropdown:_("bg-popover absolute inset-0 opacity-0",l.dropdown),caption_label:_("select-none font-medium",r==="label"?"text-sm":"[&>svg]:text-muted-foreground flex h-8 items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5",l.caption_label),table:"w-full border-collapse",weekdays:_("flex",l.weekdays),weekday:_("text-muted-foreground flex-1 select-none rounded-md text-[0.8rem] font-normal",l.weekday),week:_("mt-2 flex w-full",l.week),week_number_header:_("w-(--cell-size) select-none",l.week_number_header),week_number:_("text-muted-foreground select-none text-[0.8rem]",l.week_number),day:_("group/day relative aspect-square h-full w-full select-none p-0 text-center [&:first-child[data-selected=true]_button]:rounded-l-md [&:last-child[data-selected=true]_button]:rounded-r-md",l.day),range_start:_("bg-accent rounded-l-md",l.range_start),range_middle:_("rounded-none",l.range_middle),range_end:_("bg-accent rounded-r-md",l.range_end),today:_("bg-accent text-accent-foreground rounded-md data-[selected=true]:rounded-none",l.today),outside:_("text-muted-foreground aria-selected:text-muted-foreground",l.outside),disabled:_("text-muted-foreground opacity-50",l.disabled),hidden:_("invisible",l.hidden),...t},components:{Root:({className:d,rootRef:u,...m})=>s.jsx("div",{"data-slot":"calendar",ref:u,className:_(d),...m}),Chevron:({className:d,orientation:u,...m})=>u==="left"?s.jsx(E0,{className:_("size-4",d),...m}):u==="right"?s.jsx(Ui,{className:_("size-4",d),...m}):s.jsx(Ns,{className:_("size-4",d),...m}),DayButton:i1,WeekNumber:({children:d,...u})=>s.jsx("td",{...u,children:s.jsx("div",{className:"flex size-(--cell-size) items-center justify-center text-center",children:d})}),...i},...c})}function i1({className:e,day:t,modifiers:n,...r}){const o=ic(),a=f.useRef(null);return f.useEffect(()=>{n.focused&&a.current?.focus()},[n.focused]),s.jsx(z,{ref:a,variant:"ghost",size:"icon","data-day":t.date.toLocaleDateString(),"data-selected-single":n.selected&&!n.range_start&&!n.range_end&&!n.range_middle,"data-range-start":n.range_start,"data-range-end":n.range_end,"data-range-middle":n.range_middle,className:_("data-[selected-single=true]:bg-primary data-[selected-single=true]:text-primary-foreground data-[range-middle=true]:bg-accent data-[range-middle=true]:text-accent-foreground data-[range-start=true]:bg-primary data-[range-start=true]:text-primary-foreground data-[range-end=true]:bg-primary data-[range-end=true]:text-primary-foreground group-data-[focused=true]/day:border-ring group-data-[focused=true]/day:ring-ring/50 flex aspect-square h-auto w-full min-w-(--cell-size) flex-col gap-1 font-normal leading-none data-[range-end=true]:rounded-md data-[range-middle=true]:rounded-none data-[range-start=true]:rounded-md group-data-[focused=true]/day:relative group-data-[focused=true]/day:z-10 group-data-[focused=true]/day:ring-[3px] [&>span]:text-xs [&>span]:opacity-70",o.day,e),...r})}const c1=Array.from({length:24},(e,t)=>({label:`${t}`.padStart(2,"0"),value:`${t}`})),l1=Array.from({length:60},(e,t)=>({label:`${t}`.padStart(2,"0"),value:`${t}`}));function Rl({children:e,value:t,options:n,onValueChange:r}){return s.jsxs("span",{className:"has-focus:border-ring border-input shadow-xs has-focus:ring-ring/50 has-focus:ring-[3px] relative rounded-md border rdp-dropdown_root",children:[s.jsx("select",{className:"bg-popover absolute inset-0 opacity-0 rdp-dropdown rdp-hours_dropdown","aria-label":"Choose the Hour",value:t,onChange:o=>{r?.(o.currentTarget.value)},children:n.map(o=>s.jsx("option",{value:o.value,children:o.label},o.value))}),s.jsxs("span",{className:"select-none h-(--cell-size) font-medium [&>svg]:text-muted-foreground flex items-center gap-1 rounded-md pl-2 pr-1 text-sm [&>svg]:size-3.5 rdp-caption_label","aria-hidden":!0,children:[e??t,s.jsx(Ns,{})]})]})}function d1({value:e,displayFormatter:t=i=>i?Rr(i):"",onChange:n,children:r,onBlur:o,type:a="datetime-local"}){const i=V(),[c,l]=f.useState(!1),d=typeof t=="function"?t:m=>m?.format(t),u=e?J(e):J();return s.jsxs(bn,{open:c,onOpenChange:m=>{l(m),m||o?.()},children:[s.jsx(wn,{children:s.jsxs("div",{className:"flex justify-center items-center relative cursor-pointer",children:[r,s.jsx("div",{className:"mx-2",children:d(e?u:void 0)})]})}),s.jsxs(nn,{className:"w-auto overflow-hidden p-3 flex flex-col gap-2",align:"center",side:"bottom",sideOffset:-36,children:[s.jsx(Wa,{mode:"single",captionLayout:"dropdown",className:"rounded-md p-0",selected:u.toDate(),onSelect:m=>{m&&n?.(m.getTime())}}),s.jsxs("div",{className:"flex justify-between items-center [--cell-size:--spacing(8)] px-2",children:[s.jsx("span",{className:"text-sm",children:i("time")}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Rl,{value:u.format("HH"),options:c1,onValueChange:m=>{const h=u.hour(Number(m));n?.(h.unix()*1e3)}}),s.jsx("span",{children:":"}),s.jsx(Rl,{value:u.format("mm"),options:l1,onValueChange:m=>{const h=u.minute(Number(m));n?.(h.unix()*1e3)}})]})]})]})]})}function za({children:e,icon:t,className:n,onDelete:r}){return e?s.jsxs("div",{className:_("relative",n),children:[e,s.jsx("button",{className:"delete-button cursor-pointer absolute top-0 right-0 w-4 h-4 flex justify-center items-center translate-x-[30%] -translate-y-[30%] rounded-full bg-destructive",type:"button",onClick:r,children:t??s.jsx("i",{className:"icon-[mdi--close] text-white size-3"})})]}):null}const u1="*",f1="image/png,image/jpeg,image/gif,image/webp",Tl=".json,application/json",Ha=({accept:e,multiple:t})=>{const n=document.createElement("input");return n.type="file",n.accept=e??u1,n.multiple=t??!1,new Promise((r,o)=>{n.addEventListener("change",()=>{if(n.files===null){o();return}r(Array.from(n.files))}),n.addEventListener("error",o),n.click()})};function qh({source:e,className:t,alt:n,style:r}){const[o,a]=f.useState("loading"),[i,c]=f.useState(typeof e=="string"?e:""),l=f.useRef(null);f.useEffect(()=>{const m=Ce.getState().currentBookId;if(!m)return;if(!(e instanceof File)){if(Ot.getOnlineAsset){Ot.getOnlineAsset?.(e,m).then(p=>{if(p===void 0){c(e);return}const g=URL.createObjectURL(p);l.current=g,c(g)});return}return c(e),()=>{}}const h=URL.createObjectURL(e);return l.current=h,c(h),()=>{l.current&&(URL.revokeObjectURL(l.current),l.current=null)}},[e]);const d=f.useCallback(()=>{a("loaded")},[]),u=f.useCallback(()=>{a("error")},[]);return i===""?null:s.jsx("img",{"data-state":o,src:i,className:t,alt:n,style:r,onLoad:d,onError:u})}const cc=f.createContext(null),m1=e=>[{label:"1",cols:2},{label:"2",cols:2},{label:"3",cols:2},{label:"c",cols:4},{label:"4",cols:2},{label:"5",cols:2},{label:"6",cols:2},{label:"+",cols:1},{label:"-",cols:1},{label:"7",cols:2},{label:"8",cols:2},{label:"9",cols:2},{label:"x",cols:1},{label:"",cols:1},{label:"r",cols:2},...e?[{label:"0",cols:1},{label:e==="double-zero"?"00":"000",cols:2},{label:".",cols:1}]:[{label:"0",cols:2},{label:".",cols:2}],{label:"=",cols:4}],h1=["+","-","x",""],Xh=e=>h1.includes(e),Mo=e=>e[0]==="0"&&e.length>1&&e[1]!=="."?Mo(e.slice(1)):e,ia=(e,t)=>{const n=e.indexOf(".")===-1?e.length:e.indexOf(".");return e.slice(0,n+t+1)},Ol=(e,t)=>{const n=e.findIndex((a,i)=>i!==0&&Xh(a));if(n===-1)return[ia(Mo(e),t)];const r=e.slice(0,n),o=e.slice(n+1);return[ia(Mo(r),t),e[n],ia(Mo(o),t)].filter(a=>a.length>0)},Il=e=>e.length===0?0:Number(e.join("")),Ya=(e,t)=>{const[n,r,o]=e,a=Il(n);if(r===void 0||o===void 0)return a;const i=Il(o),c=l=>Number(l.toFixed(t));switch(r){case"+":return c(a+i);case"-":return c(a-i);case"x":return c(a*i);case"":return c(a/i)}},Jh=(e,t,n)=>{const r=n??[["0"]],o=`${e}`;if(o==="c"){const c=r.flat();return c.pop(),Ol(c,t)}const a=r[2]??r[0];if(o===".")return a.includes(".")?[...r]:(a.push(o),[...r]);if(Xh(o)){if(r[1]){const c=[`${Ya(r,t)}`.split("")];return Jh(o,t,c)}return r[1]=o,[...r]}if(o==="=")return[`${Ya(r,t)}`.split("")];const i=r.flat();return i.length>16?r:(i.push(o),Ol(i,t))},p1=e=>{const[t,n,r]=e;return`${t.join("")}${n??""}${r?.join("")??""}`},g1=e=>[`${e}`.split("")],x1=({children:e,initialValue:t,onValueChange:n,precision:r=3,input:o,multiplyKey:a})=>{const[i,c]=f.useState(()=>g1(t??0)),l=f.useMemo(()=>m1(a),[a]),d=f.useCallback(u=>{u!=="r"&&c(m=>{const p=u.split("").reduce((g,x)=>Jh(x,r,g),m);return Promise.resolve().then(()=>{n?.(Ya(p,r))}),p})},[n,r]);return f.useEffect(()=>{if(o){const u=h=>{const p=h.key;l.every(g=>g.label!==p)||d(p)},m=h=>{h.key==="Backspace"&&(h.preventDefault(),d("c"))};return document.addEventListener("keypress",u),document.addEventListener("keydown",m),()=>{document.removeEventListener("keypress",u),document.removeEventListener("keydown",m)}}},[o,l,d]),s.jsx(cc.Provider,{value:{handleButtonClick:d,formula:i,Layout:l},children:e})},v1=({className:e})=>{const{formula:t}=f.useContext(cc);return s.jsx("div",{"data-calculator-value":!0,className:_(e),children:p1(t).split("").map((n,r)=>s.jsx("span",{children:n==="x"?"":n},r))})},y1=({className:e,onKey:t})=>{const n=V(),{handleButtonClick:r,Layout:o}=f.useContext(cc);return s.jsx("div",{className:_("grid grid-cols-8 gap-2",e),children:o.map(a=>s.jsx(z,{variant:"ghost","data-label":a.label,onPointerDown:()=>{r(a.label),t?.(a.label)},className:_((a.cols??1)>1&&"col-span-2","h-full text-lg font-semibold bg-background/10 active:bg-background/50 transition-all",a.label==="c"&&"bg-destructive/60"),children:a.label==="c"?s.jsx("i",{className:"icon-[mdi--clear-outline]"}):a.label==="r"?s.jsxs("div",{className:"flex flex-col gap-1 items-center",children:[s.jsx("i",{className:"icon-[mdi--reload]"}),s.jsx("div",{className:"text-xs",children:n("add-again")})]}):a.label==="x"?s.jsx("span",{"data-label":!0,children:""}):s.jsx("span",{"data-label":!0,children:a.label})},a.label))})},ca={Root:x1,Value:v1,Keyboard:y1},b1=({onValueChange:e,onError:t,children:n,className:r,ref:o})=>{const a=()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(i=>{const{latitude:c,longitude:l,accuracy:d}=i.coords;e?.({latitude:c,longitude:l,accuracy:d})},t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};return"geolocation"in navigator?s.jsx("button",{ref:o,type:"button",onClick:a,className:_(r),children:n}):null};function w1({recommends:e,children:t,onSelect:n}){const r=V(),[o,a]=f.useState(!1);return f.useEffect(()=>{e?.length&&setTimeout(()=>{a(!0)},400)},[e?.length]),e?.length?s.jsxs(bn,{open:o,onOpenChange:a,children:[s.jsx(wn,{children:t}),s.jsxs(nn,{side:"top",align:"end",sideOffset:12,className:"p-2 px-3 w-fit flex gap-1 items-center text-sm",onOpenAutoFocus:i=>{i.preventDefault()},children:[s.jsx("div",{className:"opacity-60",children:r("recommend-comments")}),s.jsx("div",{className:"flex gap-2",children:e.map((i,c)=>s.jsx("button",{type:"button",className:"cursor-pointer border rounded-sm px-1 flex items-center active:bg-foreground/20",onClick:()=>n?.(i),children:i},c))})]})]}):t}function Pl({children:e,selected:t,color:n,onClick:r}){return s.jsxs("div",{onClick:r,className:_("flex flex-shrink-0 items-center justify-center gap-2 with-tag-color border border-input px-2 py-1 rounded-md cursor-pointer",`tag-${n}`),children:[s.jsx("div",{className:_("w-3 h-3 bg-[var(--current-tag-color)] rounded-full",t?"":"opacity-40")}),s.jsx("div",{className:`${t?"text-[var(--current-tag-color)]":"opacity-40"}`,children:e})]})}function C1({selected:e,group:t,onSelectChange:n}){const r=t.tags.filter(a=>e.includes(a.id)),o=r.length===0?t.name:r.length===1?`#${r[0].name}`:`#${r[0].name} +${r.length-1}`;if(t.tagIds?.length===1){const a=t.tagIds[0],i=r.some(c=>c.id===a);return s.jsx(Pl,{color:t.color,selected:i,onClick:()=>{n(i?t.tagIds?.filter(c=>c!==a)??[]:[...t.tagIds??[],a])},children:o})}return s.jsxs(Un,{children:[s.jsx(Vn,{className:"flex-shrink-0",children:s.jsx(Pl,{color:t.color,selected:r.length>0,children:o})}),s.jsx(Cn,{align:"start",children:t.tags.map(a=>s.jsxs(Or,{checked:e.includes(a.id),onCheckedChange:i=>{if(i){if(t.singleSelect){n([...e.filter(c=>!t.tagIds?.includes(c)),a.id],a.preferCurrency?{preferCurrency:a.preferCurrency}:void 0);return}n([...e,a.id],a.preferCurrency?{preferCurrency:a.preferCurrency}:void 0);return}t.required&&r.length===1||n(e.filter(c=>c!==a.id))},children:["#",a.name]},a.id))})]})}function j1({selectedTags:e,onSelectChange:t,isCreate:n}){const{grouped:r}=Mn(),o=f.useCallback((c,...l)=>t(Array.from(new Set(c)),...l),[t]),a=()=>{if(e===void 0&&n){const c=r.filter(d=>d.required).map(d=>d.tags?.[0]).filter(d=>d!==void 0),l=c.findLast(d=>d.preferCurrency!==void 0)?.preferCurrency;o(c.map(d=>d.id),l?{preferCurrency:l}:void 0)}},i=f.useRef(a);return i.current=a,f.useEffect(()=>{i.current()},[]),s.jsx(s.Fragment,{children:r.filter(c=>c.tags.length>0).map(c=>s.jsx(C1,{group:c,selected:e??[],onSelectChange:o},c.id))})}const Al={type:"expense",comment:"",amount:0,categoryId:Gi[0].id};function N1({edit:e,onCancel:t,onConfirm:n}){const r=V(),o=()=>{t?.()},{baseCurrency:a,convert:i,quickCurrencies:c,allCurrencies:l}=er(),{incomes:d,expenses:u,categories:m}=Wt(),h=e===void 0,p=f.useMemo(()=>{if(!h)return;const E=rl()?.category?.[0];return E?m.find(A=>A.id===E):void 0},[h,m]),g=f.useMemo(()=>h?rl()?.comment:void 0,[h]),[x,v]=f.useState(()=>{const M={...Al,categoryId:p?.id??Al.categoryId,time:Date.now(),...e};return e?.currency?.target===a.id&&delete M.currency,M});Mn();const y=x.type==="expense"?u:d,b=f.useMemo(()=>{const M=y.find(E=>E.id===x.categoryId||E.children.some(T=>T.id===x.categoryId));return M?.children?M.children:y.find(E=>E.id===M?.parent)?.children},[x.categoryId,y]),w=f.useCallback(()=>{n?.({...x})},[n,x]),C=async()=>{const[M]=await Ha({accept:f1});v(E=>({...E,images:[...E.images??[],M]}))},S=f.useRef(null),N=f.useRef(!e);f.useEffect(()=>{!N.current||!Jt.getState().autoLocateWhenAddBill||S.current?.click?.()},[]);const j=f.useRef(null),[k,D]=f.useState(!1);f.useEffect(()=>{j.current?.focus?.()},[]),f.useEffect(()=>{if(k){const M=E=>{E.key==="Enter"&&w()};return document.addEventListener("keypress",M),()=>{document.removeEventListener("keypress",M)}}},[k,w]);const R=l.find(M=>M.id===(x.currency?.target??a.id))??a,O=M=>v(E=>{if(M===a.id)return{...E,amount:E.currency?.amount??E.amount,currency:void 0};const{predict:T}=i(Qe(E.currency?.amount??E.amount),M,a.id,E.time);return{...E,amount:fn(T),currency:{base:a.id,target:M,amount:E.currency?.amount??E.amount}}}),L=x?.currency?Qe(x.currency.amount):x?.amount?Qe(x?.amount):0,W=Jt(M=>{if(!(!M.multiplyKey||M.multiplyKey==="off"))return M.multiplyKey==="double-zero"?"double-zero":"triple-zero"});return s.jsx(ca.Root,{multiplyKey:W,initialValue:L,onValueChange:M=>{v(E=>{if(E.currency){const{predict:T}=i(M,E.currency.target,E.currency.base,E.time);return{...E,amount:fn(T),currency:{...E.currency,amount:fn(M)}}}return{...E,amount:fn(M)}})},input:k,children:s.jsxs(Te,{className:"h-full gap-2 pb-0 overflow-y-auto scrollbar-hidden",onBack:o,title:s.jsxs("div",{className:"pl-[54px] w-full min-h-12 rounded-lg flex pt-2 pb-0 overflow-hidden scrollbar-hidden",children:[s.jsx("div",{className:"text-white",children:s.jsx(_i,{className:"w-24 h-12 relative bg-stone-900 rounded-lg p-1 flex justify-center items-center",checked:x.type==="income",onCheckedChange:()=>{v(M=>({...M,type:M.type==="expense"?"income":"expense",categoryId:M.type==="expense"?Pm[0].id:Gi[0].id}))},children:s.jsx(Ff,{className:"w-1/2 h-full flex justify-center items-center transition-all rounded-md bg-red-700 -translate-x-[22px] data-[state=checked]:bg-green-700 data-[state=checked]:translate-x-[21px]",children:s.jsx("span",{className:"text-[8px]",children:x.type==="expense"?r("expense"):r("income")})})})}),s.jsxs("div",{className:"flex-1 flex bg-stone-400 focus:outline rounded-lg ml-2 px-2 relative",children:[c.length>0&&s.jsxs(Et,{value:R?.id,onValueChange:M=>{O(M)},children:[s.jsx("div",{className:"flex items-center",children:s.jsx(Dt,{className:"w-fit outline-none ring-none border-none shadow-none p-0 [&_svg]:hidden",children:s.jsx("div",{className:"flex items-center font-semibold text-2xl text-white",children:R?.symbol})})}),s.jsx(zt,{children:c.map(M=>s.jsxs(Re,{value:M.id,children:[M.label,`(${M.symbol})`]},M.id))})]}),s.jsxs("button",{ref:j,type:"button",onFocus:()=>{D(!0)},onBlur:()=>{D(!1)},className:"flex-1 flex flex-col justify-center items-end overflow-x-scroll outline-none",children:[x.currency&&s.jsxs("div",{className:"absolute text-white text-[8px] top-0",children:[" ",a.symbol," ",Qe(x.amount)," ",a.label]}),s.jsx(ca.Value,{className:_("text-white text-3xl font-semibold text-right bg-transparent after:inline-block after:content-['|'] after:opacity-0 after:font-thin after:translate-y-[-3px] ",k&&"after:animate-caret-blink")}),x.amount<0&&s.jsx("div",{className:"absolute text-red-700 text-[8px] bottom-0",children:r("bill-negative-tip")})]})]})]}),children:[s.jsxs("div",{className:"flex-1 flex-shrink-0 overflow-y-auto min-h-[80px] scrollbar-hidden flex flex-col px-2 text-sm font-medium gap-2",children:[s.jsx("div",{className:"flex flex-col min-h-[80px] grow-[2] shrink overflow-y-auto scrollbar-hidden w-full",children:s.jsxs("div",{className:_("grid gap-1",Oa(y)),children:[y.map(M=>s.jsx(Ko,{category:M,selected:x.categoryId===M.id,onMouseDown:()=>{v(E=>({...E,categoryId:M.id}))}},M.id)),s.jsxs("button",{type:"button",className:_("rounded-lg border flex-1 py-1 px-2 h-8 flex gap-2 items-center justify-center whitespace-nowrap cursor-pointer"),onClick:()=>{Ch(x.type)},children:[s.jsx("i",{className:"icon-[mdi--settings]"}),r("edit")]})]})}),(b?.length??0)>0&&s.jsx("div",{className:"flex flex-col min-h-[68px] grow-[1] shrink max-h-fit overflow-y-auto rounded-md border p-2 shadow scrollbar-hidden",children:s.jsx("div",{className:_("grid gap-1",Oa(b)),children:b?.map(M=>s.jsx(Ko,{category:M,selected:x.categoryId===M.id,onMouseDown:()=>{v(E=>({...E,categoryId:M.id}))}},M.id))})})]}),s.jsxs("div",{className:"w-full h-[40px] flex-shrink-0 flex-grow-0 flex gap-1 py-1 items-center overflow-x-auto px-2 text-sm font-medium scrollbar-hidden",children:[s.jsx(j1,{isCreate:h,selectedTags:x.tagIds,onSelectChange:(M,E)=>{v(T=>({...T,tagIds:M})),E?.preferCurrency&&O(E.preferCurrency)}}),s.jsxs("button",{type:"button",className:_("rounded-lg border py-1 px-2 my-1 mr-1 h-8 flex gap-2 items-center justify-center whitespace-nowrap cursor-pointer"),onClick:()=>{Ym()},children:[s.jsx("i",{className:"icon-[mdi--tag-text-outline]"}),r("edit-tags")]})]}),s.jsxs("div",{className:_("h-[calc(480px+160px*(var(--bekh,0.5)-0.5))] sm:h-[calc(380px+160px*(var(--bekh,0.5)-0.5))] min-h-[264px] max-h-[calc(100%-124px)]","keyboard-field flex gap-2 flex-col justify-start bg-stone-900 sm:rounded-b-md text-[white] p-2 pb-[max(env(safe-area-inset-bottom),8px)]"),children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex gap-2 items-center h-10",children:[s.jsxs("div",{className:"flex items-center h-full",children:[(x.images?.length??0)>0&&s.jsx("div",{className:"pr-2 flex gap-[6px] items-center overflow-x-auto max-w-22 h-full scrollbar-hidden",children:x.images?.map((M,E)=>s.jsx(za,{onDelete:()=>{v(T=>({...T,images:T.images?.filter(A=>A!==M)}))},children:s.jsx(qh,{source:M,alt:"",className:"w-6 h-6 object-cover rounded"})},E))}),(x.images?.length??0)<3&&s.jsx("button",{type:"button",className:"px-1 flex justify-center items-center rounded-full transition-all cursor-pointer",onClick:C,children:s.jsx("i",{className:"icon-xs icon-[mdi--image-plus-outline] text-[white]"})})]}),s.jsx("div",{className:"h-full flex items-center",children:x?.location?s.jsx(za,{onDelete:()=>{v(M=>({...M,location:void 0}))},children:s.jsx("i",{className:"w-5 icon-[mdi--location-radius]"})}):s.jsx(b1,{ref:S,className:"px-1 flex items-center justify-center",onValueChange:M=>{v(E=>({...E,location:M}))},children:s.jsx("i",{className:"icon-[mdi--add-location]"})})}),s.jsx("div",{className:"rounded-full transition-all hover:(bg-stone-700) active:(bg-stone-500)",children:s.jsx(d1,{value:x.time,onChange:M=>{v(E=>{if(!E.currency)return{...E,time:M};const{predict:T}=i(Qe(E.currency?.amount??E.amount),E.currency.target,a.id,M);return{...E,time:M,amount:fn(T),currency:{base:a.id,target:E.currency.target,amount:E.currency?.amount??E.amount}}})}})})]}),s.jsx(w1,{recommends:g,onSelect:M=>{v(E=>({...E,comment:`${E.comment} ${M}`}))},children:s.jsx("div",{className:"flex h-full flex-1",children:s.jsx(Vp,{value:x.comment,onChange:M=>{v(E=>({...E,comment:M.target.value}))},type:"text",className:"w-full bg-transparent text-white text-right placeholder-opacity-50 outline-none",placeholder:r("comment"),enterKeyHint:"done"})})})]}),s.jsx("button",{type:"button",className:"flex h-[80px] min-h-[48px] justify-center items-center bg-green-700 rounded-lg font-bold text-lg cursor-pointer",onClick:w,children:s.jsx("i",{className:"icon-[mdi--check] icon-md"})}),s.jsx(ca.Keyboard,{className:_("flex-1"),onKey:M=>{M==="r"&&(w(),setTimeout(()=>{lc()},10))}})]})]})})}const S1=we(N1,{dialogTitle:"Edit Bill",contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[85vh] sm:w-[90vw] sm:max-w-[600px]"}),[k1,Zh]=S1,lc=async()=>{const e=await Zh();await ne.getState().addBill(e)};function M1({edit:e,onConfirm:t,onCancel:n}){const r=V(),{id:o}=ke(),{categories:a}=Wt(),{baseCurrency:i,allCurrencies:c}=er(),l=ks(),d=l.find(N=>N.id===e?.creatorId),{tags:u}=Mn(),m=e?.tagIds?.map(N=>u.find(j=>j.id===N)).filter(N=>N!==void 0),{name:h,id:p}=d??{name:void 0,id:void 0},{id:g}=ke(),x=p===g;if(!e)return null;const v=a.find(N=>N.id===e.categoryId),y=e.creatorId===o||l.every(N=>N.id!==e.creatorId),b=async()=>{if(e?.id){const N=await Zh(e);await ne.getState().updateBill(e.id,N),t?.(!0)}},w=async()=>{e?.id&&(await ne.getState().removeBill(e?.id),t?.(!1))},C=()=>{n?.()},S=e.currency?.target===i.id?void 0:c.find(N=>N.id===e.currency?.target);return s.jsx("div",{children:s.jsxs("div",{className:"min-h-[320px] p-4 flex flex-col w-full h-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-12 h-12 flex-shrink-0 rounded-full bg-background border p-4 flex items-center justify-center",children:v?.icon&&s.jsx(Ps,{icon:v?.icon})}),s.jsx("div",{className:"flex text-md font-semibold px-2",children:s.jsx("div",{children:v?.name??""})})]}),s.jsxs("div",{className:`text-2xl font-bold flex overflow-x-auto ${e.type==="expense"?"text-red-700":"text-green-900"}`,children:[s.jsx("div",{children:e.type==="expense"?"-":"+"}),s.jsx("div",{children:Qe(e.amount)})]})]}),s.jsx("div",{className:"w-full border border-dashed my-2"}),s.jsxs("div",{className:"text-gray-500",children:[s.jsxs("div",{className:"flex justify-between items-center my-1 gap-2",children:[s.jsxs("div",{children:[r("comment"),":"]}),s.jsx("div",{className:"flex-1 overflow-x-auto text-right",children:e.comment})]}),s.jsxs("div",{className:"flex justify-between items-center my-1 gap-2",children:[s.jsxs("div",{children:[r("creator"),":"]}),s.jsx("div",{children:x?r("me"):h})]}),s.jsxs("div",{className:"flex justify-between items-center my-1 gap-2",children:[s.jsxs("div",{children:[r("time"),":"]}),s.jsx("div",{children:lC(e.time)})]}),S!==void 0&&s.jsxs("div",{className:"flex justify-between items-center my-1 gap-2",children:[s.jsx("div",{children:":"}),s.jsxs("div",{children:[S.symbol,Qe(e.currency.amount)," ",S.label]})]}),e.location&&s.jsxs("div",{className:"flex justify-between items-center my-1 gap-2",children:[s.jsxs("div",{children:[r("location"),":"]}),s.jsx("div",{children:`(${e.location.latitude.toFixed(4)},${e.location.longitude.toFixed(4)})`})]}),(m?.length??0)>0&&s.jsxs("div",{className:"flex justify-between items-start my-1",children:[s.jsxs("div",{children:[r("tags"),":"]}),s.jsx("div",{className:"flex flex-wrap gap-1 justify-end max-w-[80%]",children:m?.map(N=>s.jsxs("span",{children:["#",N.name]},N.id))})]})]}),e.images&&s.jsx("div",{className:"flex-1 py-2 flex gap-2 items-center justify-center max-w-full overflow-x-auto hidden-scrollbar",children:e.images.map((N,j)=>s.jsx(qh,{source:N,alt:"",className:"max-h-[200px] object-cover rounded min-w-24 min-h-24 data-[state=loading]:animate-dynamic-bg",style:{"--color-start":"color-mix(in oklab, var(--primary) 10%, transparent)","--color-end":"color-mix(in oklab, var(--primary) 80%, transparent)"}},j))})]}),s.jsxs("div",{className:"footer flex justify-between items-center",children:[s.jsx("div",{className:"flex",children:y&&s.jsx("button",{type:"button",className:"buttoned px-2 rounded-md text-red-600 cursor-pointer",onClick:w,children:r("delete")})}),s.jsxs("div",{className:"flex",children:[s.jsx("button",{type:"button",className:"buttoned px-2 rounded-md cursor-pointer",onClick:C,children:r("cancel")}),y&&s.jsx("button",{type:"button",className:"buttoned ml-2 px-2 rounded-md font-semibold cursor-pointer",onClick:b,children:r("edit")})]})]})]})})}const[E1,D1]=we(M1,{dialogTitle:"bill info",dialogModalClose:!0,fade:!0,swipe:!1});function _l({value:e,largeAmountThreshold:t=1/0,className:n=""}){const a=!(Math.abs(e)>=t)?2:0,i=Ra(e,0,a),[c,l]=i.split(".");return s.jsxs("div",{className:`inline-flex items-baseline ${n}`,title:`${e}`,children:[s.jsx("div",{className:"integer font-semibold",children:c}),l&&s.jsxs("div",{className:"decimal text-[0.8em] opacity-70",children:[".",l]})]})}function R1({bill:e,className:t,onClick:n,showTime:r}){const o=V(),{categories:a}=Wt(),{tags:i}=Mn(),c=f.useMemo(()=>a.find(v=>v.id===e.categoryId),[e.categoryId,a]),{id:l}=ke(),u=ks().find(v=>v.id===e.creatorId),m=u?.id===l,h=e.tagIds?.map(v=>i.find(y=>y.id===v)).filter(v=>v!==void 0),{baseCurrency:p,allCurrencies:g}=er(),x=e.currency?.target===p.id?void 0:g.find(v=>v.id===e.currency?.target);return s.jsxs("button",{type:"button",className:_("bill-item flex justify-between items-center px-4 py-4 buttoned cursor-pointer",t),onClick:n,children:[s.jsxs("div",{className:"flex items-center overflow-hidden",children:[s.jsx("div",{className:"rounded-full bg-background border w-10 h-10 flex items-center justify-center",children:c?.icon&&s.jsx(Ps,{icon:c.icon})}),s.jsxs("div",{className:"flex-1 flex flex-col px-4 overflow-hidden",children:[s.jsxs("div",{className:"flex text-md gap-1 h-6",children:[s.jsx("div",{className:"flex-shrink-0 font-semibold",children:c?c.name:""}),s.jsx("div",{className:"flex flex-wrap gap-x-2 gap-y-1",children:h?.map(v=>s.jsx("div",{className:"text-[10px] rounded border flex items-center p-[2px] h-3",children:v.name},v.id))})]}),s.jsxs("div",{className:"flex text-xs",children:[s.jsx("div",{children:m?o("me"):u?.name??"unknown-user"}),e.comment&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"px-1",children:"|"}),s.jsx("div",{className:"truncate",children:e.comment})]})]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:`text-lg font-bold truncate flex-shrink-0 flex flex-col ${e.type==="expense"?"text-red-700":e.type==="income"?"text-green-900":""}`,children:[s.jsx(_l,{value:Qe(e.amount)}),x&&s.jsxs("div",{className:"text-xs",children:[x.symbol,s.jsx(_l,{value:Qe(e.currency.amount)})]})]}),r&&s.jsx("div",{className:"text-[8px] text-foreground/60",children:dC(e.time)})]})]})}function $l({date:e,onClick:t}){return s.jsx("div",{className:"pl-12 pr-4 pt-4 pb-2 text-sm ledger-divider cursor-pointer",onClick:t,children:Rr(e)})}const T1=f.forwardRef(({bills:e,enableDivideAsOrdered:t,className:n,showTime:r,selectedIds:o,presence:a,onSelectChange:i,afterEdit:c,onItemShow:l,onVisibleDateChange:d,onDateClick:u},m)=>{const h=f.useRef(null);f.useImperativeHandle(m,()=>({scrollToIndex:x=>{p.scrollToIndex(x)}}));const p=PC({count:e.length,getScrollElement:()=>h.current,estimateSize:()=>60,overscan:5,paddingEnd:80}),g=o!==void 0;return f.useEffect(()=>{const x=h.current;if(!x)return;const v=()=>{const y=x.scrollTop,w=p.getVirtualItems().find(C=>C.start>=y);if(w){const C=e[w.index],S=J.unix(C.time/1e3);d?.(S)}};return x.addEventListener("scroll",v,{passive:!0}),v(),()=>x.removeEventListener("scroll",v)},[e,d,p]),f.useEffect(()=>{if(!a)return;const x=h.current?.querySelector("[data-main-ledger]");x&&(x.classList.add("animated-bill-list"),setTimeout(()=>{x.classList.remove("animated-bill-list")},1600))},[a]),s.jsx("div",{ref:h,className:n,style:{height:"100%",overflow:"auto"},children:s.jsx("div",{"data-main-ledger":!0,className:_(t&&"translate-x-0 before:block before:fixed before:top-0 before:left-9 before:w-[1px] before:h-[calc(100%-95px)] before:bg-foreground"),style:{height:`${p.getTotalSize()}px`,width:"100%",position:"relative"},children:p.getVirtualItems().map(x=>{const v=e[x.index],y=J.unix(v.time/1e3),b=t?(()=>{const w=e[x.index+1];if(!w)return;const C=J.unix(w.time/1e3);if(!C.isSame(y,"days"))return C})():void 0;return l?.(x.index),s.jsxs("div",{"data-index":x.index,ref:p.measureElement,style:{position:"absolute",top:`${x.start}px`,left:0,width:"100%"},children:[x.index===0&&t&&s.jsx($l,{date:y,onClick:()=>u?.(y)}),s.jsxs("div",{className:`w-full flex items-center overflow-hidden ledger-item item-${x.index}`,onClick:g?()=>{i?.(v.id)}:void 0,children:[g&&s.jsx(Ss,{checked:o.includes(v.id)}),s.jsx(R1,{bill:v,className:"flex-1 overflow-hidden",onClick:g?void 0:async()=>{await D1(v),c?.(v)},showTime:r})]}),b&&s.jsx($l,{date:b,onClick:()=>u?.(b)}),t&&x.index===e.length-1&&s.jsx("div",{className:"ledger-end flex items-center py-1 pl-12 text-xs before:absolute before:-translate-x-[15px] before:block before:size-2 before:rounded-full before:border",children:"The end"})]},x.key)})})})}),O1=({item:e,selectedValue:t,onValueChange:n,align:r})=>{const o=e.id===t;return e.children&&e.children.length>0?s.jsxs(Un,{children:[s.jsxs(Aa,{className:"flex justify-between items-center",onClick:()=>{n(e.id)},children:[s.jsx("span",{children:e.name}),s.jsxs("div",{className:"flex items-center",children:[o&&s.jsx(Dr,{className:"h-4 w-4 mr-2"}),s.jsx(Vn,{asChild:!0,children:s.jsx(Ui,{className:"h-4 w-4"})})]})]}),s.jsx(zm,{children:s.jsx(Cn,{align:r,sideOffset:8,alignOffset:-5,children:s.jsx(Qh,{levelItems:e.children||[],selectedValue:t,onValueChange:n,align:r})})})]}):s.jsxs(Aa,{className:"flex justify-between items-center",onSelect:()=>n(e.id),children:[s.jsx("span",{children:e.name}),o&&s.jsx(Dr,{className:"h-4 w-4"})]})},Qh=({levelItems:e,selectedValue:t,onValueChange:n,align:r})=>s.jsx(s.Fragment,{children:e.map(o=>o.asGroupLabel?s.jsx(Hm,{children:o.asGroupLabel},o.id):s.jsx(O1,{item:o,selectedValue:t,onValueChange:n,align:r},o.id))}),ep=(e,t)=>{for(const n of e){if(n.id===t)return n;if(n.children){const r=ep(n.children,t);if(r)return r}}return null},I1=({list:e,value:t,onValueChange:n,trigger:r,align:o,placeholder:a="Please select"})=>{const i=ep(e,t||"")?.name;return s.jsxs(Un,{children:[s.jsx(Vn,{asChild:!0,children:r||s.jsx(z,{variant:"outline",className:"w-fit justify-start",children:i||a})}),s.jsx(zm,{children:s.jsx(Cn,{align:o,className:"w-48",children:s.jsx(Qh,{levelItems:e,selectedValue:t,onValueChange:n,align:o})})})]})},P1=e=>pn({title:We(),start:mc({error:e("please-select-start-date")}),end:Xt(mc()),repeat:pn({unit:qp(["week","day","month","year"],{error:e("please-select-period-unit")}),value:pc().check(Xp(),Jp({message:e("period-must-be-positive-integer")}))}),joiners:hr(Kp([We(),pc()])).check(hc(1,{message:e("select-one-participant-at-least")})),totalBudget:Ea().check(ma(0,{message:e("budget-cannot-be-negative")})),categoriesBudget:Xt(hr(pn({id:We().check(hc(1,{message:e("please-select-a-category")})),budget:Ea().check(ma(0,{message:e("budget-cannot-be-negative")}))}))),onlyTags:Xt(hr(We())),excludeTags:Xt(hr(We()))});function A1({edit:e,onConfirm:t,onCancel:n}){const r=V(),o=ks(),{expenses:a}=Wt(),{tags:i}=Mn(),c=a,l=f.useMemo(()=>P1(r),[r]),d=Br({resolver:Fr(l),defaultValues:e?{...e,start:e?.start?J.unix(e.start/1e3).toDate():void 0,end:e?.end?J.unix(e.end/1e3).toDate():void 0}:{title:r("new-budget"),start:new Date,joiners:[],totalBudget:0,repeat:{value:1,unit:"month"},onlyTags:[],excludeTags:[]}}),{fields:u,append:m,remove:h}=Gp({name:"categoriesBudget",control:d.control});function p(g){const x={...g,start:g.start.getTime(),end:g.end?g.end.getTime():void 0};t?.(x)}return s.jsx(Wr,{...d,children:s.jsx("form",{className:"h-full w-full",onSubmit:d.handleSubmit(p),children:s.jsxs(Te,{className:"h-full sm:h-[55vh] gap-2",onBack:n,title:s.jsx(xe,{control:d.control,name:"title",render:({field:g})=>s.jsxs(ve,{children:[s.jsx(ye,{children:s.jsx(at,{placeholder:r("please-enter-budget-title"),...g,maxLength:50,className:"text-center"})}),s.jsx(ot,{})]})}),children:[s.jsxs("div",{className:"flex-1 w-full overflow-y-auto flex flex-col px-4 gap-2 pb-20",children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsx(xe,{control:d.control,name:"start",render:({field:g})=>s.jsxs(ve,{className:"flex flex-col flex-1",children:[s.jsx(Ne,{children:r("start-date")}),s.jsxs(bn,{children:[s.jsx(ye,{children:s.jsx(wn,{asChild:!0,children:s.jsxs(z,{variant:"outline",className:_("w-full pl-3 text-left font-normal",!g.value&&"text-muted-foreground"),children:[g.value?g.value.toLocaleDateString():s.jsx("span",{children:r("please-select-start-date")}),s.jsx(Hc,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(nn,{className:"w-auto min-h-[265px] p-3",align:"start",children:s.jsx(Wa,{className:"min-w-[240px] rounded-md p-0",mode:"single",captionLayout:"dropdown",selected:g.value,onSelect:g.onChange,disabled:x=>x<new Date("1900-01-01"),endMonth:new Date(new Date().getFullYear()+10,11),initialFocus:!0})})]}),s.jsx(ot,{})]})}),s.jsx(xe,{control:d.control,name:"end",render:({field:g})=>s.jsxs(ve,{className:"flex flex-col flex-1",children:[s.jsx(Ne,{children:r("end-date-optional")}),s.jsxs(bn,{children:[s.jsx(wn,{asChild:!0,children:s.jsx(ye,{children:s.jsxs(z,{variant:"outline",className:_("w-full pl-3 text-left font-normal",!g.value&&"text-muted-foreground"),children:[g.value?g.value.toLocaleDateString():s.jsx("span",{children:r("please-select-end-date")}),s.jsx(Hc,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(nn,{className:"w-auto min-h-[265px] p-4",align:"end",children:s.jsx(Wa,{mode:"single",captionLayout:"dropdown",className:"min-w-[240px] rounded-md p-0",selected:g.value,onSelect:g.onChange,endMonth:new Date(new Date().getFullYear()+10,11),disabled:x=>x<d.getValues("start"),initialFocus:!0})})]}),s.jsx(ot,{})]})})]}),s.jsx(xe,{control:d.control,name:"joiners",render:()=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("participants")}),s.jsx($n,{children:r("select-all-participants")}),o.map(g=>s.jsx(xe,{control:d.control,name:"joiners",render:({field:x})=>s.jsxs(ve,{className:"flex flex-row items-start space-x-3 space-y-0",children:[s.jsx(ye,{children:s.jsx(Ss,{checked:x.value?.includes(g.id),onCheckedChange:v=>v?x.onChange([...x.value,g.id]):x.onChange(x.value?.filter(y=>y!==g.id))})}),s.jsx(Ne,{className:"font-normal",children:g.name})]})},g.id)),s.jsx(ot,{})]})}),s.jsx(xe,{control:d.control,name:"totalBudget",render:({field:g})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("total-budget")}),s.jsx(ye,{children:s.jsx(at,{type:"number",placeholder:r("please-enter-total-budget"),...g,onChange:x=>{g.onChange(x.target.valueAsNumber)}})}),s.jsx(ot,{})]})}),s.jsxs("div",{className:"flex justify-between items-center gap-2",children:[s.jsx(xe,{control:d.control,name:"onlyTags",render:({field:g})=>{const x=i.filter(v=>g.value?.includes(v.id));return s.jsxs(ve,{children:[s.jsx(Ne,{children:r("tags-only")}),s.jsx($n,{children:r("tags-only-description")}),s.jsxs(Un,{children:[s.jsx(Vn,{asChild:!0,children:s.jsx(ye,{children:s.jsx(z,{variant:"outline",role:"combobox",className:"w-full justify-between",children:x.length>0?x.map(v=>v.name).join(", "):r("none")})})}),s.jsx(Cn,{align:"end",className:"w-full",children:i.map(v=>s.jsx(Or,{checked:g.value?.includes(v.id)??!1,onCheckedChange:y=>{const b=g.value||[];y?g.onChange([...b,v.id]):g.onChange(b.filter(w=>w!==v.id))},children:v.name},v.id))})]}),s.jsx(ot,{})]})}}),s.jsx(xe,{control:d.control,name:"excludeTags",render:({field:g})=>{const x=i.filter(v=>g.value?.includes(v.id));return s.jsxs(ve,{children:[s.jsx(Ne,{children:r("tags-excluded")}),s.jsx($n,{children:r("tags-excluded-description")}),s.jsxs(Un,{children:[s.jsx(Vn,{asChild:!0,children:s.jsx(ye,{children:s.jsx(z,{variant:"outline",role:"combobox",className:"w-full justify-between",children:x.length>0?x.map(v=>v.name).join(", "):r("none")})})}),s.jsx(Cn,{align:"end",className:"w-full",children:i.map(v=>s.jsx(Or,{checked:g.value?.includes(v.id)??!1,onCheckedChange:y=>{const b=g.value||[];y?g.onChange([...b,v.id]):g.onChange(b.filter(w=>w!==v.id))},children:v.name},v.id))})]}),s.jsx(ot,{})]})}})]}),s.jsxs("div",{className:"flex flex-col gap-2 rounded-md border p-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:r("period")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("set-budget-period")}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[r("every"),":"]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(xe,{control:d.control,name:"repeat.value",render:({field:g})=>s.jsxs(ve,{children:[s.jsx(ye,{children:s.jsx(at,{type:"number",step:"1",className:"text-end",placeholder:"xx",...g,onChange:x=>{g.onChange(x.target.valueAsNumber)}})}),s.jsx(ot,{})]})}),s.jsx(xe,{control:d.control,name:"repeat.unit",render:({field:g})=>s.jsxs(ve,{className:"space-y-0",children:[s.jsxs(Et,{onValueChange:g.onChange,defaultValue:g.value,children:[s.jsx(ye,{children:s.jsx(Dt,{children:s.jsx(En,{placeholder:r("period-unit")})})}),s.jsxs(zt,{align:"end",children:[s.jsx(Re,{value:"day",children:r("unit-day")}),s.jsx(Re,{value:"week",children:r("unit-week")}),s.jsx(Re,{value:"month",children:r("month")}),s.jsx(Re,{value:"year",children:r("year")})]})]}),s.jsx(ot,{})]})})]})]})]}),s.jsxs("div",{className:"flex flex-col gap-2 rounded-md border p-4",children:[s.jsx("h3",{className:"text-lg font-medium",children:r("categories-budget")}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r("categories-budget-description")}),u.map((g,x)=>s.jsxs("div",{className:"flex gap-4 justify-center items-center",children:[s.jsx("div",{className:"flex-1",children:s.jsx(xe,{control:d.control,name:`categoriesBudget.${x}.id`,render:({field:v})=>s.jsxs(ve,{className:"space-y-0",children:[s.jsx(Ne,{children:r("categories")}),s.jsx(I1,{align:"end",value:v.value,onValueChange:v.onChange,list:c}),s.jsx(ot,{})]})})}),s.jsx("div",{className:"flex-1",children:s.jsx(xe,{control:d.control,name:`categoriesBudget.${x}.budget`,render:({field:v})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("budget-money")}),s.jsx(ye,{children:s.jsx(at,{type:"number",placeholder:r("please-enter-budget-money"),...v,onChange:y=>{v.onChange(y.target.valueAsNumber)}})}),s.jsx(ot,{})]})})}),s.jsx(z,{type:"button",variant:"destructive",size:"icon",onClick:()=>h(x),className:"self-end",children:s.jsx(L0,{className:"h-4 w-4"})})]},g.id)),s.jsxs(z,{type:"button",variant:"outline",size:"sm",className:"mt-2",onClick:()=>m({id:"",budget:0}),children:[s.jsx(_0,{className:"h-4 w-4 mr-2"}),r("add-categories-budget")]})]})]}),s.jsx("div",{className:"p-2 w-full flex justify-end",children:s.jsx(z,{type:"submit",className:"sm:w-fit w-full",children:r("confirm")})})]})})})}const[_1,Ll]=we(A1,{dialogTitle:"Budget Edit",contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function tp(){const e=ne(jn(o=>o.infos?.meta.budgets??[])),t=f.useCallback(async o=>{if(!Ce.getState().currentBookId)return;const i=Qt();return await ne.getState().updateGlobalMeta(c=>(c.budgets===void 0&&(c.budgets=[]),c.budgets.push({...o,id:i}),c)),i},[]),n=f.useCallback(async(o,a)=>{Ce.getState().currentBookId&&await ne.getState().updateGlobalMeta(c=>{if(c.budgets===void 0)return c;if(a===void 0)return c.budgets=c.budgets.filter(d=>d.id!==o),c;const l=c.budgets.findIndex(d=>d.id===o);return l===-1||(c.budgets[l]={id:o,...a}),c})},[]),r=f.useCallback(async o=>{await ne.getState().updateGlobalMeta(a=>(a.budgets=o.map(i=>a.budgets?.find(c=>c.id===i.id)).filter(i=>i!==void 0),a))},[]);return{budgets:e,add:t,update:n,reorder:r}}const Bl=e=>J.unix(e/1e3).format("YYYY-MM-DD");function $1({onCancel:e}){const t=V(),{budgets:n,add:r,update:o,reorder:a}=tp();return s.jsxs(Te,{onBack:e,title:t("budget-manager"),children:[s.jsxs("div",{className:"flex items-center justify-between px-2",children:[s.jsx("div",{className:"px-2 text-xs text-foreground/80",children:t("budget-description")}),s.jsx(z,{variant:"ghost",className:"p-1 h-fit",onClick:async()=>{const i=await Ba(n.map(c=>({id:c.id,name:c.title})));await a(i)},children:s.jsx("i",{className:"icon-[mdi--reorder-horizontal]"})})]}),s.jsxs("div",{className:"w-full flex-1 overflow-y-auto flex flex-col gap-2 p-2",children:[s.jsxs(z,{variant:"outline",onClick:async()=>{const i=await Ll();i&&await r(i)},children:[s.jsx("i",{className:"icon-[mdi--add]"}),t("add-a-budget")]}),n.map(i=>s.jsx("div",{className:"border rounded-md shadow-md py-2 px-4 bg-green-900 text-white flex items-center gap-2",children:s.jsx("div",{className:"h-full flex-1 flex flex-col items-between justify-between",children:s.jsxs("div",{className:"flex-1 flex flex-col gap-2",children:[s.jsxs("div",{className:"w-full flex justify-between items-center",children:[s.jsx("div",{children:i.title}),s.jsx("div",{className:"text-3xl",children:i.totalBudget+(i.categoriesBudget?.reduce((c,l)=>c+l.budget,0)??0)})]}),s.jsxs("div",{className:"w-full text-xs flex items-center justify-between gap-2",children:[s.jsxs("div",{className:"flex-1 flex items-center justify-between",children:[s.jsxs("div",{className:"flex gap-1",children:[s.jsx("div",{children:Bl(i.start)}),i.end&&s.jsxs(s.Fragment,{children:[s.jsx("div",{children:"-"}),s.jsx("div",{children:Bl(i.end)})]}),s.jsx("div",{children:"-"}),t("repeat-by-value-unit",{value:i.repeat.value,unit:t(i.repeat.unit)})]}),s.jsx("div",{children:(i.categoriesBudget?.length??0)>0&&s.jsx("div",{children:t("categories-budget-included")})})]}),s.jsxs("div",{className:"flex justify-center items-center gap-2",children:[s.jsx(z,{size:"sm",variant:"secondary",className:"w-[24px] h-[24px] text-xs p-0",onClick:async()=>{const c=i.id,l=await Ll(i);l&&await o(c,l)},children:s.jsx("i",{className:"icon-[mdi--edit-outline]"})}),s.jsx(z,{variant:"destructive",className:"w-[24px] h-[24px] p-0",onClick:async()=>{if(!confirm(t("are-you-sure-to-delete-this-budget")))return;const l=i.id;await o(l)},children:s.jsx("i",{className:"icon-[mdi--delete]"})})]})]})]})})},i.id))]})]})}const[L1,np]=we($1,{dialogTitle:"Budget",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function B1(){const e=V();return s.jsx("div",{className:"backup",children:s.jsx(z,{onClick:()=>{np()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--calculator] size-5"}),e("budget-manager")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})})})}function rp({id:e,label:t,isOverlay:n}){V();const{attributes:r,listeners:o,setNodeRef:a,transform:i,transition:c,isDragging:l}=rc({id:e}),d={transform:Nt.Transform.toString(i),transition:c,opacity:l?.3:1,cursor:n?"grabbing":"grab",userSelect:"none"};return s.jsxs("div",{ref:a,style:d,...r,...o,className:`bg-background border rounded-md p-2 shadow-sm flex items-center justify-between 
                ${n?"shadow-xl ring-2 ring-primary/20 scale-[1.02]":"active:cursor-grabbing"}
            `,children:[s.jsx("div",{children:t}),s.jsx("i",{className:"icon-[mdi--reorder-horizontal] text-muted-foreground"})]})}function Fl({group:e,isGroupSortable:t}){const n=V(),{attributes:r,listeners:o,setNodeRef:a,transform:i,transition:c,isDragging:l}=rc({id:e.id,data:{type:"group",group:e},disabled:!t}),d={transform:Nt.Transform.toString(i),transition:c,opacity:l?.5:1};return s.jsxs("div",{ref:a,style:d,className:"bg-gray-50/50 dark:bg-gray-900/20 border rounded-lg p-3 flex flex-col gap-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsx("span",{className:"font-semibold text-sm text-foreground/80 pl-1",children:e.label}),t&&s.jsx("button",{...r,...o,className:"p-1 hover:bg-gray-200 dark:hover:bg-gray-800 rounded cursor-grab active:cursor-grabbing",children:s.jsx("i",{className:"icon-[mdi--reorder-horizontal] block"})})]}),s.jsx(nc,{items:e.items.map(u=>u.id),strategy:tc,children:s.jsxs("div",{className:"flex flex-col gap-2 min-h-[50px]",children:[e.items.length===0&&s.jsx("div",{className:"text-xs text-muted-foreground text-center py-4 border border-dashed rounded",children:e.empty??n("group-no-items")}),e.items.map(u=>s.jsx(rp,{...u},u.id))]})})]})}const F1=({groups:e,onGroupsChange:t,enableGroupSorting:n=!1,className:r,empty:o})=>{const[a,i]=f.useState(null),[c,l]=f.useState(null),[d,u]=f.useState(null),m=Km(Fn(Ts,{activationConstraint:{distance:5}}),Fn(Qi,{activationConstraint:{delay:100,tolerance:5}}),Fn(Rs)),h=y=>e.find(b=>b.id===y)?y:e.find(b=>b.items.some(w=>w.id===y))?.id,p=y=>{const{active:b}=y,w=b.id;i(w);const C=e.find(j=>j.id===w);if(C){u(C);return}const N=e.flatMap(j=>j.items).find(j=>j.id===w);N&&l(N)},g=y=>{const{active:b,over:w}=y,C=w?.id;if(!C||d)return;const S=h(b.id),N=h(C);if(!S||!N||S===N)return;const j=e.findIndex(T=>T.id===S),k=e.findIndex(T=>T.id===N),D=[...e],R=[...D[j].items],O=[...D[k].items],L=R.findIndex(T=>T.id===b.id),W=O.findIndex(T=>T.id===C);let M;if(W===-1)M=O.length+1;else{const A=w&&b.rect.current.translated&&b.rect.current.translated.top>w.rect.top+w.rect.height?1:0;M=W>=0?W+A:O.length+1}const[E]=R.splice(L,1);O.splice(M,0,E),D[j]={...D[j],items:R},D[k]={...D[k],items:O},t(D)},x=y=>{const{active:b,over:w}=y,C=w?.id;if(d&&C&&b.id!==C){const S=e.findIndex(j=>j.id===b.id),N=e.findIndex(j=>j.id===C);t(Ar(e,S,N))}if(!d&&C){const S=h(b.id),N=h(C);if(S&&N&&S===N){const j=e.findIndex(R=>R.id===S),k=e[j].items.findIndex(R=>R.id===b.id),D=e[j].items.findIndex(R=>R.id===C);if(k!==D){const R=[...e];R[j]={...R[j],items:Ar(R[j].items,k,D)},t(R)}}}i(null),l(null),u(null)},v={sideEffects:hh({styles:{active:{opacity:"0.5"}}})};return s.jsxs(fh,{sensors:m,collisionDetection:Sj,onDragStart:p,onDragOver:g,onDragEnd:x,modifiers:[ph],children:[s.jsx("div",{className:`flex flex-col gap-4 ${r||""}`,children:s.jsx(nc,{items:e.map(y=>y.id),strategy:tc,children:e.map(y=>s.jsx(Fl,{group:y,isGroupSortable:n},y.id))})}),s.jsx(AN,{dropAnimation:v,children:a?d?s.jsx("div",{className:"opacity-90 rotate-2 cursor-grabbing",children:s.jsx(Fl,{group:d,isGroupSortable:!0})}):s.jsx(rp,{id:c.id,label:c.label,isOverlay:!0}):null})]})};function W1({edit:e,onCancel:t,onConfirm:n}){const[r,o]=f.useState([...e?.group??[]]),a=f.useCallback(c=>{o(c)},[]),i=V();return s.jsx(Te,{title:i("sort"),onBack:t,right:s.jsx(z,{onClick:()=>{n?.(r)},children:i("confirm")}),className:"h-full overflow-hidden",children:s.jsx("div",{className:"flex-1 w-full overflow-y-auto py-2",children:s.jsx(F1,{groups:r,onGroupsChange:a,enableGroupSorting:e?.enableGroupSorting,className:"h-full max-h-full px-2"})})})}const[z1,H1]=we(W1,{dialogTitle:"Sort Group",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"}),Y1=e=>pn({name:We().check(Nr(50,{message:e("max-name-length-limit",{n:50})})),symbol:We().check(Nr(5,{message:e("max-name-length-limit",{n:5})})),rateToBase:Ea().check(ma(0,{message:e("rate-must-positive")}))}),U1=({edit:e,onConfirm:t,onCancel:n})=>{const r=V(),{baseCurrency:o}=er(),a=f.useMemo(()=>Y1(r),[r]),i=Br({resolver:Fr(a),defaultValues:e}),c=e===void 0,l=()=>{const d=u=>{t?.({...u,id:e?.id})};i.handleSubmit(d)()};return s.jsx(Wr,{...i,children:s.jsxs("div",{className:"w-full h-full flex flex-col",children:[s.jsx("div",{className:"px-4 text-center",children:r(c?"add-new-currency":"edit-currency")}),s.jsxs("div",{className:"px-4 flex flex-1 flex-col gap-4 overflow-y-auto",children:[s.jsx(xe,{control:i.control,name:"name",render:({field:d})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("currency-name")}),s.jsx(ye,{children:s.jsx(at,{placeholder:r("custom-currency-name-placeholder"),...d,maxLength:50})})]})}),s.jsx(xe,{control:i.control,name:"symbol",render:({field:d})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("currency-symbol")}),s.jsx(ye,{children:s.jsx(at,{placeholder:r("custom-currency-symbol-placeholder"),...d,maxLength:5})})]})}),s.jsx(xe,{control:i.control,name:"rateToBase",render:({field:d})=>s.jsxs(ve,{children:[s.jsx(Ne,{children:r("rate-to-base")}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("div",{children:[" 1 ",o.label," = "]}),s.jsx(ye,{children:s.jsx(at,{className:"flex-1",...d})}),s.jsx("div",{children:i.getValues("name")||r("default-currency-name")})]})]})})]}),s.jsxs("div",{className:"flex justify-between items-center px-4",children:[s.jsx("div",{children:!c&&s.jsx(z,{variant:"destructive",onClick:()=>{t?.("delete")},children:r("delete")})}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(z,{onClick:n,children:r("cancel")}),s.jsx(z,{onClick:l,children:r("confirm")})]})]})]})})},[V1,G1]=we(U1,{dialogTitle:"Edit Currency",dialogModalClose:!1,fade:!0,swipe:!1,contentClassName:"w-[350px] h-[480px] max-h-[55vh] py-4"});function K1({edit:e,onCancel:t}){const n=V(),{baseCurrency:r,setBaseCurrency:o,convert:a,setRate:i,refresh:c,customCurrencies:l,updateCustomCurrency:d,deleteCustomCurrency:u,allCurrencies:m,quickCurrencies:h,updateQuickCurrencies:p}=er(),g=f.useMemo(()=>Co.map(N=>({...a(1,r.id,N.id),id:N.id})),[r.id,a]),x=async N=>{if(N.id===r.id)return;const j=g.find(R=>R.id===N.id);if(!j)return;const k=await cd.prompt({title:s.jsxs("div",{children:[s.jsx("h1",{children:n("manually-update-rate")}),s.jsx("p",{className:"text-xs opacity-60",children:n("manually-update-rate-desc")})]}),input:{type:"number",defaultValue:j?.predict.toFixed(6)}});if(k==null||k===""){i(N.id,void 0);return}const D=Number(k);if(D<=0){Ve.error(n("rate-must-positive"));return}i(N.id,D)},[v,y]=f.useState(!1),b=async()=>{y(!0);try{await c(),Ve.success(n("rate-update-success"))}finally{y(!1)}},w=async N=>{const j=await G1(N);if(j){if(typeof j=="string"){N?.id&&u(N.id);return}d(j)}},C=async()=>{const N=m.filter(R=>h.every(O=>O.id!==R.id)),j=[{id:"quick",label:`${n("quick-currencies")}`,items:h.map(R=>({id:R.id,label:R.label})),empty:n("quick-entry-empty")},{id:"others",label:n("Other"),items:N.map(R=>({id:R.id,label:R.label}))}],D=(await H1({group:j})).find(R=>R.id==="quick")?.items??[];p(D.map(R=>R.id))},S=f.useRef(C);return S.current=C,f.useEffect(()=>{e?.openQuickEntry&&S.current()},[e?.openQuickEntry]),s.jsxs(Te,{onBack:t,title:n("currency-manager"),className:"flex flex-col h-full overflow-hidden",right:s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(z,{variant:"secondary",onClick:C,children:n("quick-currencies")}),s.jsx(z,{onClick:()=>w(),children:s.jsx("i",{className:"icon-[mdi--add]"})})]}),children:[s.jsxs("div",{className:"flex justify-between px-4 border-b py-4",children:[s.jsxs(bn,{children:[s.jsx(wn,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[n("base-currency"),s.jsx("i",{className:"icon-[mdi--question-mark-circle-outline]"})]})}),s.jsx(nn,{children:s.jsx("div",{className:"text-sm [&>div]:text-xs [&>div]:opacity-60 [&>div]:py-2",dangerouslySetInnerHTML:{__html:n("currency_change_warning")}})})]}),s.jsxs(Et,{value:r.id,onValueChange:o,children:[s.jsx(Dt,{className:"w-fit",children:s.jsx("div",{children:r.label})}),s.jsx(zt,{children:Co.map(N=>s.jsx(Re,{value:N.id,children:n(N.labelKey)},N.id))})]})]}),s.jsxs("div",{className:"w-full px-6 flex justify-between py-1",children:[s.jsx("div",{className:"text-xs opacity-60",children:n("currency")}),s.jsxs("div",{className:"text-xs opacity-60 flex items-center gap-2",children:[s.jsxs(bn,{children:[s.jsx(wn,{children:s.jsxs("div",{className:"flex items-center gap-1",children:[n("exchange-rate"),s.jsx("i",{className:"icon-[mdi--question-mark-circle-outline]"})]})}),s.jsx(nn,{className:"p-2 text-xs w-fit",children:s.jsx("div",{children:n("exchange-rate-from",{a:s.jsx("a",{className:"underline",href:"https://ecb.europa.eu",target:"_blank",rel:"noopener",children:"ecb.europa.eu"})})})})]}),s.jsx(z,{className:"p-0 h-fit",disabled:v,onClick:b,children:s.jsx("i",{className:_("icon-[mdi--refresh]",v&&"animate-spin")})})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto",children:[s.jsx("div",{className:"px-4",children:l.map(N=>{const j=N.rateToBase;return s.jsxs("button",{type:"button",className:"py-2 border-b w-full flex justify-between items-center cursor-pointer",onClick:()=>w(N),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-xl"}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{children:N.name}),s.jsx("div",{className:"text-xs opacity-60",children:`(${N.symbol})`})]})]}),s.jsx("div",{className:"text-sm",children:j.toFixed(6)})]},N.id)})}),s.jsx("div",{className:"px-4",children:Co.map(N=>{const j=g.find(k=>k.id===N.id);return s.jsxs("button",{type:"button",disabled:N.id===r.id,className:"py-2 border-b w-full flex justify-between items-center",onClick:()=>x(N),children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-xl",children:N.icon}),s.jsxs("div",{className:"text-left",children:[s.jsx("div",{children:n(N.labelKey)}),s.jsxs("div",{className:"text-xs opacity-60",children:[N.id,`(${N.symbol})`]})]})]}),s.jsx("div",{className:"text-sm",children:j?.predict.toFixed(6)})]},N.id)})})]}),s.jsx(V1,{})]})}const[q1,op]=we(K1,{dialogTitle:"Currency",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function X1(){const e=V();return s.jsx("div",{className:"backup",children:s.jsx(z,{onClick:()=>{op()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--currency-eur] size-5"}),e("currency-manager")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})})})}const sp=[{id:"currency-update-v2",label:"currency-update-v2-hint",action:()=>{op({openQuickEntry:!0})}},{id:"whats-new-1.1",label:"whats-new-1.1-promotion-label",action:()=>{window.open("https://glink25.github.io/post/Cent-%E5%B7%B2%E6%94%AF%E6%8C%81%E5%A4%9A%E5%B8%81%E7%A7%8D%E8%87%AA%E5%8A%A8%E8%AE%B0%E8%B4%A6/","_blank")}}],J1=e=>{gn.setState(t=>({...t,dynamicPromotionIds:Array.from(new Set([e.id,...t.dynamicPromotionIds??[]]))}))},Ua={id:"budget-promotion",label:"budget-promotion-label",action:()=>{np()}},Z1=[Ua,...sp],ap=async()=>{gn.getState().closedPromotionIds?.includes(Ua.id)||(ne.getState().infos?.meta.budgets?.length??0)>=1||setTimeout(()=>{J1(Ua)},2e3)};function Q1(){const e=V(),[t,n]=gn(jn(c=>[c.dynamicPromotionIds,c.closedPromotionIds])),o=[...t?.map(c=>Z1.find(l=>l.id===c))??[],sp[0]].filter(c=>c!==void 0).filter(c=>!n?.includes(c.id)),a=c=>{gn.setState(l=>({...l,dynamicPromotionIds:l.dynamicPromotionIds?.filter(d=>d!==c),closedPromotionIds:Array.from(new Set([...l.closedPromotionIds??[],c]))}))},i=f.useRef(null);return f.useEffect(()=>{const c=i.current;!c||o.length===0||(c.scrollLeft=0)},[o.length]),o.length===0?null:s.jsx("div",{className:"w-full flex flex-col gap-1",children:s.jsx("div",{ref:i,className:"w-full flex overflow-x-auto gap-2 scrollbar-hidden snap-mandatory snap-x scroll-smooth",children:o.map((c,l)=>s.jsxs("div",{className:"relative cursor-pointer flex-shrink-0 snap-start rounded-lg border flex items-center justify-between w-full p-2 h-12",onClick:()=>{c?.action?.(),setTimeout(()=>{a(c.id)},1e3)},children:[s.jsx("div",{className:"text-sm",dangerouslySetInnerHTML:{__html:e(c.label)}}),s.jsx("button",{type:"button",className:"absolute top-1 right-1 cursor-pointer flex w-4 h-4",onClick:d=>{a(c.id),d.preventDefault(),d.stopPropagation()},children:s.jsx("i",{className:"icon-[mdi--close-circle]"})}),s.jsxs("div",{className:"absolute bottom-1 right-1 text-xs opacity-60",children:[l+1,"/",o.length]})]},c.id))})})}let Wl=!1;function eE(){const e=V(),{bills:t,loading:n,sync:r}=ne(),o=Ce(jn(S=>{const{currentBookId:N,books:j}=S;return j.find(k=>k.id===N)})),{id:a}=ke(),i=r==="wait"?"icon-[mdi--cloud-minus-outline]":r==="syncing"?"icon-[line-md--cloud-alt-print-loop]":r==="success"?"icon-[mdi--cloud-check-outline]":"icon-[mdi--cloud-remove-outline] text-red-600",[c,l]=f.useState(J()),d=f.useRef(null),u=f.useMemo(()=>$m(t,[c.startOf("day"),c.endOf("day")]),[t,c]),m=f.useMemo(()=>Qe(u.reduce((S,N)=>S+N.amount*(N.type==="income"?1:-1),0)),[u]),{budgets:h}=tp(),p=h.filter(S=>S.joiners.includes(a)&&S.start<Date.now()),g=f.useRef(null),{count:x,index:v}=_m(g,0),y=f.useRef(!1);f.useLayoutEffect(()=>{!y.current&&p.length>0&&(ne.getState().refreshBillList(),y.current=!0)},[p.length]);const b=f.useCallback(S=>{l(S);const N=t.findIndex(j=>J.unix(j.time/1e3).isSame(S,"day"));N>=0&&d.current?.scrollToIndex(N)},[t]),w=f.useCallback(S=>{!y.current&&S>=120&&(ne.getState().refreshBillList(),y.current=!0)},[]),C=f.useMemo(()=>!Wl,[]);return f.useEffect(()=>{Wl=!0},[]),s.jsxs("div",{className:"w-full h-full p-2 flex flex-col overflow-hidden page-show",children:[s.jsxs("div",{className:"flex flex-wrap flex-col w-full gap-2",children:[s.jsxs("div",{className:"bg-stone-800 text-background dark:bg-foreground/20 dark:text-foreground relative h-20 w-full flex justify-end rounded-lg sm:flex-1 p-4",children:[s.jsx("span",{className:"absolute top-2 left-4",children:Rr(c)}),s.jsx(v0,{value:m,className:"font-bold text-4xl "}),o&&s.jsxs("button",{type:"button",className:"absolute bottom-2 left-4 text-xs opacity-60 flex items-center gap-1 cursor-pointer",onClick:()=>{Vi()},children:[s.jsx("i",{className:"icon-[mdi--book]"}),o.name]})]}),s.jsx(Q1,{}),s.jsx("div",{className:"w-full flex flex-col gap-1",children:s.jsx("div",{ref:g,className:"w-full flex overflow-x-auto gap-2 scrollbar-hidden snap-mandatory snap-x",children:p.map(S=>s.jsx(xC,{className:"flex-shrink-0 snap-start",budget:S},S.id))})})]}),s.jsxs("div",{className:"flex justify-between items-center pl-7 pr-5 py-1 h-8",children:[s.jsx("button",{className:"cursor-pointer flex items-center",type:"button",onClick:()=>{n||ne.getState().initCurrentBook()},children:s.jsx("div",{className:_("opacity-0",n&&"opacity-100"),children:s.jsx(yr,{className:"[&_i]:size-[18px]"})})}),s.jsx("div",{children:x>1&&s.jsx(CC,{count:x,current:v})}),s.jsx(wC,{persistKey:"cloudSyncHintShows",content:"",children:s.jsx("button",{type:"button",className:"cursor-pointer flex items-center",onClick:()=>{Ot.toSync()},children:r==="syncing"?s.jsx(g0,{width:18,height:18}):s.jsx("i",{className:_(i,"size-[18px]")})})})]}),s.jsx("div",{className:"flex-1 translate-0 pb-[10px] overflow-hidden",children:s.jsx("div",{className:"w-full h-full",children:t.length>0?s.jsx(T1,{ref:d,bills:t,className:_(t.length>0&&"relative"),enableDivideAsOrdered:!0,showTime:!0,onItemShow:w,onVisibleDateChange:l,onDateClick:b,presence:C}):s.jsx("div",{className:"text-xs p-4 text-center",children:e("nothing-here-add-one-bill")})})})]})}function tE(){const e=V(),t=Ja(),{currentBookId:n}=Ce();return!t||n!==void 0?null:s.jsx(Zp,{open:n===void 0,children:s.jsxs(Qp,{children:[s.jsx(eg,{className:"fixed z-[2] inset-0 bg-black/50 data-[state=open]:animate-overlay-show"}),s.jsxs(gc,{children:[s.jsxs(ua,{children:[s.jsx(xc,{children:e("select-a-book")}),s.jsx(vc,{children:e("select-a-book")})]}),s.jsx("div",{className:"fixed z-[3] top-0 left-0 w-full h-full flex justify-center items-center pointer-events-none",children:s.jsxs(gc,{className:_("bg-background max-h-[55vh] w-fit max-w-[500px] rounded-md data-[state=open]:animate-content-show"),children:[s.jsxs(ua,{children:[s.jsx(xc,{children:e("select-a-book")}),s.jsx(vc,{children:e("select-a-book")})]}),s.jsx(Im,{})]})})]})]})})}function nE(){const e=V();return s.jsx("div",{className:"backup",children:s.jsx(z,{onClick:()=>{Vi()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--book-cog-outline] size-5"}),e("ledger-books")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})})})}async function zl(e){const t=await fetch(e,{credentials:"same-origin"});if(!t.ok)throw new Error(`Failed to fetch "${e}": ${t.status} ${t.statusText}`);return await t.blob()}function Hl(e){switch((e.split(".").pop()||"").toLowerCase()){case"txt":return"text/plain";case"json":return"application/json";case"pdf":return"application/pdf";case"png":return"image/png";case"jpg":case"jpeg":return"image/jpeg";case"gif":return"image/gif";case"csv":return"text/csv";case"html":return"text/html";case"zip":return"application/zip";default:return"application/octet-stream"}}const rE=async(e,t)=>{const n=typeof navigator<"u"?navigator:void 0,r=!!(n&&typeof n.share=="function"&&typeof n.canShare=="function");async function o(a){try{if(r&&n.canShare&&n.canShare({files:[a]}))return await n.share({files:[a],title:t}),!0}catch(i){console.warn("navigator.share failed or was cancelled:",i)}return!1}if(e instanceof File){if(await o(e))return;const a=URL.createObjectURL(e);try{if(typeof navigator<"u"&&navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(e,t);return}const i=document.createElement("a");i.href=a,i.download=t,(document.body||document.documentElement).appendChild(i),i.click(),i.remove()}finally{URL.revokeObjectURL(a)}return}if(e instanceof Blob){const a=new File([e],t,{type:e.type||Hl(t)});if(await o(a))return;const i=URL.createObjectURL(e);try{if(typeof navigator<"u"&&navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(e,t);return}const c=document.createElement("a");c.href=i,c.download=t,(document.body||document.documentElement).appendChild(c),c.click(),c.remove()}finally{URL.revokeObjectURL(i)}return}if(typeof e=="string"){if(r)try{const c=await zl(e),l=new File([c],t,{type:c.type||Hl(t)});if(await o(l))return}catch(c){console.warn("Failed to fetch resource for sharing:",c)}try{const c=document.createElement("a");c.href=e,c.download=t,(document.body||document.documentElement).appendChild(c),c.click(),c.remove();return}catch(c){console.warn("Anchor download failed, falling back to fetch+objectURL:",c)}const a=await zl(e),i=URL.createObjectURL(a);try{if(typeof navigator<"u"&&navigator.msSaveOrOpenBlob){navigator.msSaveOrOpenBlob(a,t);return}const c=document.createElement("a");c.href=i,c.download=t,(document.body||document.documentElement).appendChild(c),c.click(),c.remove()}finally{URL.revokeObjectURL(i)}return}throw new TypeError("Unsupported source type for download. Expect string | Blob | File.")},oE=e=>{const t=Ze.find(a=>a.id===e.categoryId),n=e.type===1?"expense":"income",r=t?.id??(n==="income"?"other-income":"other-expenses"),o=t?e.comment:`${e.comment} ${JSON.stringify({rawCategory:e.categoryId})}`;return{id:e.id??Qt(),type:e.type===1?"expense":"income",categoryId:r,comment:o,time:e.time*1e3,amount:fn(e.money)}};function sE({edit:e,onCancel:t,onConfirm:n}){const r=V(),[o,a]=f.useState(),[i,c]=f.useState("add"),l=f.useMemo(()=>e?.data.data.find(p=>p.tableName==="users")?.rows.map(p=>{const g=p;return{user:{nickname:g.name,id:g.id},data:g.me?e?.data.data.find(x=>x.tableName==="bills")?.rows:e?.data.data.find(x=>x.tableName===g.id)?.rows}}).filter(p=>p.data?.length),[e]),[d,u]=f.useState(!1),m=async()=>{const h=l?.find(p=>p.user.id===o);if(h){u(!0);try{await ne.getState().batchImportFromBills(h.data?.map(p=>oE(p))??[],i==="overlap"),Ve.success(r("import-success")),n?.(!0),u(!1)}catch(p){Ve.error(`${r("import-failed")}: ${p}`),n?.(!1)}}};return s.jsx(Te,{onBack:t,title:"Oncent",children:s.jsxs("div",{className:"flex flex-col p-4 gap-4 h-full",children:[s.jsxs("div",{className:"flex-1 flex flex-col gap-4",children:[s.jsxs(Et,{value:o,onValueChange:h=>a(h),children:[s.jsx(Dt,{className:"SelectTrigger","aria-label":"Food",children:s.jsx(En,{placeholder:r("select-a-user")})}),s.jsx(Oi,{children:s.jsx(Ii,{className:"bg-background shadow",children:s.jsx(Ai,{className:"SelectViewport",children:l?.map(h=>s.jsx(Re,{value:h.user.id,children:`${h.user.nickname}(${h.data?.length})`},h.user.id))})})})]}),s.jsxs("div",{className:"flex flex-col gap-4",children:[r("import-strategy"),":",s.jsx(Ri,{className:"flex items-center gap-4",defaultValue:i,onValueChange:h=>{c(h)},children:s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsx(Ti,{className:"w-6 h-6 rounded-full border flex justify-center items-center",value:"add",children:s.jsx(uf,{className:"block w-4 h-4 rounded-full bg-stone-900"})}),s.jsx("label",{className:"Label",htmlFor:"r1",children:r("strategy-add")})]})})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 items-center",children:[s.jsx(z,{variant:"ghost",onClick:()=>t?.(),children:r("cancel")}),s.jsxs(z,{disabled:d,onClick:m,children:[d&&s.jsx(yr,{})," ",r("confirm")]})]})]})})}function aE(){return V()("import-from-oncent")}const[AD,iE]=we(sE,{dialogTitle:s.jsx(aE,{}),dialogModalClose:!1,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});async function cE(e,t="file"){const n=e.split(";base64,");if(n.length!==2)throw new Error("Invalid Base64 string format. Expected a Data URL.");const r=n[0],o=n[1],a=r.match(/data:(.*?)(;|$)/),i=a&&a[1]?a[1]:"application/octet-stream";let c=t;const l=r.match(/name=([^;]+)/i);if(l&&l[1])try{c=decodeURIComponent(l[1])}catch{c=l[1]}else{const p=i.match(/\/(.+)/);p&&p[1]&&c.indexOf(".")===-1?c=`${t}.${p[1]}`:c.indexOf(".")===-1&&(c=t)}const d=atob(o),u=new ArrayBuffer(d.length),m=new Uint8Array(u);for(let p=0;p<d.length;p++)m[p]=d.charCodeAt(p);const h=new Blob([m],{type:i});return new File([h],c,{type:i,lastModified:Date.now()})}const ip=f.forwardRef(({className:e,...t},n)=>s.jsx(Ri,{className:_("grid gap-2",e),...t,ref:n}));ip.displayName=Ri.displayName;const Va=f.forwardRef(({className:e,...t},n)=>s.jsx(Ti,{ref:n,className:_("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(uf,{className:"flex items-center justify-center",children:s.jsx(Om,{className:"h-3.5 w-3.5 fill-primary"})})}));Va.displayName=Ti.displayName;const lE=({edit:e,onCancel:t,onConfirm:n})=>{const r=V(),[o,a]=f.useState([]),[i,c]=f.useState(!0),[l,d]=f.useState(e?.asMine??!0);f.useEffect(()=>{(async()=>await(e?.bills?Promise.all(e.bills.map(async v=>{const y=v.images?await Promise.all(v.images?.map(b=>b instanceof File?b:b.startsWith("data:")?cE(b):b)):void 0;return{...v,images:y}})):[]))().then(v=>{a(v)}).catch(console.error).finally(()=>{c(!1)})},[e?.bills]);const[u,m]=f.useState("append"),[h,p]=f.useState([]);f.useEffect(()=>{u==="append"&&(async()=>{const v=o,y=await ne.getState().refreshBillList();return v?.filter(w=>y.every(C=>C.id!==w.id&&C.time!==w.time))??[]})().then(v=>{p(v)})},[o,u]);const g=u==="append"?h.length:e?.bills.length??0;return s.jsx(Te,{title:"",onBack:t,className:"h-full overflow-hidden rounded-md",right:s.jsx(z,{disabled:i||g<=0,onClick:()=>{n?.(u==="append"?{bills:h,meta:e?.meta,strategy:"append",asMine:l}:{bills:e?.bills??[],meta:e?.meta,strategy:"overlap",asMine:l})},children:r("confirm")}),children:s.jsxs("div",{className:"relative flex-1 flex flex-col w-full gap-2 overflow-hidden",children:[s.jsxs("div",{className:"flex flex-col px-4 gap-3",children:[s.jsxs("div",{className:"opacity-60 text-sm",children:[r("import-strategy"),":",s.jsx("span",{children:`${r("import-description")}`})]}),s.jsxs(ip,{value:u,className:"flex flex-col gap-2",onValueChange:x=>m(x==="append"?"append":"overlap"),children:[s.jsxs(fa,{className:"flex gap-2",children:[s.jsx(Va,{value:"append"}),r("strategy-add")]}),s.jsxs(fa,{className:"flex gap-2",children:[s.jsx(Va,{value:"overlap"}),r("strategy-overlap")]})]})]}),s.jsxs("div",{className:"flex flex-col px-4 gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"opacity-60 text-sm",children:":"}),s.jsx(It,{checked:l,onCheckedChange:d})]}),!l&&s.jsx("p",{className:"text-xs text-red-700",children:""})]}),s.jsxs("div",{className:"flex-1 flex flex-col px-4 gap-3 overflow-hidden",children:[s.jsxs("p",{className:"opacity-60 text-sm",children:[r("preview"),":"]}),u==="append"?s.jsx("div",{children:r("append-preview-description",{n:s.jsx("span",{className:"text-green-700",children:g})})}):s.jsx("div",{children:s.jsx("div",{className:"text-red-700",children:r("overlap-preview-description",{n:s.jsx("span",{className:"text-red-700",children:g})})})})]}),i&&s.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-background/60 flex items-center justify-center",children:s.jsx("i",{className:"icon-[mdi--loading] animate-spin"})})]})})},[dE,cp]=we(lE,{dialogTitle:"experimental-functions",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"}),Ga=async e=>{const{strategy:t,asMine:n,...r}=e,o=yc(ne.getState().infos?.meta??{}),a=t==="overlap"?r.meta:(()=>{if(!r.meta?.categories)return Ma(o,r.meta);const l=(o.categories?.length??0)===0?Ze:o.categories,d=[...r.meta?.categories??[]],u=yc(J0(l,d)),m=Ma(o,r.meta);return Wb(Ze,u)?m.categories=void 0:m.categories=u,m})(),i=Ce.getState().currentBookId;if(!i)return;const c=ke.getState().id;await Ot.batch(i,[...r.bills.map(l=>({id:l.id,type:"update",value:{...l,creatorId:n?c:l.creatorId},timestamp:l.__update_at})),{type:"meta",metaValue:a}],t==="overlap")};function uE(){var e=f.useRef(!1),t=f.useCallback(function(){return e.current},[]);return f.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}var fE=function(e){e===void 0&&(e={});var t=f.useState(e),n=t[0],r=t[1],o=f.useCallback(function(a){r(function(i){return Object.assign({},i,a instanceof Function?a(i):a)})},[]);return[n,o]},Yl=function(){};function _D(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function $D(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var mE=typeof window<"u",la,Ul;function hE(){return Ul||(Ul=1,la=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],r=0;r<e.rangeCount;r++)n.push(e.getRangeAt(r));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null;break}return e.removeAllRanges(),function(){e.type==="Caret"&&e.removeAllRanges(),e.rangeCount||n.forEach(function(o){e.addRange(o)}),t&&t.focus()}}),la}var da,Vl;function pE(){if(Vl)return da;Vl=1;var e=hE(),t={"text/plain":"Text","text/html":"Url",default:"Text"},n="Copy to clipboard: #{key}, Enter";function r(a){var i=(/mac os x/i.test(navigator.userAgent)?"":"Ctrl")+"+C";return a.replace(/#{\s*key\s*}/g,i)}function o(a,i){var c,l,d,u,m,h,p=!1;i||(i={}),c=i.debug||!1;try{d=e(),u=document.createRange(),m=document.getSelection(),h=document.createElement("span"),h.textContent=a,h.ariaHidden="true",h.style.all="unset",h.style.position="fixed",h.style.top=0,h.style.clip="rect(0, 0, 0, 0)",h.style.whiteSpace="pre",h.style.webkitUserSelect="text",h.style.MozUserSelect="text",h.style.msUserSelect="text",h.style.userSelect="text",h.addEventListener("copy",function(x){if(x.stopPropagation(),i.format)if(x.preventDefault(),typeof x.clipboardData>"u"){c&&console.warn("unable to use e.clipboardData"),c&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var v=t[i.format]||t.default;window.clipboardData.setData(v,a)}else x.clipboardData.clearData(),x.clipboardData.setData(i.format,a);i.onCopy&&(x.preventDefault(),i.onCopy(x.clipboardData))}),document.body.appendChild(h),u.selectNodeContents(h),m.addRange(u);var g=document.execCommand("copy");if(!g)throw new Error("copy command was unsuccessful");p=!0}catch(x){c&&console.error("unable to copy using execCommand: ",x),c&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(i.format||"text",a),i.onCopy&&i.onCopy(window.clipboardData),p=!0}catch(v){c&&console.error("unable to copy using clipboardData: ",v),c&&console.error("falling back to prompt"),l=r("message"in i?i.message:n),window.prompt(l,a)}}finally{m&&(typeof m.removeRange=="function"?m.removeRange(u):m.removeAllRanges()),h&&document.body.removeChild(h),d()}return p}return da=o,da}var gE=pE();const xE=Kn(gE);var vE=function(){var e=uE(),t=fE({value:void 0,error:void 0,noUserInteraction:!0}),n=t[0],r=t[1],o=f.useCallback(function(a){if(e()){var i,c;try{if(typeof a!="string"&&typeof a!="number"){var l=new Error("Cannot copy typeof "+typeof a+" to clipboard, must be a string");r({value:a,error:l,noUserInteraction:!0});return}else if(a===""){var l=new Error("Cannot copy empty string to clipboard.");r({value:a,error:l,noUserInteraction:!0});return}c=a.toString(),i=xE(c),r({value:c,error:void 0,noUserInteraction:i})}catch(d){r({value:c,error:d,noUserInteraction:i})}}},[]);return[n,o]},yE=function(e,t,n){if(!mE)return[t,Yl,Yl];var r=JSON.parse,o=f.useRef(function(u){try{var m=n?n.raw?String:n.serializer:JSON.stringify,h=localStorage.getItem(u);return h!==null?r(h):(t&&localStorage.setItem(u,m(t)),t)}catch{return t}}),a=f.useState(function(){return o.current(e)}),i=a[0],c=a[1];f.useLayoutEffect(function(){return c(o.current(e))},[e]);var l=f.useCallback(function(u){try{var m=typeof u=="function"?u(i):u;if(typeof m>"u")return;var h=void 0;n||(h=JSON.stringify(m)),localStorage.setItem(e,h),c(r(h))}catch{}},[e,c]),d=f.useCallback(function(){try{localStorage.removeItem(e),c(void 0)}catch{}},[e,c]);return[i,l,d]};function bE(){let e=null;const t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.opacity="0",document.body.appendChild(t),t.focus();try{document.execCommand("paste")?e=t.value:console.warn("execCommand('paste') ")}catch(n){console.error("execCommand('paste') ",n)}finally{document.body.removeChild(t)}return e}async function Ka(){let e=null,t=null,n=null;if(navigator.clipboard&&navigator.clipboard.read)try{t=await navigator.clipboard.read();const r=[],o=[];for(const a of t)for(const i of a.types){const c=await a.getType(i);if(i.startsWith("image/")||i.startsWith("application/")){const l=new File([c],`clipboard-file-${Date.now()}`,{type:i,lastModified:Date.now()});r.push(l)}i==="text/plain"&&!e&&o.push(c)}n=r.length>0?r:null,o.length>0&&!e&&(e=await o[0].text())}catch(r){if(console.warn(" navigator.clipboard.read()  readText()",r),navigator.clipboard.readText)try{e=await navigator.clipboard.readText()}catch(o){console.error(" navigator.clipboard.readText() ",o)}}return e||(console.warn(" document.execCommand('paste') "),e=bE()),{text:e,items:t,files:n}}const lp=`// CSVExportedJSON\r
/**\r
 * @typedef {Object} ExportedJSON\r
 * @property {Array} items\r
 * @property {Object} meta\r
 */\r
\r
/**\r
 * @typedef {Object} File\r
 * @property {string} name - \r
 * @property {number} size - \r
 * //  File  File  File  Node.js \r
 */\r
\r
/**\r
 * @typedef {Object} Context\r
 * @property {object} Papa - CSVJS\r
 * @property {Function} Papa.parse - CSV\r
 * @property {object} XLSX - ExcelJS\r
 * @property {Function} XLSX.read - Excel\r
 * @property {Array} DefaultCategories - meta.categoriesDefaultCategoriesDefaultCategories\r
 */\r
\r
/**\r
 * JSON\r
 *\r
 * @param {File} file - \r
 * @param {Context} ctx - \r
 * @returns {Promise<ExportedJSON>} JSON\r
 */\r
\r
async function transform(file, ctx) {\r
    const categoryMap = {\r
        : "food",\r
        : "transport",\r
        : "shopping",\r
        : "housing", // \r
        : "entertainment",\r
        : "medical",\r
        : "education",\r
        : "relationship",\r
        : "charity", // -\r
        : null, // \r
        : null, // \r
        : "refund", // -\r
        : "other-expenses",\r
        AA: "other-expenses",\r
    };\r
    const csvHead = [\r
        "", // 0\r
        "", // 1\r
        "", // 2\r
        "", // 3\r
        "", // 4\r
        "/", // 5\r
        "", // 6\r
        "/", // 7\r
        "", // 8\r
        "", // 9\r
        "", // 10\r
        "", // 11\r
    ];\r
    const numberToAmount = (v) => Number((v * 10000).toFixed(0));\r
    const items = await new Promise((resolve, reject) => {\r
        const bills = [];\r
        ctx.Papa.parse(file, {\r
            encoding: "gbk",\r
            complete: (result) => {\r
                const dataRowIndex = result.data.findIndex((v) => v.length > 2);\r
                const flattedData = result.data[dataRowIndex];\r
                for (\r
                    let index = 0;\r
                    index < flattedData.length;\r
                    index += csvHead.length\r
                ) {\r
                    const item = flattedData\r
                        .slice(index, index + csvHead.length)\r
                        .map((str) => {\r
                            const value = str\r
                                .replace("\\n", "")\r
                                .replace("\\t", "");\r
                            return value;\r
                        });\r
                    const billType =\r
                        item[5] === ""\r
                            ? "income"\r
                            : item[5] === ""\r
                              ? "expense"\r
                              : undefined;\r
                    if (billType === undefined) {\r
                        // \r
                        continue;\r
                    }\r
                    const time = new Date(item[0]).getTime();\r
                    const categoryId =\r
                        categoryMap[item[1]] ??\r
                        (billType === "income"\r
                            ? "other-income"\r
                            : "other-expenses");\r
                    const comment = [2, 4, 1, 11]\r
                        .map((i) => \`\${item[i]}\`)\r
                        .join(" ");\r
                    const amount = numberToAmount(Number(item[6]));\r
                    const bill = {\r
                        id: \`\${item[9]}-alipay\`,\r
                        type: billType,\r
                        time,\r
                        categoryId,\r
                        comment: \`\${comment} alipay\`,\r
                        amount,\r
                        creatorId: "from-alipay",\r
                    };\r
                    bills.push(bill);\r
                }\r
                resolve(bills);\r
            },\r
        });\r
    });\r
    return {\r
        items,\r
        meta: {\r
            categories: ctx.DefaultCategories,\r
        },\r
    };\r
}\r
`,dp=`// XLSXExportedJSON\r
/**\r
 * @typedef {Object} ExportedJSON\r
 * @property {Array} items\r
 * @property {Object} meta\r
 */\r
\r
/**\r
 * @typedef {Object} File\r
 * @property {string} name - \r
 * @property {number} size - \r
 * //  File  File  File  Node.js \r
 */\r
\r
/**\r
 * @typedef {Object} Context\r
 * @property {object} Papa - CSVJS\r
 * @property {Function} Papa.parse - CSV\r
 * @property {object} XLSX - ExcelJS\r
 * @property {Function} XLSX.read - Excel\r
 * @property {Array} DefaultCategories - meta.categoriesDefaultCategoriesDefaultCategories\r
 */\r
\r
/**\r
 * JSON\r
 *\r
 * @param {File} file - \r
 * @param {Context} ctx - \r
 * @returns {Promise<ExportedJSON>} JSON\r
 */\r
\r
async function transform(file, ctx) {\r
    const csvHead = [\r
        "", // 0\r
        "", // 1\r
        "", // 2\r
        "", // 3\r
        "/", // 4\r
        "()", // 5\r
        "", // 6\r
        "", // 7\r
        "", // 8\r
        "", // 9\r
        "", // 10\r
    ];\r
\r
    const cMap = {\r
        : "food",\r
        : "food",\r
        : "food",\r
        : "food",\r
        KFC: "food",\r
        : "food",\r
        : "taxi",\r
        : "bus",\r
        : "subway",\r
        : "taxi",\r
        : "phone",\r
        : "electricity",\r
        : "water",\r
        : "rent",\r
        : "mgmt-fee",\r
        : "shopping",\r
        : "shopping",\r
        : "shopping",\r
        : "shopping",\r
        : "household",\r
        : "clothing",\r
        : "clothing",\r
        : "movies",\r
        : "travel",\r
        : "drinks",\r
        : "entertainment",\r
        : "clinic",\r
        : "pharmacy",\r
        : "tuition",\r
        : "books",\r
        : "courses",\r
        : "hongbao",\r
        : "relationship",\r
        : "family",\r
        : "gifts",\r
        : "balance-account",\r
        : "balance-account",\r
        : "balance-account-income",\r
        : "wage",\r
        : "refund",\r
        : "other-income",\r
        : "fees-charges",\r
        : "fees-charges",\r
        : "household", // \r
    };\r
\r
    /**\r
     * \r
     * \r
     *\r
     * @param {string} currencyString -  "324.00"  "$1,234.56"\r
     * @returns {number} \r
     */\r
    function convertCurrencyToNumber(currencyString) {\r
        if (typeof currencyString !== "string") {\r
            //  null  undefined\r
            return NaN;\r
        }\r
\r
        // 1. \r
        //    - \`/[^0-9.]/g\`  (0-9)  (.) \r
        //    - '' () \r
        const numberString = currencyString.replace(/[^0-9.]/g, "");\r
\r
        // 2.  parseFloat() \r
        return parseFloat(numberString);\r
    }\r
\r
    const getCategory = (name) => {\r
        const target = Array.from(Object.entries(cMap)).find(([key]) => {\r
            if (name.includes(key)) {\r
                return true;\r
            }\r
            return false;\r
        });\r
        return target?.[1];\r
    };\r
\r
    const numberToAmount = (v) => Number((v * 10000).toFixed(0));\r
    const fileBuffer = await new Promise((resolve, reject) => {\r
        const reader = new FileReader();\r
        reader.onload = (e) => {\r
            const data = e.target.result;\r
            resolve(data);\r
        };\r
        reader.onerror = reject;\r
        reader.readAsArrayBuffer(file);\r
    });\r
    const workbook = await ctx.XLSX.read(fileBuffer, {\r
        type: "array",\r
    });\r
    const sheetName = workbook.SheetNames[0];\r
    const worksheet = workbook.Sheets[sheetName];\r
    const dataArray = XLSX.utils.sheet_to_json(worksheet, {\r
        header: 1, //  header: 1 \r
    });\r
\r
    const bills = [];\r
    dataArray.slice(17).forEach((item) => {\r
        const billType =\r
            item[4] === ""\r
                ? "income"\r
                : item[4] === ""\r
                  ? "expense"\r
                  : undefined;\r
        if (billType === undefined) {\r
            // \r
            return;\r
        }\r
        const time = new Date(item[0]).getTime();\r
        const categoryId =\r
            getCategory(item[2]) ??\r
            (billType === "income" ? "other-income" : "other-expenses");\r
        const comment = [1, 2, 3].map((i) => \`\${item[i]}\`).join(" ");\r
        const amount = numberToAmount(convertCurrencyToNumber(item[5]));\r
        const bill = {\r
            id: \`\${item[8]}-wechat\`,\r
            type: billType,\r
            time,\r
            categoryId,\r
            comment: \`\${comment} wechat\`,\r
            amount,\r
            creatorId: "from-wechat",\r
        };\r
        bills.push(bill);\r
    });\r
    return {\r
        items: bills,\r
        meta: {\r
            categories: ctx.DefaultCategories,\r
        },\r
    };\r
}\r
`,wE=`// @annotation: Full Full<T>  T\r
import type { Full } from "@/database/stash";\r
// @annotation: type\r
import type {\r
    BillFilter,\r
    BillFilterView,\r
    BillTagGroup,\r
    Budget,\r
    CustomCurrency,\r
    PersonalMeta,\r
} from "./extra-type";\r
\r
export type { CustomCurrency, PersonalMeta, BillFilter, Budget, BillTagGroup };\r
\r
/**  */\r
export type BillType = "income" | "expense";\r
\r
/** 10000:1 */\r
export type Amount = number;\r
\r
/**  */\r
export type GeoLocation = {\r
    latitude: number;\r
    longitude: number;\r
    accuracy: number;\r
};\r
\r
export type Bill = {\r
    /**  */\r
    id: string;\r
    /**  */\r
    type: BillType;\r
    /**  */\r
    categoryId: string;\r
    /** id */\r
    creatorId: number | string;\r
    /**  */\r
    comment?: string;\r
    /** 10000:1 */\r
    amount: Amount;\r
    /** */\r
    time: number;\r
    /** */\r
    images?: (File | string)[];\r
    /** */\r
    location?: GeoLocation;\r
    /** tag*/\r
    tagIds?: string[];\r
    /**  */\r
    currency?: {\r
        // \r
        base: string;\r
        // \r
        target: string;\r
        // \r
        amount: number;\r
    };\r
};\r
\r
/** BillCategory\r
 * \r
 * GlobalMeta.categories@required customNametrueundefined\r
 * {{AllBillCategories}}\r
 */\r
\r
export type BillCategory = {\r
    // @required \r
    type: BillType;\r
    // @required \r
    name: string;\r
    // @required id\r
    id: string;\r
    // \r
    icon: string;\r
    // \r
    color: string;\r
    // customNametrue\r
    customName?: boolean;\r
    // id\r
    parent?: string;\r
};\r
\r
/** BillTag\r
 * @example tagxxx\r
 */\r
export type BillTag = {\r
    // tag\r
    id: string;\r
    // tag\r
    name: string;\r
    /**  */\r
    preferCurrency?: string;\r
};\r
\r
// \r
export type GlobalMeta = {\r
    // \r
    customFilters?: BillFilterView[];\r
    // \r
    budgets?: Budget[];\r
    // \r
    personal?: Record<string, PersonalMeta>;\r
    // \r
    categories?: BillCategory[];\r
    // Tagtag\r
    tags: BillTag[];\r
    // \r
    baseCurrency?: string;\r
    customCurrencies?: CustomCurrency[];\r
    quickCurrencies?: string[];\r
};\r
\r
// JSON\r
export type ExportedJSON = {\r
    // \r
    items: Full<Bill>[];\r
    // \r
    meta: GlobalMeta;\r
};\r
`,CE=`${wE}`.replace("{{AllBillCategories}}",JSON.stringify(Ze)),Gl=`JavaScript

**:**
 \`transform\` JavaScriptApp

**:**
 \`file\`  ****

CSVctx.Papa Papa
csvcsv
excel.xlsx \`ctx.XLSX\`
JSON \`JSON.parse\`


---

**1. :**
\`\`\`
json,csvexcel
\`\`\`

---

**2.  ():**
AppTypeScript\`ExportedJSON\`
\`\`\`typescript
/**
 * App
 */
${CE}
\`\`\`

---

**3.  ():**
- **:** CSVJSONctxJavaScript
- **:** ExportedJSON

---

**4. :**
**** \`transform\` JavaScript
javascript

 let-it-crash 

**:**
\`\`\`javascript
${lp}
\`\`\`
\`\`\`javascript
${dp}
\`\`\`
`,Kl=()=>[{label:Wn("alipay-import-transformer"),id:"alipay",transformerCode:lp},{label:Wn("wechat-import-transformer"),id:"wechat",transformerCode:dp}],jE="custom-import-transformers";function NE({onCancel:e}){const t=V(),[n,r]=f.useState(()=>Kl()[0].id),o=f.useMemo(()=>Kl(),[]),[a,i]=yE(jE,[]),c=f.useMemo(()=>[...o,...a],[a,o]),l=c.find(C=>C.id===n),d=!!o.find(C=>C.id===n),u=C=>{i(()=>{const S=a,N=C,j=S?.find(k=>k.id===n);return j?(j.transformerCode=N,[...S??[]]):S})},m=()=>{const C=prompt(t("please-enter-a-new-schema-name"));C&&i(()=>{const S=a,N=C,j=S?.find(k=>k.id===n);return j?(j.id=N,Promise.resolve().then(()=>{r(j.id)}),[...S??[]]):S})},[h,p]=f.useState(),[g,x]=f.useState(),[,v]=vE(),[y,b]=f.useState(!1),w=async()=>{if(!l?.transformerCode||!h)return;b(!0);const C=await(async()=>{try{const N=await SE(l.transformerCode,h);return kE(N)}catch(N){console.error(N);const j=N.message??JSON.stringify(N);x(j),Ve.error(j);return}finally{b(!1)}})();if(!C)return;const S=await cp({bills:C.items,meta:C.meta});S&&(S.strategy,await Ga(S),e?.())};return s.jsxs(Te,{title:t("smart-import"),onBack:e,className:"h-full overflow-hidden",right:s.jsx(z,{disabled:y,onClick:()=>{i(()=>{const C=a,S=`${t("custom-import-transformer-name")}${(C?.length??0)+1}`;return Promise.resolve().then(()=>{r(S)}),[...C??[],{id:S,transformerCode:""}]})},children:t("add-new-scheme")}),children:[s.jsxs("div",{className:"flex gap-3 flex-col flex-1 p-4 overflow-y-auto px-4",children:[s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"flex-shrink-0",children:[t("select-scheme"),":"]}),s.jsxs(Et,{value:n,onValueChange:r,children:[s.jsx(Dt,{children:s.jsx(En,{className:"w-[180px]"})}),s.jsx(zt,{children:c.map(({id:C,label:S})=>s.jsx(Re,{value:C,children:S??C},C))})]}),!d&&s.jsx(z,{variant:"secondary",onClick:m,children:t("rename-scheme")})]}),s.jsxs("div",{className:"flex gap-2 items-center",children:[s.jsxs("span",{className:"flex-shrink-0",children:[t("bill-file"),":"]}),s.jsx(at,{type:"file",onChange:C=>{const S=C.currentTarget.files?.item(0);S&&p(S)}})]}),!d&&s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("div",{className:"text-xs opacity-60",children:t("step1-prompt-copy")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1 rounded-md border p-1 h-9 text-xs break-all opacity-40 overflow-y-auto",children:Gl}),s.jsx(z,{variant:"secondary",onClick:async()=>{await v(Gl),Ve.success(t("copy-success"))},children:t("copy-prompt")})]}),s.jsx("div",{className:"text-xs opacity-60",children:t("step2-code-paste")}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("textarea",{placeholder:t("placeholder-paste-code"),className:"w-full border rounded-md p-1 h-20 resize-none text-sm",value:l?.transformerCode,onChange:C=>{const S=C.currentTarget.value;u(S)}}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx(z,{variant:"secondary",onClick:async()=>{const{text:C}=await Ka();C!==null&&u(C)},children:t("paste")}),s.jsx(z,{variant:"destructive",onClick:()=>u(""),children:t("clear")})]})]}),s.jsx("div",{className:"text-xs opacity-60",children:t("step3-import-finish")}),g&&s.jsxs("div",{className:"flex gap-2",children:[s.jsx("div",{className:"flex-1 rounded-md border p-1 h-9 text-xs text-red-500 select-auto overflow-x-auto",children:g}),s.jsx(z,{variant:"secondary",onClick:async()=>{await v(g),Ve.success(t("copy-success"))},children:t("copy-error-info")})]})]})]}),s.jsx("div",{className:"flex-shrink-0 px-4 pb-4 flex justify-end",children:s.jsxs(z,{onClick:w,disabled:y||!h,children:[y&&s.jsx("i",{className:"icon-[mdi--loading] animate-spin"}),t("import")]})})]})}const SE=(e,t)=>{const r=`
                      //  PapaParse  XLSX  CDN 
                      importScripts(
                          'https://cdn.jsdelivr.net/npm/papaparse@5.5.3/papaparse.min.js',
                          'https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js'
                      );

                      // ---  (Papa/XLSX) ---
                      const ctx = {
                          Papa: self.Papa, 
                          XLSX: self.XLSX
                      };

                      // ---  () ---
                      ${e.trim()}

                      // Web Worker  async/await  transform 
                      self.onmessage = async (e) => {
                          const { fileContent, fileName, DefaultCategories } = e.data;
                          ctx.DefaultCategories = DefaultCategories;
                          //  transform 
                          if (typeof transform === 'function') {
                              let result;
                              try {
                                  //  await  transform 
                                  result = await transform(fileContent, ctx);
                                  
                                  //  Promise await  Promise
                                  if (result && typeof result.then === 'function') {
                                       self.postMessage({ error: true, message: "Worker: transform  Promise", data: [] });
                                       return; // 
                                  }

                              } catch (error) {
                                console.error(error)
                                  //  transform 
                                  result = { error: true, message: "Worker: transform : " + error.message, data: [] };
                              }
                              
                              // 
                              self.postMessage(result);
                              
                          } else {
                               self.postMessage({ error: true, message: "Worker:  'transform' ", data: [] });
                          }
                      };
                  `,o=new Blob([r],{type:"application/javascript"}),a=URL.createObjectURL(o),i=new Worker(a);return new Promise((c,l)=>{i.onmessage=m=>{const h=m.data;h.error?l(h.message):c(h),URL.revokeObjectURL(a)},i.onerror=m=>{console.error("Worker Error:",m),l(m),URL.revokeObjectURL(a)};const d=t,u=t.name;i.postMessage({fileContent:d,fileName:u,DefaultCategories:Ze})})},kE=e=>{if(!e||typeof e!="object")throw new Error("result is not an object");if(!Array.isArray(e.items))throw new Error("the value of key 'items' in result is not an array");if(e.items.length===0)throw new Error("the array value of key 'items's length is 0");return e},[ME,EE]=we(NE,{dialogTitle:"Smart Import",contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"}),ql="relative after:content-['beta'] after:rounded after:bg-yellow-400 after:px-[2px] after:text-[8px] after:block after:absolute after:top-0 after:right-0 after:translate-x-[calc(100%+4px)]";function DE({onCancel:e}){const t=V(),n=async()=>{if(!Ce.getState().currentBookId)return;const[c]=await Ha({accept:Tl}),l=await c.text(),d=JSON.parse(l),u=await cp({bills:d.items,meta:d.meta});u&&await Ga(u)},r=async()=>{const i=Ce.getState().currentBookId;if(!i)return;const[c]=cd.loading(),l=await hn.exportToArrayBuffer(i),d=new Uint8Array(l),u=new Blob([d],{type:"application/json"});await rE(u,`cent-backup-${i.replace("/","-")}-${new Date().toISOString()}.json`),c()},o=async()=>{const[i]=await Ha({accept:Tl}),c=await i.text(),l=JSON.parse(c);await iE(l)},a=async()=>{if(!confirm(t("bill-compression-tip")))return;if(!(ne.getState().sync==="success")){Ve.warning(t("wait-synced-tip"));return}const l=await ne.getState().refreshBillList(),d=ne.getState().infos?.meta;await Ga({bills:l,meta:d,strategy:"overlap"})};return s.jsxs(Te,{title:s.jsx("div",{className:"",children:t("data-manager")}),onBack:e,className:"h-full overflow-hidden",children:[s.jsx("div",{className:"w-full h-[450px] flex flex-col justify-center items-center rounded",children:s.jsxs("div",{className:"flex-1 flex flex-col w-full gap-2 h-full overflow-hidden",children:[s.jsx("div",{className:"px-4 opacity-60 text-sm",children:t("backup")}),s.jsxs("div",{className:"flex flex-col px-4 gap-2",children:[s.jsx(z,{variant:"outline",className:"py-4",onClick:n,children:t("data-import")}),s.jsx(z,{variant:"outline",className:"py-4",onClick:r,children:t("data-export")})]}),s.jsx("div",{className:"px-4 opacity-60 text-sm",children:t("others")}),s.jsx("div",{className:"flex flex-col px-4 gap-2",children:s.jsx(z,{variant:"outline",className:"py-4",onClick:o,children:t("import-from-oncent-github-io")})}),s.jsx("div",{className:"flex flex-col px-4 gap-2",children:s.jsx(z,{variant:"outline",className:_(ql,"py-4 after:translate-x-[calc(50%-4px)] after:translate-y-[-4px]"),onClick:EE,children:t("smart-import")})}),s.jsx("div",{className:"flex flex-col px-4 gap-2",children:s.jsx(z,{variant:"outline",className:_(ql,"py-4 after:translate-x-[calc(50%-4px)] after:translate-y-[-4px]"),onClick:a,children:t("bill-compression")})})]})}),s.jsx(dE,{}),s.jsx(ME,{})]})}const[RE,TE]=we(DE,{dialogTitle:"data-manager",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function OE(){const e=V();return s.jsxs("div",{className:"lab",children:[s.jsx(z,{onClick:()=>{TE()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--database-outline] size-5"}),s.jsx("div",{children:e("data-manager")})]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})}),s.jsx(RE,{})]})}const IE="d141bc5d66",PE="1.1";function AE(){const e=V(),[t,n]=f.useState(!1);return s.jsxs("div",{className:"flex flex-col justify-center items-center",onClick:()=>{n(r=>!r)},children:[s.jsx("div",{className:"font-semibold",children:e("cent-app-name")}),t?s.jsx($E,{}):s.jsxs("div",{className:"text-xs opacity-60",children:[e("version"),": ",PE]})]})}const Xl=IE,_E="https://api.github.com/repos/glink25/cent/branches/main",$E=()=>{const[e,t]=f.useState(null),[n,r]=f.useState(!0),[o,a]=f.useState(null);f.useEffect(()=>{(async()=>{r(!0),a(null);try{const d=await fetch(_E,{headers:{Accept:"application/vnd.github.v3+json"}});if(!d.ok)throw new Error(`GitHub API error: ${d.statusText}`);const m=(await d.json())?.commit?.sha;if(m)t(m);else throw new Error(" Commit SHA")}catch(d){console.error("Failed to fetch latest git hash from GitHub:",d),a(" Hash ")}finally{r(!1)}})()},[]);const i=l=>l.substring(0,8),c=e&&i(Xl)===i(e);return s.jsxs("div",{className:"text-xs",children:[s.jsxs("div",{className:"flex justify-between items-center py-1",children:[s.jsxs("span",{className:"font-semibold text-gray-600",children:["Current:",s.jsx("span",{className:`ml-1 text-xs font-normal  ${c?"text-green-700":"text-red-700"}`,children:c?"(newest)":" (outdated)"})]}),s.jsx("code",{className:"text-gray-900",children:i(Xl)})]}),s.jsx("div",{className:"border-t border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-semibold text-gray-600",children:"Latest:"}),n&&s.jsx("i",{className:"icon-[mdi--loading] animate-spin"}),e&&s.jsx("code",{className:"font-bold",children:i(e)})]})})]})};function LE({onCancel:e}){const t=V();return s.jsx(Te,{title:t("about-cent"),onBack:e,className:"h-full overflow-hidden",children:s.jsxs("div",{className:"divide-y divide-solid flex flex-col overflow-hidden py-4 gap-2",children:[s.jsxs("div",{className:"w-full flex flex-col justify-between items-center px-4 gap-2 pb-4",children:[s.jsx("img",{src:"/icon.png",alt:"",width:80,height:80,className:"rounded-lg shadow-md aspect-square"}),s.jsx(AE,{})]}),s.jsxs("a",{className:"w-full h-10 flex justify-between items-center px-4",target:"_blank",href:"https://github.com/glink25/Cent/issues/new",rel:"noopener",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--alternate-email] size-5"}),s.jsx("div",{className:"text-sm",children:t("feedback")})]}),s.jsx("i",{className:"icon-[mdi--arrow-top-right]"})]}),s.jsxs("a",{className:"w-full h-10 flex justify-between items-center px-4",target:"_blank",href:"https://glink25.github.io/tag/Cent/",rel:"noopener",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--rss-box] size-5"}),s.jsx("div",{className:"text-sm",children:t("blog")})]}),s.jsx("i",{className:"icon-[mdi--arrow-top-right]"})]}),s.jsxs("a",{className:"w-full h-10 flex justify-between items-center px-4",target:"_blank",href:"https://github.com/glink25/Cent",rel:"noopener",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--github] size-5"}),s.jsx("div",{className:"text-sm",children:"Github"})]}),s.jsx("i",{className:"icon-[mdi--arrow-top-right]"})]})]})})}const[BE,FE]=we(LE,{dialogTitle:"experimental-functions",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function WE(){const e=V();return s.jsxs("div",{className:"lab",children:[s.jsx(z,{onClick:()=>{FE()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--about-circle-outline] size-5"}),e("about-cent")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})}),s.jsx(BE,{})]})}function zE(){const e=V(),[t,n]=f.useState(()=>Jt.getState().keyboardHeight??50),r=f.useRef(null);return f.useEffect(()=>{const o=r.current;if(!o)return;const a=i=>{const c=Number(i.target.value);Jt.setState(l=>({...l,keyboardHeight:c}))};return o.addEventListener("change",a),()=>{o.removeEventListener("change",a)}},[]),s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsx("div",{className:"text-sm",children:s.jsx("div",{children:e("keyboard-height")})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-sm",children:[t,"%"]}),s.jsx("input",{ref:r,type:"range",min:"1",max:"100",step:1,className:"h-[180px]",value:t,onInput:o=>{n(Number(o.target.value))}}),s.jsx("button",{type:"button",className:"cursor-pointer",onClick:()=>{n(50),Jt.setState(o=>({...o,keyboardHeight:void 0}))},children:s.jsx("i",{className:"icon-[mdi--reload]"})})]})]})}function HE(){const e=V(),[t,n]=An("smartPredict"),r=o=>{if(n(o),o){const a=Ce.getState().currentBookId;if(!a)return;const i=ke.getState().id;hn.learn(a,[i]),Wm()}else hn.clearModels(),BC()};return s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:e("smart-predict")}),s.jsx("div",{className:"text-xs opacity-60",children:e("smart-predict-tip")})]}),s.jsx(It,{checked:t,onCheckedChange:r})]})}function YE({onCancel:e}){const t=V(),[n,r]=An("autoLocateWhenAddBill"),[o,a]=An("enterAddBillWhenReduceMotionChanged"),[i,c]=An("readClipboardWhenReduceMotionChanged"),[l,d]=An("multiplyKey"),[u,m]=An("disableHashModeOnAndroidStandaloneMode"),h=mp();return s.jsx(Te,{title:t("more-functions"),onBack:e,className:"h-full overflow-hidden",children:s.jsxs("div",{className:"flex-1 flex flex-col overflow-y-auto py-4",children:[s.jsx("div",{className:"text-xs opacity-60 px-4 py-1",children:t("bill-record-settings")}),s.jsxs("div",{className:"flex-shrink-0 divide-y divide-solid flex flex-col overflow-hidden gap-2",children:[s.jsx(HE,{}),s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:t("auto-locate-when-add-bill")}),s.jsx("div",{className:"text-xs opacity-60",children:t("auto-locate-when-add-bill-description")})]}),s.jsx(It,{checked:n,onCheckedChange:r})]}),s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:t("multiply-key")}),s.jsx("div",{className:"text-xs opacity-60",children:t("multiply-key-tip")})]}),s.jsxs(Et,{value:l??"off",onValueChange:d,children:[s.jsx(Dt,{children:s.jsx(En,{})}),s.jsxs(zt,{children:[s.jsx(Re,{value:"off",children:t("off")}),s.jsx(Re,{value:"double-zero",children:"00"}),s.jsx(Re,{value:"triple-zero",children:"000"})]})]})]}),s.jsx(zE,{})]}),s.jsx("div",{className:"text-xs opacity-60 px-4 py-1 pt-4",children:t("experimental-functions")}),s.jsxs("div",{className:"flex-shrink-0 divide-y divide-solid flex flex-col overflow-hidden gap-2",children:[s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:t("enter-add-bill-when-reduce-motion-changed")}),s.jsxs("div",{className:"text-xs opacity-60",children:[t("enter-add-bill-when-reduce-motion-changed-description"),s.jsx("a",{href:"https://glink25.github.io/post/Cent-PWA%E5%B0%8F%E6%8A%80%E5%B7%A7/#%E5%BF%AB%E6%8D%B7%E8%AE%B0%E8%B4%A6",className:"underline px-2",target:"_blank",rel:"noopener",children:"Tips"})]})]}),s.jsx(It,{checked:o,onCheckedChange:a})]}),s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:t("quick-add-when-reduce-motion-changed")}),s.jsxs("div",{className:"text-xs opacity-60",children:[t("enter-add-bill-when-reduce-motion-changed-description"),s.jsx("a",{href:"https://glink25.github.io/post/Cent-%E5%B7%B2%E6%94%AF%E6%8C%81%E5%A4%9A%E5%B8%81%E7%A7%8D%E8%87%AA%E5%8A%A8%E8%AE%B0%E8%B4%A6/#iOS%E5%BF%AB%E6%8D%B7%E6%8C%87%E4%BB%A4%E5%BF%AB%E9%80%9F%E8%AE%B0%E8%B4%A6",className:"underline px-2",target:"_blank",rel:"noopener",children:"Tips"})]})]}),s.jsx(It,{checked:i,onCheckedChange:c})]}),s.jsxs("div",{className:"w-full h-10 flex justify-between items-center px-4",children:[s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[t("disable-android-hash-mode")," ",s.jsx("div",{className:_("w-2 h-2 rounded-full",h?"bg-green-500":"bg-foreground/60")})]}),s.jsx("div",{className:"text-xs opacity-60",children:t("disable-android-hash-mode-description")})]}),s.jsx(It,{checked:u,onCheckedChange:m})]})]})]})})}const[UE,VE]=we(YE,{dialogTitle:"experimental-functions",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function GE(){const e=V();return s.jsxs("div",{className:"lab",children:[s.jsx(z,{onClick:()=>{VE()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--flask] size-5"}),e("more-functions")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})}),s.jsx(UE,{})]})}function KE(){const e=V(),{locale:t,setLocale:n}=hp();return s.jsx("div",{className:"w-full px-4 py-1 text-sm",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center text-sm font-medium",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--language] size-5"}),e("language")]}),s.jsxs(Et,{value:t,onValueChange:r=>{n(r),setTimeout(()=>{location.reload()},10)},children:[s.jsx(Dt,{className:"w-fit text-xs rounded-sm",children:s.jsx(En,{})}),s.jsx(zt,{children:pp.map(r=>s.jsx(Re,{value:r.name,children:r.label},r.name))})]})]})})}const po="theme",up=f.createContext(void 0);function Jl(e){const t=document.documentElement;t&&(e==="dark"?t.classList.add("dark"):e==="light"?t.classList.remove("dark"):window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?t.classList.add("dark"):t.classList.remove("dark"))}const qE=({children:e})=>{const[t,n]=f.useState(()=>{try{return localStorage.getItem(po)??"system"}catch{return"system"}});f.useEffect(()=>{if(Jl(t),t==="system"&&typeof window<"u"&&window.matchMedia){const i=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>Jl("system");return i.addEventListener?i.addEventListener("change",c):i.addListener&&i.addListener(c),()=>{i.removeEventListener?i.removeEventListener("change",c):i.removeListener&&i.removeListener(c)}}},[t]);const r=f.useCallback(i=>{try{i==="system"?localStorage.removeItem(po):localStorage.setItem(po,i)}catch{}n(i)},[]),o=f.useCallback(()=>{n(i=>{const c=i==="dark"?"light":"dark";try{localStorage.setItem(po,c)}catch{}return c})},[]),a=f.useMemo(()=>({theme:t,setTheme:r,toggle:o}),[t,r,o]);return s.jsx(up.Provider,{value:a,children:e})};function XE(){const e=f.useContext(up);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}function JE(){const e=V(),{theme:t,setTheme:n}=XE();return s.jsx("div",{className:"w-full px-4 py-1 text-sm",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center text-sm font-medium",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--clothes-hanger] size-5"}),e("theme")]}),s.jsxs(Et,{value:t,onValueChange:r=>{n(r)},children:[s.jsx(Dt,{className:"w-fit text-xs rounded-sm",children:s.jsx(En,{})}),s.jsxs(zt,{children:[s.jsx(Re,{value:"system",children:e("theme-system")}),s.jsx(Re,{value:"light",children:e("theme-light")}),s.jsx(Re,{value:"dark",children:e("theme-dark")})]})]})]})})}function ZE({onCancel:e}){const t=V(),{id:n,avatar_url:r,name:o}=ke(),{currentBookId:a}=Ce(),i=ks(),c=async d=>{const u=prompt(t("please-enter-nickname"));u&&await ne.getState().updatePersonalMeta(m=>(m.names||(m.names={}),m.names[d.id]=u,m))},l=async d=>{await ne.getState().updatePersonalMeta(u=>(u.names||(u.names={}),delete u.names[d.id],u))};return s.jsxs(Te,{title:t("user-management"),onBack:e,className:"h-full overflow-hidden",children:[s.jsx("div",{className:"px-4 opacity-60 text-sm",children:t("me")}),s.jsx("div",{className:"flex items-center justify-between gap-2 px-4 py-2 border-b",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:r,alt:o,className:"w-12 h-12 rounded-full border"}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold",children:o}),s.jsx("div",{className:"text-sm opacity-60",children:n})]})]})}),s.jsx("div",{className:"px-4 opacity-60 text-sm pt-2",children:t("collaborators")}),s.jsx("div",{className:"divide-y divide-solid flex flex-col overflow-hidden gap-2",children:i.filter(d=>d.id!==n).map(d=>s.jsxs("div",{className:"flex items-center justify-between gap-2 px-4 py-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("img",{src:d.avatar_url,alt:d.name,className:"w-12 h-12 rounded-full border"}),s.jsxs("div",{children:[d.name!==d.originalName?s.jsx(za,{className:"[&_.delete-button]:bg-stone-800",onDelete:()=>{l(d)},icon:s.jsx("i",{className:"icon-[mdi--reload] text-white size-3"}),children:s.jsx("div",{className:"font-semibold",children:d.name})}):s.jsx("div",{className:"font-semibold",children:d.name}),s.jsx("div",{className:"text-sm opacity-60",children:d.id})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(z,{size:"sm",variant:"secondary",onClick:()=>{c(d)},children:s.jsx("i",{className:"icon-[mdi--pencil]"})}),s.jsx(z,{size:"sm",asChild:!0,children:s.jsx("a",{href:`https://github.com/${a}/settings/access`,target:"_blank",children:s.jsx("i",{className:"icon-[mdi--settings]"})})})]})]},d.id))})]})}const[QE,eD]=we(ZE,{dialogTitle:"user-management",dialogModalClose:!0,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function tD(){const e=V();return s.jsxs("div",{className:"lab",children:[s.jsx(z,{onClick:()=>{eD()},variant:"ghost",className:"w-full py-4 rounded-none h-auto",children:s.jsxs("div",{className:"w-full px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("i",{className:"icon-[mdi--account-supervisor-outline] size-5"}),e("user-management")]}),s.jsx("i",{className:"icon-[mdi--chevron-right] size-5"})]})}),s.jsx(QE,{})]})}function nD(){const e=V(),{id:t,avatar_url:n,name:r,expired:o}=ke(),a=async()=>{confirm(e("logout-warning"))&&(await Promise.all([Ot.logout(),new Promise(c=>{setTimeout(()=>{c()},100)})]),localStorage.clear(),sessionStorage.clear(),location.reload())};return s.jsxs("div",{className:"flex items-center justify-between gap-2 px-8 py-4",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-2 overflow-hidden",children:[s.jsx("img",{src:n,alt:`${t}`,className:"w-12 h-12 rounded-full border"}),s.jsxs("div",{className:"flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{className:"font-semibold flex-1 truncate",children:r}),s.jsx("div",{className:"px-2 flex-shrink-0",title:`Signed with ${Ot.name}`,children:s.jsx("div",{className:"text-xs border rounded px-1",children:Ot.name})})]}),s.jsx("div",{className:"text-sm opacity-60",children:t})]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[o&&s.jsxs(z,{size:"sm",variant:"outline",onClick:()=>{Ot.loginWith(Ot.type)},children:[s.jsx("i",{className:"icon-[mdi--reload]"}),e("re-login")]}),s.jsx(z,{size:"sm",variant:"destructive",onClick:a,children:e("logout")})]})]})}function rD({onConfirm:e,onCancel:t}){const n=V();return s.jsx(Te,{onBack:t,title:n("settings"),className:"h-full overflow-hidden",children:s.jsxs("div",{className:"divide-y divide-solid flex flex-col overflow-hidden",children:[s.jsx(nD,{}),s.jsxs("div",{className:"flex-1 overflow-y-auto flex flex-col divide-y pb-4",children:[s.jsx(nE,{}),s.jsx(oS,{}),s.jsx(aj,{}),s.jsx(B1,{}),s.jsx(X1,{}),s.jsx(tD,{}),s.jsx(OE,{}),s.jsx(GE,{}),s.jsx(WE,{}),s.jsx(JE,{}),s.jsx(KE,{})]})]})})}const[oD,sD]=we(rD,{dialogTitle:"Settings",dialogModalClose:!1,contentClassName:"h-full w-full max-h-full max-w-full rounded-none sm:rounded-md sm:max-h-[55vh] sm:w-[90vw] sm:max-w-[500px]"});function aD(){const e=cn(),t=Cm(),n=f.useMemo(()=>["/stat","/","/search"].find(o=>e.pathname===o),[e.pathname]),r=o=>{t(`${o}`)};return et.createPortal(s.jsxs("div",{className:`floating-tab fixed w-screen h-18 flex items-center justify-around sm:h-screen\r
         sm:w-18 sm:flex-col sm:justify-start z-[0] \r
         bottom-[calc(.25rem+env(safe-area-inset-bottom))]\r
         sm:top-[env(safe-area-inset-top)] sm:left-[calc(.25rem+env(safe-area-inset-left))]`,children:[s.jsx("button",{type:"button",className:`w-14 h-14 sm:w-10 sm:h-10 cursor-pointer flex items-center justify-center rounded-full shadow-md m-2 transition-all hover:bg-[#9a9ba2] active:bg-[#cdcdd0] dark:hover:bg-[#aba8a5] ${n==="/search"?"bg-[#cdcdd0] dark:bg-[#918c89]":"bg-background dark:bg-stone-500"}`,onClick:()=>r("/search"),children:s.jsx("i",{className:"icon-[mdi--search] size-5"})}),s.jsxs("div",{className:"flex items-center rounded-full p-1 bg-background dark:bg-stone-500 w-56 h-14 m-2 shadow-md sm:flex-col sm:w-10 sm:h-50 sm:-order-1",children:[s.jsx("button",{type:"button",className:`flex-1 h-full w-full transition rounded-full flex items-center justify-center cursor-pointer hover:bg-[#9a9ba2] active:bg-[#cdcdd0] ${n==="/"?"bg-foreground/20":""}`,onClick:()=>r("/"),children:s.jsx("i",{className:"icon-[mdi--format-align-center] size-5"})}),s.jsx("button",{type:"button",className:"w-18 h-18 sm:w-14 sm:h-14 rounded-full bg-stone-900 shadow-md flex items-center justify-center m-1 cursor-pointer transform transition-all hover:scale-105",onClick:()=>{lc(),ap()},children:s.jsx("i",{className:"icon-[mdi--add] text-[white] size-7"})}),s.jsx("button",{type:"button",className:`flex-1 h-full w-full transition-all rounded-full flex items-center justify-center cursor-pointer hover:bg-[#9a9ba2] active:bg-[#cdcdd0] ${n==="/stat"?"bg-foreground/20":""}`,onClick:()=>r("/stat"),children:s.jsx("i",{className:"icon-[mdi--chart-box-outline] size-5"})})]}),s.jsx("button",{type:"button",className:"w-14 h-14 sm:w-10 sm:h-10 cursor-pointer flex items-center justify-center rounded-full shadow-md m-2 transition-all hover:bg-[#9a9ba2] active:bg-[#cdcdd0] bg-background dark:bg-stone-500 dark:hover:bg-[#aba8a5]",onClick:()=>{sD()},children:s.jsx("i",{className:"icon-[mdi--more-horiz] size-5"})})]}),document.body)}var iD=(e,t,n,r,o,a,i,c)=>{let l=document.documentElement,d=["light","dark"];function u(p){(Array.isArray(e)?e:[e]).forEach(g=>{let x=g==="class",v=x&&a?o.map(y=>a[y]||y):o;x?(l.classList.remove(...v),l.classList.add(a&&a[p]?a[p]:p)):l.setAttribute(g,p)}),m(p)}function m(p){c&&d.includes(p)&&(l.style.colorScheme=p)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)u(r);else try{let p=localStorage.getItem(t)||n,g=i&&p==="system"?h():p;u(g)}catch{}},cD=f.createContext(void 0),lD={setTheme:e=>{},themes:[]},dD=()=>{var e;return(e=f.useContext(cD))!=null?e:lD};f.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:o,defaultTheme:a,value:i,themes:c,nonce:l,scriptProps:d})=>{let u=JSON.stringify([n,t,a,e,c,i,r,o]).slice(1,-1);return f.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?l:"",dangerouslySetInnerHTML:{__html:`(${iD.toString()})(${u})`}})});const uD=({...e})=>{const{theme:t="system"}=dD();return et.createPortal(s.jsx(ng,{theme:t,className:"toaster group !mt-[env(safe-area-inset-top)] !mb-[env(safe-area-inset-bottom)] pointer-events-auto",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground",success:"[&_[data-icon]]:text-[green]",warning:"[&_[data-icon]]:text-[orange]"}},...e}),document.body)},fp=(e,t)=>{const{threshold:n=2,timeout:r=3e3,disabled:o}=t||{},a=f.useRef(0),i=f.useRef(null),c=f.useRef(e);c.current=e;const l=f.useRef(!1);f.useEffect(()=>{if(typeof window>"u"||typeof window.matchMedia>"u"||o)return;const d=window.matchMedia("(prefers-reduced-motion: reduce)"),u=()=>{l.current||(i.current&&clearTimeout(i.current),a.current+=1,a.current>=n?(c.current?.(),l.current=!0,setTimeout(()=>{l.current=!1},2e3),a.current=0):i.current=setTimeout(()=>{a.current=0},r))};return d.addEventListener("change",u),()=>{d.removeEventListener("change",u),i.current&&clearTimeout(i.current)}},[n,r,o])};function fD(){const{enterAddBillWhenReduceMotionChanged:e}=Jt();fp(f.useCallback(()=>{lc(),ap()},[]),{disabled:!e})}function mD(){const e=V(),{readClipboardWhenReduceMotionChanged:t}=Jt(),{categories:n,expenses:r}=Wt();fp(f.useCallback(async()=>{let o=null;const a=async c=>{if(o!==null&&Ve.dismiss(o),!c)return;const l=JSON.parse(c),d=n.find(u=>u.id===l.category)??r[0];await ne.getState().addBill({categoryId:d.id,amount:fn(l.money),comment:l.comment,type:"expense",time:Date.now()}),Ve.success(e("quick-entry-success"),{duration:2e3})},{text:i}=await Ka();if(i===null){o=Ve(e("read-bill-from-clipboard"),{className:"[&>[data-content]]:flex-1",duration:5e3,position:"top-center",action:s.jsx(z,{onClick:async()=>{const{text:c}=await Ka();a(c)},children:e("read-clipboard")})});return}a(i)},[n,e,r[0]]),{disabled:!t})}function hD(){return fD(),mD(),f.useEffect(()=>{Jt.getState().smartPredict&&Wm()},[]),s.jsx(qE,{children:s.jsxs(vC,{children:[s.jsx(aD,{}),s.jsx("div",{className:"w-full h-full sm:pl-18",children:s.jsx(Iw,{})}),s.jsx(k1,{}),s.jsx(E1,{}),s.jsx(XN,{}),s.jsx(z1,{}),s.jsx(oD,{}),s.jsx(q1,{}),s.jsx(tE,{}),s.jsx(F0,{}),s.jsx(L1,{}),s.jsx(_1,{}),s.jsx(gC,{}),s.jsx(sj,{}),s.jsx(rS,{}),s.jsx(tg,{}),s.jsx(uD,{})]})})}const pD=Ql(async()=>Za(()=>import("./index-CNut6PbO.js"),__vite__mapDeps([3,1,2,4,0,5,6]),import.meta.url),async()=>{await ne.getState().refreshBillList()}),gD=Ql(()=>Za(()=>import("./index-S082Ejhv.js"),__vite__mapDeps([7,1,2,4,0,5]),import.meta.url));function xD(){return s.jsx(Aw,{children:s.jsxs(xr,{element:s.jsx(hD,{}),children:[s.jsx(xr,{index:!0,element:s.jsx(eE,{})}),s.jsx(xr,{path:"/search",element:s.jsx(f.Suspense,{fallback:s.jsx(Wc,{}),children:s.jsx(gD,{})})}),s.jsx(xr,{path:"/stat/:id?",element:s.jsx(f.Suspense,{fallback:s.jsx(Wc,{}),children:s.jsx(pD,{})})})]})})}function vD(){return s.jsx(Ow,{children:s.jsx(xD,{})})}const LD=Object.freeze(Object.defineProperty({__proto__:null,default:vD},Symbol.toStringTag,{value:"Module"}));export{nn as $,cn as A,R1 as B,Ps as C,Un as D,zb as E,es as F,fd as G,wC as H,ts as I,Ss as J,zm as K,T1 as L,_l as M,Aa as N,XC as O,Te as P,Hm as Q,_i as R,Et as S,Ff as T,Ui as U,En as V,FC as W,d1 as X,Ta as Y,bn as Z,wn as _,_D as a,LD as a0,Qe as b,er as c,Wt as d,ks as e,PD as f,J as g,ID as h,mE as i,ne as j,Cm as k,Ce as l,Ma as m,Mn as n,$D as o,Ba as p,Dt as q,zt as r,D1 as s,x0 as t,XE as u,Re as v,I1 as w,Vn as x,Cn as y,Or as z};
